Make a custom keyboard layout the system default — even for the login screen <body> Can I make a custom keyboard layout (one that wasn’t included with OS X by default) the system default — even for the login screen?  <answer44916> I found this old MacWorld tip, that suggested running the Setup Assistant again:  precodesudo /System/Library/CoreServices/Setup Assistant.app\ /Contents/MacOS/Setup Assistant /code/pre  At first I thought this wasn’t supported in Lion anymore as running this command didn’t seem to have any effect. Only after posting this question, I noticed there’s a typo in the command. The space characters need to be escaped properly, or the location of the binary needs to be quoted. For this reason, the tip I linked to doesn’t work.  Here’s the correct command:  precodesudo "/System/Library/CoreServices/Setup Assistant.app/Contents/MacOS/Setup Assistant" /code/pre  Alternatively, this would work as well:  precodesudo /System/Library/CoreServices/Setup\ Assistant.app/Contents/MacOS/Setup\ Assistant /code/pre  Another gotcha that wasn’t mentioned on the page I linked to: the custom keyboard layout needs to be installed in code/Library/Keyboard Layouts//code (i.e. codecd /Library/Keyboard\ Layouts/code), not code~/Library/Keyboard Layouts/code, for it to appear in the Setup Assistant’s keyboard layout selection screen.  hr  strongUpdate:/strong strikeAs of OS X 10.8, you’ll need to run an extra command (i.e. remove a file first):/strike  precodesudo rm /var/db/.AppleSetupDone; sudo "/System/Library/CoreServices/Setup Assistant.app/Contents/MacOS/Setup Assistant" /code/pre  strikeAlso, you will have to create a new user account in order to complete the Setup Assistant — but don’t worry, you can delete the new account afterwards./strike  This trick doesn’t work anymore in recent OS X 10.8 versions.  hr  strongUpdate:/strong Here’s everything I know about custom keyboard layouts on OS X.  <answer108836> This works on OSX 10.9 Mavericks, with a keyboard layout that I created with Ukulele. Assuming that you have the layout already installed in your system, log into your account and make your custom keyboard layout active.  Open a terminal and run the following command:  precodecp /Library/Preferences/com.apple.HIToolbox.plist /tmp/ /code/pre  strongIf you intend to use a text editor/strong (e.g., TextWrangler) to make this change instead of XCode (which has a specialized graphical plist editor), strongalso run/strong:  precodeplutil -convert xml1 /tmp/com.apple.HIToolbox.plist /code/pre  Now, open code/tmp/com.apple.HIToolbox.plist/code in the text editor or in XCode.  Throughout the file you will find several mentions of a codeKeyboardLayout ID/code key followed by an integer and codeKeyboardLayout Name/code followed by a string. Change these strings to the name of your custom keyboard layout and the id integers to the ID of your layout (the easiest way to find the right values is to compare with your user settings found in the file code~/Library/Preferences/com.apple.HIToolbox.plist/code.  Also the value of the key codeAppleCurrentKeyboardLayoutInputSourceID/code must be changed accordingly (probably to something like codeorg.unknown.keylayout.NameOfYourLayout/code). Again you can find this value in your local preference file.  Once these changes are done, save the file and go back to the terminal. To play it safe, you can create a copy of the original codecom.apple.HIToolbox.plist/code file, just in case you made an error and need to roll back. For instance, to save a copy in your emDocuments/em folder:  precodesudo cp /Library/Preferences/com.apple.HIToolbox.plist ~/Documents /code/pre  Then install your change with the following:  precodesudo sh -c 'cat /tmp/com.apple.HIToolbox.plist &gt; /Library/Preferences/com.apple.HIToolbox.plist' /code/pre  (It isn't necessary to convert your file back out of text form with codeplutil/code if you did so earlier.)  Exit the terminal, and restart the computer (logout is not sufficient: the file will not be reread). After restart, you should have your keyboard layout in the login screen.  NOTE: it's possible that it would have been enough to copy the file codecom.apple.HIToolbox.plist/code from code~/Library/Preferences//code to code/Library/Preferences//code, however in my case it has more entries, so I decided to play it safe and just modify the existing file.  <answer108837> I’m using a custom keyboard layout created with Ukelele strongin OS X 10.8.5/strong. I changed the login screen keyboard layout with the following steps:  ol liOpen codeUsers &amp; Groups/code in codeSystem Preferences/code/li liSelect codeLogin Options/code from the bottom of the left panel/li liCheck codeShow Input menu in login window/code/li liGo to login screen/li liSelect the preferred layout under codeOther input sources/code from the input menu, located at top right/li liGo back and uncheck the codeShow Input menu in login window/code to prevent further changes to the login layout/li /ol  I found this method far easier than editing some random code.plist/code files and running commands it the Terminal.  This method might require administrative access, as you possibly have to unlock the right pane in step 3. above by clicking the lock icon at the bottom.  strongUpdate:/strong Sadly, this doesn’t seem to work on OS X 10.9.  <answer253198> After installing macOS Sierra my custom layout was reinitialized back to the default each time after login in my account.  Apple added new keyboards and the ID was conflicting with the keyboard I was using.  To validate if you have this issue run:     sudo touch /Library/Keyboard\ Layouts/   The output:  precodeKeyboard Layouts: duplicate keyboard layout identifier 5000. Keyboard Layouts: keyboard layout identifier 5000 has been replaced with 16383. /code/pre  The output claims it fixes something but it actually did not do anything. I still had to edit the layout myself and it started working like before.  <comment89215> I followed your steps for the Mountain Lion 10.8 and ran the setup assistant gain set my default keyboard layout to Dvorak and tried to login but it did not work. on reboot it was still using qwerty for the login screen. <comment126639> Yeah, it doesn’t seem to work anymore since OS X 10.8. :( <comment126780> (meanwhile, you could unaccept the answer, it readers might be confused) <comment126824> @Lohoris: Done! <comment127555> I’ve awarded you the bounty as this seemed like the best answer, but it doesn’t actually seem to work — it always goes back to the default US keyboard layout. To test this, I’ve used a keyboard layout that allows me to type three symbols with one keystroke, so that I can see how many masked characters appear in the password input box. After applying the steps you mentioned, I could only enter one symbol at a time (as per the US keyboard). <comment127556> Trying this right now, as the other answer didn’t work. FWIW, here’s what my `com.apple.HIToolbox.plist` file looks like after the changes: https://gist.github.com/anonymous/d18bae208b5cf12e48be <comment127557> Worked flawlessly, thanks! I’m sorry I can’t give you the bounty any more, so I’ll just set up a new one just to reward you for this answer. <comment129782> Glad it helped. Thanks for the extra bounty! :-) <comment129785> Can you describe what doesn't work with OS X 10.9? I am able to follow these steps (I didn't do step 6) successfully when using the Workman layout (found here: http://workman.deekayen.net/). My problem however is that if that layout is selected and I lock the computer, the input menu won't show in the login screen, whereas it's fine if I have Dvorak or something else natively supported by OS X. (i.e. I see the menu and can switch back to U.S. if needed) <comment129803> @TimothéeBoucher My [previous comment](http://apple.stackexchange.com/a/108837/4408#comment127555_108837) describes what goes wrong, and how I tested this. <comment137539> Worked like a charm. Great tip! <comment137847> Please update the question b removing the update note, the best answer now works on the latest osx versions as well <comment137848> This is fantastic. I've been bogged down by my Belgian keyboard default to long! I wish i could give you multiple up votes! <comment200754> Doesn't seem to work in Yosemite, has anyone else tried? <comment309245> It doesn't seem to work on El Captain either --- or has anybody been able to recreate? <comment309558> I'm did this exactly the same way in El Capitan without any trouble, on two different computers. <comment318881> Also got my custom one changed. Sadly, fixing IDs in the .plist files didn't help me. <comment318887> @PavelGurkov did you run the sudo touch command on the folder after? It was required for the OS to consider it. <comment318990> Yeah, did that, got no output at all. Checked everything I could, but still... Worked flawlessly on El Capitan, no luck on Sierra.