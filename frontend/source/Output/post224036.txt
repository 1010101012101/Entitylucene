Where does iPhone store information about current battery percentage? <body> I wonder how is it exactly with the calculation of the battery percentage: from 100% down the software calculates which resources were used and for how long and thus it approximates the current battery state. But where is it stored - as logs, or as app data? I mean what happens with this information after hard reset or DFU mode - in DFU mode iOS is not loaded, but this software still runs? How does it know what is the percentage after switching it on again? Is charging in DFU mode still causing the software to calculate the approximate percentage?  <answer224364> All of the battery and power usage information (including approximately how much power applications and certain system processes use over time) is stored in code/var/mobile/Library/BatteryLife/CurrentPowerlog.PLSQL/code and code/var/mobile/Library/BatteryLife/Archives/powerlog_*.PLSQL/code. This data is both used to aid in the calculation of battery percentage and to unmask power-hungry applications.  Apple's algorithm for battery percentage is based on a number of factors: the maximum capacity of the battery (known based on the battery that the iOS device was manufactured with), the remaining capacity of the battery (calculated based on Voltage), power usage over time (stored in codeCurrentPowerlog/code), and current power usage (calculated based on draw). This data is all put together to extrapolate an estimated remaining capacity which iOS displays as the battery percentage.  When the iOS device is in a different mode other than iOS (such as DFU Mode or Recovery Mode), it does not store or read any information from the codeCurrentPowerlog/code database; it uses the direct method of determining the capacity of its Lithium-Ion battery: simply the Voltage that the battery is currently outputting. Take a look at a Voltage over time chart for Li-Ion batteries, and you may wish to read more information about determining capacities for Li-Ion batteries.  <comment276187> I've updated my answer with more information including where the battery usage logs are stored. If my answer helped, please mark it as the correct answer (there's a checkmark you can click next to it). <comment277894> And if there's any information I can add or further explain, don't hesitate to provide feedback. <comment277921> Thanks for the answer and all, but how can I know it is good? In one of the podcasts I heard that Iphone is calculating the usage based on time and power of used resources, reportedly that's why there is a need for calibrating the battery to let the device know when it is really 0%. If it was based on the voltage, would it need the calibration? I will gladly accept your answer, but I counted on more answers to compare, or at least on some hints where to find it in official apple documents. I appreciate your help, but I would like to know if it is your guess or you know it from somewhere... <comment278830> There were pieces I knew and pieces that were deductions I made based on how these things are commonly done. I did a bunch more research, because I was curious, and I wanted to prove my answer for you. I have updated my answer below to reflect my new findings. Remember, though, most of this is just me referencing someone who referenced a disassembled version of iOS and Apple's code, so interpretations and misinformation can be present, and I can't prove any of it, because Apple's code is protected by copyright law, and thus cannot be published. <comment278831> As far as battery calibration is concerned, I do not believe Apple's code makes use of such a thing anywhere. I could be wrong, but there's no need for them to "re-calibrate" when they have science and known statistics at hand. Read the link on "more information about determining capacities" to see what I'm talking about. <comment278834> And disclaimer: I am not in possession of, nor have I seen, the code that runs the battery percentage on iOS. I'm only summarizing what others have found and reported. As a rhetorical question, even if I did disassemble Apple's code and described it to you, would I have any more validity than I do now? <comment278835> The one thing I know for sure, and can prove, is that the battery usage information is stored in `/var/mobile/Library/BatteryLife/CurrentPowerlog.PLSQL`. <comment281595> Is there any other information you need? <comment281601> @AndrewLarsson I found Steve Gibson's explanation about these Li-Ion batteries. It's in Security Now episode 322: https://www.youtube.com/watch?v=ktnxlQwaKdE check from 42:25 to 45:35. Transcript here: https://www.grc.com/sn/sn-322.htm, search for "battery". He says that it uses timing and calculation of power consumption because voltage is not reliable in this type of batteries. <comment281608> That's exactly what my answer says now. <comment281610> The same in episode 526: https://www.grc.com/sn/sn-526.htm <comment281611> Your third paragraph of the answer says exact opposite concerning the voltage. <comment281613> My third paragraph applies only when in DFU Mode, Recovery Mode, and other modes that aren't iOS. Sorry for any confusion. <comment281614> I've further clarified it in my answer that the third paragraph only applies to modes like DFU and Recovery.