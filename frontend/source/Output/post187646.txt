Problem with build-in VPN client for Cisco IPSec protocol <body> I recently bought a new MacBook Pro Retina and unfortunately the built-in VPN client (Cisco IPsec configuration) doesn't work. Whats interesting third party VPN Tracker 8 works.  I'm running Mac OS X is Yosemite 10.10.3.  Logs after getting connected status using Apple build-in client:  precodeMay 17 21:31:44 MacBook-Pro-Marcin.local racoon[706]: IKE Packet: transmit success. (Information message). May 17 21:31:44 MacBook-Pro-Marcin.local racoon[706]: IKEv1 Information-Notice: transmit success. (R-U-THERE? ACK). May 17 21:31:44 MacBook-Pro-Marcin.local racoon[706]: IKE Packet: receive success. (Information message). May 17 21:32:14 MacBook-Pro-Marcin.local racoon[706]: IKE Packet: transmit success. (Information message). May 17 21:32:14 MacBook-Pro-Marcin.local racoon[706]: IKEv1 Information-Notice: transmit success. (R-U-THERE? ACK). May 17 21:32:14 MacBook-Pro-Marcin.local racoon[706]: IKE Packet: receive success. (Information message). May 17 21:32:14 MacBook-Pro-Marcin.local racoon[706]: IPSec Phase 2 started (Initiated by me). May 17 21:32:14 --- last message repeated 1 time --- May 17 21:32:14 MacBook-Pro-Marcin.local racoon[706]: &gt;&gt;&gt;&gt;&gt; phase change status = Phase 2 started May 17 21:32:14 --- last message repeated 1 time --- May 17 21:32:14 MacBook-Pro-Marcin.local racoon[706]: IKE Packet: transmit success. (Initiator, Quick-Mode message 1). May 17 21:32:14 MacBook-Pro-Marcin.local racoon[706]: Fatal NO-PROPOSAL-CHOSEN notify messsage, Phase 1 should be deleted. May 17 21:32:14 --- last message repeated 1 time --- May 17 21:32:14 MacBook-Pro-Marcin.local racoon[706]: Message: ''. May 17 21:32:14 --- last message repeated 1 time --- May 17 21:32:14 MacBook-Pro-Marcin.local racoon[706]: IKE Packet: receive success. (Information message). May 17 21:32:17 MacBook-Pro-Marcin.local racoon[706]: IKE Packet: transmit success. (Phase 2 Retransmit). May 17 21:32:42 --- last message repeated 7 times --- May 17 21:32:42 MacBook-Pro-Marcin.local racoon[706]: IKE Packet: transmit success. (Information message). May 17 21:32:42 MacBook-Pro-Marcin.local racoon[706]: IKEv1 Information-Notice: transmit success. (R-U-THERE? ACK). /code/pre  Both VPN Tracker 8 and Apple build-in VPN client have connected status img src="https://i.stack.imgur.com/d9iRM.jpg" alt="enter image description here". However using the second one safari can't open the page because the server where the page is located isn't responding. My ifconfig logs to satisfy your request:  precode/* -ipconfig with VPN Tracker 8. VPN work great. * * * */  lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; mtu 16384     options=3&lt;RXCSUM,TXCSUM&gt;     inet6 ::1 prefixlen 128      inet 127.0.0.1 netmask 0xff000000      inet6 fe80::1%lo0 prefixlen 64 scopeid 0x1      nd6 options=1&lt;PERFORMNUD&gt; gif0: flags=8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 8192     inet 192.168.43.64 --&gt; 172.30.4.0 netmask 0xffffffff  stf0: flags=0&lt;&gt; mtu 1280 en0: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500     ether d0:a6:37:ee:7d:79      inet6 fe80::d2a6:37ff:feee:7d79%en0 prefixlen 64 scopeid 0x4      inet 192.168.0.100 netmask 0xffffff00 broadcast 192.168.0.255     nd6 options=1&lt;PERFORMNUD&gt;     media: autoselect     status: active en1: flags=8963&lt;UP,BROADCAST,SMART,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500     options=60&lt;TSO4,TSO6&gt;     ether 4a:00:00:44:18:c0      media: autoselect &lt;full-duplex&gt;     status: inactive en2: flags=8963&lt;UP,BROADCAST,SMART,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500     options=60&lt;TSO4,TSO6&gt;     ether 4a:00:00:44:18:c1      media: autoselect &lt;full-duplex&gt;     status: inactive p2p0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 2304     ether 02:a6:37:ee:7d:79      media: autoselect     status: inactive awdl0: flags=8943&lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1452     ether e2:d2:f5:14:4f:8e      inet6 fe80::e0d2:f5ff:fe14:4f8e%awdl0 prefixlen 64 scopeid 0x8      nd6 options=1&lt;PERFORMNUD&gt;     media: autoselect     status: active bridge0: flags=8822&lt;BROADCAST,SMART,SIMPLEX,MULTICAST&gt; mtu 1500     options=63&lt;RXCSUM,TXCSUM,TSO4,TSO6&gt;     ether d2:a6:37:ee:ae:00      Configuration:         id 0:0:0:0:0:0 priority 0 hellotime 0 fwddelay 0         maxage 0 holdcnt 0 proto stp maxaddr 100 timeout 1200         root id 0:0:0:0:0:0 priority 0 ifcost 0 port 0         ipfilter disabled flags 0x2     member: en1 flags=3&lt;LEARNING,DISCOVER&gt;             ifmaxaddr 0 port 5 priority 0 path cost 0     member: en2 flags=3&lt;LEARNING,DISCOVER&gt;             ifmaxaddr 0 port 6 priority 0 path cost 0     nd6 options=1&lt;PERFORMNUD&gt;     media: &lt;unknown type&gt;     status: inactive  /* -ipconfig with Apple built-in VPN client. VPN does not work. * * * */  lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; mtu 16384     options=3&lt;RXCSUM,TXCSUM&gt;     inet6 ::1 prefixlen 128      inet 127.0.0.1 netmask 0xff000000      inet6 fe80::1%lo0 prefixlen 64 scopeid 0x1      nd6 options=1&lt;PERFORMNUD&gt; gif0: flags=8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1280 stf0: flags=0&lt;&gt; mtu 1280 en0: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500     ether d0:a6:37:ee:7d:79      inet6 fe80::d2a6:37ff:feee:7d79%en0 prefixlen 64 scopeid 0x4      inet 192.168.0.100 netmask 0xffffff00 broadcast 192.168.0.255     nd6 options=1&lt;PERFORMNUD&gt;     media: autoselect     status: active en1: flags=8963&lt;UP,BROADCAST,SMART,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500     options=60&lt;TSO4,TSO6&gt;     ether 4a:00:00:44:18:c0      media: autoselect &lt;full-duplex&gt;     status: inactive en2: flags=8963&lt;UP,BROADCAST,SMART,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500     options=60&lt;TSO4,TSO6&gt;     ether 4a:00:00:44:18:c1      media: autoselect &lt;full-duplex&gt;     status: inactive p2p0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 2304     ether 02:a6:37:ee:7d:79      media: autoselect     status: inactive awdl0: flags=8943&lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1452     ether e2:d2:f5:14:4f:8e      inet6 fe80::e0d2:f5ff:fe14:4f8e%awdl0 prefixlen 64 scopeid 0x8      nd6 options=1&lt;PERFORMNUD&gt;     media: autoselect     status: active bridge0: flags=8822&lt;BROADCAST,SMART,SIMPLEX,MULTICAST&gt; mtu 1500     options=63&lt;RXCSUM,TXCSUM,TSO4,TSO6&gt;     ether d2:a6:37:ee:ae:00      Configuration:         id 0:0:0:0:0:0 priority 0 hellotime 0 fwddelay 0         maxage 0 holdcnt 0 proto stp maxaddr 100 timeout 1200         root id 0:0:0:0:0:0 priority 0 ifcost 0 port 0         ipfilter disabled flags 0x2     member: en1 flags=3&lt;LEARNING,DISCOVER&gt;             ifmaxaddr 0 port 5 priority 0 path cost 0     member: en2 flags=3&lt;LEARNING,DISCOVER&gt;             ifmaxaddr 0 port 6 priority 0 path cost 0     nd6 options=1&lt;PERFORMNUD&gt;     media: &lt;unknown type&gt;     status: inactive utun0: flags=8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1280     inet 192.168.43.120 --&gt; 192.168.43.120 netmask 0xffffffff /code/pre  <answer188395> Your problem might be a basic MacOS X network configuration one. Most probably if you are using the infamous codeAutomatic/code network configuration.  So as to clarify this point could you please make two codeifconfig -a/code.  ol liOne when your working VPN is built with VPN Tracker 8./li liOne emafter/em your VPN failed with the Apple client configured for a Cisco IPSEC kind of VPN: img src="https://i.stack.imgur.com/XN8Vz.png" alt="VPN Cisco step 1"/li /ol  Then check that you place your newly created VPN interface on the top of the set of interfaces configured so as to maintain the use of the tunnel as long as it is up: img src="https://i.stack.imgur.com/BUdze.png" alt="VPN Cisco stop 2.1"  <answer192302> I found solution. It's working now.  I changed my DNS settings to use Google Public DNS in VPN(IPSec) preferences.  <comment222105> The error message "NO-PROPOSAL-CHOSEN" during phase 2 tells that your client (Mac) and your IPsec server didn't find any agreeing encryption algorithm. Could you improve your question by indicating which "Encryption:" you choosed on building your Mac's network configuration? <comment222363> Hi Daniel. Thank you for your response. My wi-fi home network is secured by WPA2-PSK  security protocol with AES encryption. If you need I could post here generated raccoon config files or working config file from VPN Tracker 8. <comment222364> Your problem is between the Apple VPN client configuration and your IPsec server, not within your Wi-Fi and neither within VPN Tracker 8. Hence you could get a correct help by providing your Apple VPN client configuration. Could you also include what is the IPsec server you are connecting to? <comment222398> Here you can get dynamically generated raccoon config file http://pastebin.com/i0knr8rY . I put two screenshots from working VPN Tracker configuration here https://app.box.com/s/e4gdji5aqlag6e7t178p55y0vkh632me https://app.box.com/s/kk52162wa03o96btuu9fu993wx87dv09 <comment222402> Since your question is about the Apple built-in VPN client, please include within your original question the screen capture of its configuration. <comment222415> If I understand correctly Cisco IPSec VPN client built into OS X Yosemite  based on raccoon() from the KAME project. What the OS X IPSec GUI does is dynamically generate raccoon config files and invoke the raccoon binary as root for you when you click connect. If I am wrong show me where I can find configuration based on Apple build-in VPN client. TL-DR: racoon = build-in VPN client. <comment222933> Could you please put the useful information within your original question with the help of the **[edit]** button. The comments shouldn't be used to carry key details of the original question. <comment223118> I have to clarify one thing. Both VPN Tracker 8 and Apple build-in VPN client have connected status  ( https://app.box.com/s/jy6so8cvzh4cmu0r6h49657xow3xblhj ). However using the second one safari can't open the page because the server where the page is located isn't responding. My ifconfig logs to satisfy your request http://pastebin.com/ZvHn4a7F . <comment223455> This clarification is pretty usefull and may avoid any other reader to give you irrelevant advice. I suggest you to add this key detail __within__ your original question. Comments are there just to comment and their fate is the trash. <comment223457> Did you read this very similar question: http://apple.stackexchange.com/q/3429/22003 (closed because of lack of sufficient information). <comment223472> You are having problems connecting to a server but you make no mention of that server in your question. What is the configuration on the server? What is the configuration on the client? <comment223585> Didnt help. Sorry. <comment223640> Please compare your screen capture with the one I provided. You will notice that your VPN connection isn't on the top of the set of interfaces configured. Hence your network traffic is routed through Wi-Fi i.e. through IP and not IPsec. <comment223694> You are right Daniel. Initial connfiguration on the screen above isn't correct. I changed that the way you  adviced. Didn't help. <comment223715> Please correct it fully. Comments won't stay. Key details shouldn't be in the comments. <comment223720> Please describe within your OQ what exactly doesn't work. "Doesn't work" is a popular but poor expression which desserve little help. In fact in this case your VPN is up and running (`utun0` `UP` flag). <comment242067> I think you didn't notice 2 key points in my proposed answer : `↵` 1. you are using the `Automatic` configuration which isn't suited for people who want to understand and fix connection problems, `↵` 2. your interfaces are in the wrong order to achieve the use of your VPN interface **first**.