Why is Terminal.app corrupting my tcsh history? <body> I've had an ongoing problem that appears to be specific to OS X and Terminal.app: periodically, I get garbage in my tcsh history that looks like this:  precode^[[1m^[[4mcomputername:~/Code/emacs-source ( 1827 ) $^[[0m^[[24m logout /code/pre  Somehow my prompt (including markup control characters) is getting stored as part of the command history. In my .history file, the corrupt commands are repeated with the same command number:  precode#+1391563259 [1m[4mcomputername:~/Code/emacs-source ( 1827 ) $[0m[24m #+1391563259 Use "logout" to logout. #+1391563259 [1m[4mcomputername:~/Code/emacs-source ( 1827 ) $[0m[24m logout  /code/pre  This seems to be a result of closing Terminal.app windows and tabs, but I'm not sure why. To fix it -- since I have history merging enabled -- I've had to resort to closing all tcsh sessions and removing the corrupt commands from .history. Is there some way to prevent this from happening in the first place?  <answer191190> Are you cutting/pasting commands and picking up some of your prompt by accident?   It's not quite the answer you're looking for but throw strongemsed -i.bak -e "s/\x1b[[0-9;]{1,5}m//g" .history/em/strong into your .logout or cron it and you shouldn't have to clean it manually again.  <answer191328> I'd forgotten about this issue, but here's an update. The tcsh savehist merge feature is not atomic, so closing multiple sessions simultaneously can lead to history file corruption:  https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=632892  I don't know if this has been fixed or will be fixed; I finally got fed up of this and other tcsh issues and switched to bash.  <comment140268> this is not a concrete solution, but did you consider switching to iTerm2?