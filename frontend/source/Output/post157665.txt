iTunes: Move files off a network drive <body> I have somehow screwed up my iTunes database such that codeiTunes/iTunes Music Library.xml/code contains network paths:  precode&lt;key&gt;Location&lt;/key&gt;&lt;string&gt;file://localhost/Volumes/media/Music/iTunes/iTunes%20Media/Music/Unknown%20Artist/Unknown%20Album...&lt;/string&gt; /code/pre  emMost/em of the files are where they belong, in codefile://localhost/Users/Shared/.../code, but not all. Furthermore, all of the files emare/em located on the local disk, e.g. code/Volumes/media/Music/iTunes/iTunes Media/Music/Artis/Album/Track.mp3/code has been copied into the local directory code/Users/Shared/Music/iTunes/iTunes Media/Music/Artis/Album/Track.mp3/code.  I used strongFile/strong  strongLibrary/strong  strongOrganize Library.../strong, and enabled the strongConsolidate files/strong checkbox (along with strongReorganize files in the folder "iTunes Media"/strong), but this did not move all of the network-located files onto the local disk.  codeiTunes/iTunes Music Library.xml/code itself appears to be a write-only file, based off the contents of the binary file codeiTunes/iTunes Library.itl/code, so closing iTunes, editing codeiTunes/iTunes Music Library.xml/code to correct the paths, and restarting iTunes doesn't fix the issue.  Is there a way to update the iTunes database so that it uses local file paths instead of network paths for some of the files? (This impacts 9888 entries out of 11449 entries within iTunes.)  hr  I have a similar/identical issue with strongiPhoto/strong, in which some files are network located, and some aren't, and I don't know how to consolidate them to all be on the local machine...  <answer157670> strongReset the iTunes Library/strong  Open the iTunes music folder in Finder ( it’s in your home folder / Music / iTunes) and drag iTunes Music Library.xml and iTunes Library.itl out on the desktop. This will reset iTunes next time you start it, but don’t start it yet. We’ll be working on the xml file, while the itl file is just there for backup.  strongChange the location of where iTunes keeps the music/strong  In the iTunes preferences  Advanced, click on “change” next to the “iTunes music folder location”, and select your hard disk.  strongLook inside iTunes Library to see what the problem is/strong  If your iTunes library is huge, it’s a good idea to use Terminal to look at the first few lines, which you can do easily with     codehead -n100 /Users/ME/Desktop/iTunes\ Music\ Library.xml/code   (you can just type “head -n100 ” and drag the file onto Terminal to let OS X type out the name for you) The output will be something along the lines of   precode  &lt;?xml version="1.0" encoding="UTF-8"?&gt;     &lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;     &lt;plist version="1.0"&gt;     &lt;dict&gt;       &lt;key&gt;Major Version&lt;/key&gt;&lt;integer&gt;1&lt;/integer&gt;       &lt;key&gt;Minor Version&lt;/key&gt;&lt;integer&gt;1&lt;/integer&gt;       &lt;key&gt;Date&lt;/key&gt;&lt;date&gt;2012-08-13T21:09:21Z&lt;/date&gt;       &lt;key&gt;Application Version&lt;/key&gt;&lt;string&gt;10.6.3&lt;/string&gt;       &lt;key&gt;Features&lt;/key&gt;&lt;integer&gt;5&lt;/integer&gt;       &lt;key&gt;Music Folder&lt;/key&gt;&lt;string&gt;file://localhost/Volumes/HD1T/Music/&lt;/string&gt;       &lt;key&gt;Library Persistent ID&lt;/key&gt;&lt;string&gt;C326B89DCF4457DF&lt;/string&gt;       &lt;key&gt;Tracks&lt;/key&gt;       &lt;dict&gt;           &lt;key&gt;41557&lt;/key&gt;           &lt;dict&gt;               &lt;key&gt;Track ID&lt;/key&gt;&lt;integer&gt;41557&lt;/integer&gt;               &lt;key&gt;Name&lt;/key&gt;&lt;string&gt;Fifths (Jazzanova 6 Sickth Mix)&lt;/string&gt;               &lt;key&gt;Artist&lt;/key&gt;&lt;string&gt;Ski&lt;/string&gt;               &lt;key&gt;Album&lt;/key&gt;&lt;string&gt;Jazzanova: The Remixes, 1997-2000&lt;/string&gt;               &lt;key&gt;Grouping&lt;/key&gt;&lt;string&gt;where:de&lt;/string&gt;               &lt;key&gt;Genre&lt;/key&gt;&lt;string&gt;ambient-synth-90s&lt;/string&gt;               &lt;key&gt;Kind&lt;/key&gt;&lt;string&gt;MPEG audio file&lt;/string&gt;               &lt;key&gt;Size&lt;/key&gt;&lt;integer&gt;19718194&lt;/integer&gt;               &lt;key&gt;Total Time&lt;/key&gt;&lt;integer&gt;482925&lt;/integer&gt;               &lt;key&gt;Disc Number&lt;/key&gt;&lt;integer&gt;2&lt;/integer&gt;               &lt;key&gt;Disc Count&lt;/key&gt;&lt;integer&gt;2&lt;/integer&gt;               &lt;key&gt;Track Number&lt;/key&gt;&lt;integer&gt;1&lt;/integer&gt;               &lt;key&gt;Track Count&lt;/key&gt;&lt;integer&gt;10&lt;/integer&gt;               &lt;key&gt;Year&lt;/key&gt;&lt;integer&gt;2000&lt;/integer&gt;               &lt;key&gt;Date Modified&lt;/key&gt;&lt;date&gt;2008-12-05T14:26:06Z&lt;/date&gt;               &lt;key&gt;Date Added&lt;/key&gt;&lt;date&gt;2012-07-14T07:42:37Z&lt;/date&gt;               &lt;key&gt;Bit Rate&lt;/key&gt;&lt;integer&gt;320&lt;/integer&gt;               &lt;key&gt;Sample Rate&lt;/key&gt;&lt;integer&gt;44100&lt;/integer&gt;               &lt;key&gt;Play Count&lt;/key&gt;&lt;integer&gt;12&lt;/integer&gt;               &lt;key&gt;Play Date&lt;/key&gt;&lt;integer&gt;3321087305&lt;/integer&gt;               &lt;key&gt;Play Date UTC&lt;/key&gt;&lt;date&gt;2009-03-28T10:15:05Z&lt;/date&gt;               &lt;key&gt;Rating&lt;/key&gt;&lt;integer&gt;80&lt;/integer&gt;               &lt;key&gt;Album Rating&lt;/key&gt;&lt;integer&gt;80&lt;/integer&gt;               &lt;key&gt;Album Rating Computed&lt;/key&gt;&lt;true/&gt;               &lt;key&gt;Artwork Count&lt;/key&gt;&lt;integer&gt;1&lt;/integer&gt;               &lt;key&gt;Persistent ID&lt;/key&gt;&lt;string&gt;E5B52C3DE807B7DC&lt;/string&gt;               &lt;key&gt;Track Type&lt;/key&gt;&lt;string&gt;File&lt;/string&gt;               &lt;key&gt;File Type&lt;/key&gt;&lt;integer&gt;1297106739&lt;/integer&gt;               &lt;key&gt;Location&lt;/key&gt;&lt;string&gt;file://localhost/Users/ME/Music/iTunes/iTunes%20Media/Music/Ski/Jazzanova_%20The%20Remixes,%201997-2000/Fifths%20(Jazzanova%206%20Sickth%20Mix).mp3&lt;/string&gt; /code/pre   You need to look out for the file:// bit of the xml. Here it is telling me that it is looking into /Users/ME/Music/, i.e. my home folder instead of my external hard disk.  strongUse sed to fix the path and create a new xml file/strong  sed is a nifty unix utility which you can use from Terminal. It can open a file, go through it line by line, change things on each line, and then put the result in another file.    precodesed 's/file:\/\/localhost\/Users\/ME\/Music\/iTunes\/iTunes%20Media\//file:\/\/localhost\/Volumes\/HD1T\//'  &lt; /Users/ME/Desktop/iTunes\ Music\ Library.xml  &gt; /Users/ME/Music/iTunes/iTunes\ Music\ Library.xml /code/pre   Here’s a breakdown of what the command does.  codesed/code calls the sed command - it stands for Stream Editor    code’s/…/…./’/code sed will itself need instructions, which are strings hence the ’ (apostrophe). s/a/b/ means “if you find an a, substitue it with b”    codefile:\/\/localhost\/Users\/ME…/code this is the string we are looking for. Note that given that forward slashes are used by sed for s/…/…/, if you need them in the string you have to escape them with backward slashes    codefile:\/\/localhost\/Volumes\/HD1T\//code the string we are replacing with    code&lt; /Users/ME/Desktop/iTunes\ Music\ Library.xml/code The less than sign means “use this file as input” - in this case, the xml file I had dragged to the Desktop    code&gt;  /Users/ME/Music/iTunes/iTunes\ Music\ Library.xml/code and this means “create this file as output”. We are asking sed to recreate the xml library file from the one on the desktop, but changing some bits around as it does so    strongCreate a broken iTunes library/strong    Now this is important - if you just start iTunes now, with the new .xml file there and no .itl file there, nothing will happen. iTunes will ignore the xml file, and just reset to an empty library. But if iTunes finds a broken .itl file, it will use the .xml file we just fiddled with to recreate the .itl file. The easiest way to create a broken .itl file is from terminal:     codetouch ~/Music/iTunes/iTunes\ Library.itl/code     which will create an empty file - broken enough for iTunes.  strongRestart iTunes/strong  Now iTunes will finally pay attention to the xml file - it will show a dialog saying ‘Importing ‘iTunes Music Library.xml’…” This may take a while, even though it isn’t actually copying mp3 files around.  emSource:/em http://gotofritz.net/blog/howto/fixing-itunes-cannot-find-music/  <answer157736> I haven't tried the much better sounding answer by @Tesujin. I'm certain his is emmuch/em faster than what I did do.  This "solution" worked for me. It emalso/em consumes lots of disk space. However, as an added "benefit," it found several files which were overlooked...  ol liClick strongiTunes/strong  strongPreferences.../strong/li liClick the strongAdvanced/strong tab./li liChange the iTunes Media Folder location, e.g. to another disk. Something with a path name that won't be too similar to the current path, to make stronggrep/strong(1) easier later./li liClick strongOK/strong, and dismiss the Preferences window./li liClick strongFile/strong  strongLibrary/strong  strongOrganize Library.../strong, enabled the strongConsolidate files/strong checkbox, and click strongOK/strong.  This will result in emcopying/em over your library into the new location, "fixing up" the paths as it goes. This in turn means you need enough free disk space to store two complete copies of your music library./li liQuit iTunes./li liVerify the contents of codeiTunes/iTunes Music Library.xml/code, by grepping that it doesn't contain the previous path(s):  precode$ grep Users/Shared 'iTunes Music Library.xml' $ grep Volumes/media 'iTunes Music Library.xml' /code/pre  What you emwant/em is emno matches/em. What I actually emgot/em was several matches; the network mount was still being used for ~10 files, while the previous location had ~5 matches./li /ol  At this point, more investigation was warranted. As It Turns Out™, my network share had a case-sensitive filesystem, so the files which weren't copied were because of case changes, e.g. the song was actually in 'ArTist/Album/Song.mp3' while there was also an 'Artist/Album/Another Song.mp3' file; iTunes apparently doesn't like artists/albums which differ only in case, and there were ~10 of these.  Fixing these remaining issues was simple, if weird:  ol liFind the source file in Finder. (This may require copying the file via root shell on the NAS... ;-)/li liFind the "bad" entry within iTunes./li listrongFile/strong  strongGet Info/strong the entry./li liiTunes may complain that it can't find the file. Refer iTunes to the file in (1)./li liGo to the strongFile/strong tab, and double-check the stronglocation/strong entry. For example, the location was on my NAS./li liClick strongOK/strong/li liDrag the file in (1) onto iTunes. iTunes will now emcopy/em the file, thus removing the need for my NAS for this particular file./li liVerify that the location is fixed via (4) and (5)./li /ol  What's funny is that if I emskipped/em the initial steps (2)-(5), iTunes would copy the file but there would be emtwo/em of the songs within iTunes, one on the NAS/wrong location, and one just added. I needed to strongGet Info/strong the file emfirst/em in order to "update" the file location.  <comment185397> I found the method below, which seems to nicely get around the 'ignore it or dupe all the darn data' issues with other methods I've seen. I haven't tested it myself but it looks sound. It also looks like it will preserve all other data, playlists etc, but let me know in comments if it loses anything & I'll add it to the answer, for further reference. Needless to say, backups are recommended. <comment185408> Brilliant! My google-fu never found that blog article :-(, and it never occurred to me to create an *invalid* `.itl` file...  Meanwhile, while attempting to fix this I used iTunes Preferences to move the directory to another disk, then re-ran **File**  **Library**  **Organize Library...**. It's still ongoing, and requires lots of space; I'll report back if that works.  I'll need to try the "invalid .itl file" trick with iPhoto. <comment185410> Me neither - I shall be trying this method next time I update my windows iTunes, which shares the same library location as the Mac, but is never quite in sync, so periodically I have to go through all the grep/replace/import palaver. This looks a lot better option. In fact, no time like the present - will report back... <comment185421> Last time I tried this process, by find/replace the paths then manually importing to iTunes, it took about 8 hours. This method just took about 15 minutes for approx 6k tracks, including that it went back through 'gapless playback info' & 'audio volume' routines, though it did slow down a lot at about 5k tracks. It lost some artwork, too, but that was easily put right. Checked & unchecked survived, as did playlists, play count & star rating, but date added was all updated to today. Overall, not a bad effort.