Resizing or expanding a CoreStorage volume <body> I bought a new SSD with 750 GB and made two partitions: 600 GB and 150 GB. The smaller one was thought to be a Bootcamp partition one day, but to date it was just another unused partition. When I needed more space, I decided to merge these two partitions. The partition was created with Mavericks, the merge was done with Yosemite.  I opened Disk Utility and the "minus" button. Disk Utility told me both partitions would be merged then. However it miserably failed. My main hard disc suddenly had errors which couldn't be repaired and even two of my other external hard discs could not be mounted any longer.  I eventually restored the hard disc from Time Machine, which worked well.  My second partition is now listed as free:  img src="https://i.stack.imgur.com/wcXH9.png" alt="Disk Utility"  Unfortunately I can't resize the 600 GB partition nor can I create a new partition using the free space.  Diskutil reveils the following:  precode~  diskutil list /dev/disk0    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                        *750.2 GB   disk0    1:                        EFI EFI                     209.7 MB   disk0s1    2:          Apple_CoreStorage                         599.6 GB   disk0s2    3:                 Apple_Boot Recovery HD             650.0 MB   disk0s3 /dev/disk1    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                  Apple_HFS Macintosh HD           *599.3 GB   disk1                                  Logical Volume on disk0s2                                  XXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX                                  Unencrypted /code/pre  Also diskutil brought up this:  precode~  diskutil cs list CoreStorage logical volume groups (1 found) | +-- Logical Volume Group 9D2BA4BA-xxxx-xxxx-xxxx-xxxxxxxxxxxx     =========================================================     Name:         Macintosh HD     Status:       Online     Size:         599640592384 B (599.6 GB)     Free Space:   6111232 B (6.1 MB)     |     +-&lt; Physical Volume 29A9A02B-xxxx-xxxx-xxxx-xxxxxxxxxxxx     |   ----------------------------------------------------     |   Index:    0     |   Disk:     disk0s2     |   Status:   Online     |   Size:     599640592384 B (599.6 GB)     |     +-&gt; Logical Volume Family 2FA7892F-xxxx-xxxx-xxxx-xxxxxxxxxxxx         ----------------------------------------------------------         Encryption Status:       Unlocked         Encryption Type:         None         Conversion Status:       NoConversion         Conversion Direction:    -none-         Has Encrypted Extents:   No         Fully Secure:            No         Passphrase Required:     No         |         +-&gt; Logical Volume 7BF42B7B-xxxx-xxxx-xxxx-xxxxxxxxxxxx             ---------------------------------------------------             Disk:                  disk1             Status:                Online             Size (Total):          599282155520 B (599.3 GB)             Conversion Progress:   -none-             Revertible:            No             LV Name:               Macintosh HD             Volume Name:           Macintosh HD             Content Hint:          Apple_HFS /code/pre  I have tried this:  ul liReclaim Delete freespace Partition after Yosemite removal/li lifsck -fy (The volume Macintosh HD appears to be OK.)/li /ul  but it wouldn't help. It said I couldn't recover because it wasn't created in a way it would support (sorry for missing the exact message).  I then have learned that Apple_CoreStorage might indicate my disk is encrypted, which might explain why I can't resize it. It doesn't explain why I can't create a new partition to me.  What are my options to make my hard disk available in a single partition with size 750 GB?   <answer154969> The following codediskutil cs resizeStack/code command is vastly undocumented and as such potentially destructive. There might be an easy way outlined first and a long winding, time consuming hard way.  emstrongPlease backup your Mac OS X before proceeding./strong/em  strongThe not-as-long-as-expected way:/strong    A 2nd computer or an iPhone with the stackexchange credentials to enter the site or the chat is usefull.  Your Mac OS X partition (Macintosh HD) visible on the desktop is equivalent to the codeLogical Volume 7BF42B7B-xxxx-xxxx-xxxx-xxxxxxxxxxxx/code.   ol liFirst you have to backup your Recovery HD: Start Terminal.app and enterbr codedefaults write com.apple.DiskUtility DUDebugMenuEnabled 1/code press enter and quit codeTerminal.app/code/li liStart Disk Utility and enable 'Show every Partition' in the Debug menu After a few seconds all partitions should be visible/li liChoose 'Recovery HD' on the left side and mount the partition 'Recovery HD'  img src="https://i.stack.imgur.com/wmmJd.jpg" alt="screen1"/li liVerify the disk  img src="https://i.stack.imgur.com/gC55Q.jpg" alt="screen2"/li liCreate a disk image of 'Recovery HD' and save it read-only externally  img src="https://i.stack.imgur.com/hu6yb.jpg" alt="screen3"/li liCheck the disk image for restore  img src="https://i.stack.imgur.com/lGSwG.jpg" alt="screen4"/li liDetach all external drives/li liRestart into codeInternet Recovery Mode/code by pressing kbdalt/kbdkbdcmd/kbdkbdR/kbdbr or a bootable Mavericks or Yosemite Thumb Drive (full system or install)./li listart codeTerminal/code from the menubar/utilities/li lienter following command at the Terminal prompt:  precodediskutil cs list /code/pre/li liCopy the Logical Volume (LV) alphanumeric UUID of your CoreStorage volume. The LVUUID should be the fourth listed. In the above example the alphanumeric is:br 7BF42B7B-xxxx-xxxx-xxxx-xxxxxxxxxxxx./li liRun the following command:    precodediskutil cs resizeStack LVUUID partsize   /code/pre  According to the number found above it would be:    precodediskutil cs resizeStack 7BF42B7B-xxxx-xxxx-xxxx-xxxxxxxxxxxx 0g   /code/pre  This will hopefully expand your CoreStorage volume to the full 750 GB.. Depending on your disk this will take several seconds (SSD) or minutes (HDD). After a successful resize check with codediskutil list/code if the 'Recovery HD' still exists.br em(Previously the above command was codediskutil cs resizeStack 7BF42B7B-xxxx-xxxx-xxxx-xxxxxxxxxxxx 748g/code. After some testing we found out that codediskutil cs resizeStack 7BF42B7B-xxxx-xxxx-xxxx-xxxxxxxxxxxx 0g/code is the smarter command. It should expand the LVG to the maximal size while usually moving 'Recovery HD' to the very end of the physical disk. 0g seems like a magic number in this case.)/em/li liQuit 'Terminal.app' and start 'Disk Utility' and verify the expanded volume./li liReboot to Recovery HD and your main drive. Delete the disk image created in step 5 if everything works as expected/li /ol  strongIf that didn't work then the longer and harder way:/strong    ol start="15" lienter codediskutil list/code/li liErase the codeRecovery HD/code with codediskutil eraseVolume Free\ Space %noformat% IDENTIFIER_Recovery_HD/code.br In your example: codediskutil eraseVolume Free\ Space %noformat% disk0s3/code/li lienter following command at the Terminal prompt:      diskutil cs list/li liCopy the Logical Volume (LV) alphanumeric UUID of your CoreStorage volume. The LVUUID should be the fourth listed. In the above example the alphanumeric is:br 7BF42B7B-xxxx-xxxx-xxxx-xxxxxxxxxxxx./li liRun the following command:br     diskutil cs resizeStack LVUUID partsize    According to the number found above it would be:    precodediskutil cs resizeStack 7BF42B7B-xxxx-xxxx-xxxx-xxxxxxxxxxxx 748g   /code/pre  This will hopefully expand your CoreStorage volume to almost full 748 GB (i have left some space for a future codeRecovery HD/code./li liBuild a partition for codeRecovery HD/code if necessary/li liRebuild codeRecovery HD/code if necessarybr (work in progress: tested in Parallels but i can't restart in to recovery mode due to limitations of Parallels probably and the partition is always visible. Seems like the Apple Script at musings.silvertooth.us doesn't work with Yosemite/CoreStorage. I'm investigating that)/li /ol  strongPlease check back in the comments (or maybe chat) if you run into problems/strong  <answer167523> I am astonished about complexity of this problem (see @klanomath answer) and easiness to create it.  That's why I tried to play with it and found a work around.  ol liMy problem was the following: I had 500GB-disk. I created 150GB-Macintosh-HD partition on this disk using Disk Utility, leaving 350GB as a "free space". When I tried to format the free space into second partition I failed to do it: when I pressed Apply it ignored my command and behaved like I never pressed "Apply" (when I wanted to close the Disk Utility window it warned me that there are unapplied changes)./li liI took the first volume (that is formatted volume named Macintosh HD, it had 150GB size) and asked Disk Utility to strongpartition it into two partitions: 100GB + 50GB. Pressed "Apply" and magically Disk Utility created for me two partitions: 100GB + 400GB/strong. At this point all space on disk become useful and I was quite happy with it./li liThen I simply removed second partition, pressing "-" and "Apply". As result it was merged with Macintosh HD and I returned back to were I was before step 1./li liFinally, I divided it into two partitions with the sizes 150GB and 350GB as I wanted at the start. Now the problem seems to be solved./li /ol  <answer174257> I tried everything from apple.stackexchange and other blogs but none worked. But this method worked like charm:  ol liMake a bootable Windows USB using bootcamp./li liDo not partition or download support files./li liRestart your comp holding "option" key./li liOpen Windows partition and keep clicking next until you have to choose to format a disk./li liChoose the block with the "freespace" memory i.e. unallocated space./li liClick on "new" in the installation window and the click on "format"/li liYou will get an error that is completely fine./li liQuit the installation and restart to Mac./li liNow that "freespace" is "windows NTFS" format./li liClick on "-" symbol and voila. It's restored back to your Full HDD./li /ol  <answer176557> After gaining some experience with CoreStorage volumes, I reworked my first answer to generalize and facilitate it by adding some scenarios and deleting some dispensable steps.   Basically there is one undocumented command to resize or expand a CoreStorage volume group and an inherent logical volume:  precodediskutil cs resizeStack LVUUID size   /code/pre  The command expands or shrinks the whole CoreStorage Volume Group including the physical volume(s), the logical volume family and the logical volume in one step to the desired size.  While shrinking it down to the size of the occupied space in the logical volume shouldn't be problem at all (but not recommended because at least 10% free space should be left), any blocking partition except the recovery partition has to be deleted or diminished before expanding the CoreStorage stack.  The command comes in handy in several scenarios:  ul liexpanding a CoreStorage volume after deleting a 2nd old-style JHFS+ volume on the same device (this may happen after splitting your disk in two partitions in Mavericks and then updating to Yosemite. The first partition - your system volume - might be converted to a CoreStorage volume, while the 2nd volume is left alone.)/li /ul  img src="https://i.stack.imgur.com/htRKU.png" alt="enter image description here"  ul liexpanding a CoreStorage volume after manually deleting a Boot Camp NTFS volume/li /ul  img src="https://i.stack.imgur.com/4eD30.png" alt="enter image description here"  ul liresizing a CoreStorage volume to create 2nd old-style JHFS+ volume on the same device/li /ul  img src="https://i.stack.imgur.com/duI2h.png" alt="enter image description here"  emBeware: The command is vastly undocumented and as such potentially destructive./em  strongPreparation:/strong    ul liBackup your data./li liDetach any external drive (especially your external Time Machine backup drive)./li liRestart to Internet Recovery Mode by pressing kbdalt/kbd kbdcmd/kbd kbdR/kbd at startup.br The prerequisites are the latest firmware update installed, either ethernet or WLAN (WPA/WPA2) and a router with DHCP activated.br On a 50 Mbps-line it takes about 4 min (presenting a small animated globe) to boot to a recovery netboot image which usually is loaded from an apple/akamai server.  I recommend ethernet because it's more reliable. If you are restricted to WIFI and the boot process fails, just restart your Mac until you succeed booting.  Alternatively you may start from a bootable installer thumb drive (Mavericks or Yosemite) or a thumb drive containing a full system (Mavericks or Yosemite)./li /ul  strongModify CoreStorage stack:/strong  ul liOpen in the menubar Utilities/Terminal/li /ul  First you should get an overview of your disks and the partition layout:  ul liEnter codediskutil list/codebr Example listing:  precode/dev/disk0    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                        *68.7 GB    disk0    1:                        EFI EFI                    209.7 MB    disk0s1    2:          Apple_CoreStorage                         53.7 GB    disk0s2    3:                 Apple_Boot Recovery HD            650.0 MB    disk0s3    4:                        EFI No Name EFI            100.0 MB    disk0s4 /dev/disk1    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:     Apple_partition_scheme                         *1.3 GB    disk1    1:        Apple_partition_map                         30.7 KB    disk1s1    2:                  Apple_HFS OS X Base System        *1.3 GB    disk1s2 /dev/disk2    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                  Apple_HFS System                 *53.5 GB    disk2 /dev/disk3-disk12 ...belong to the OS X Base System (your recovery system you booted to previously) /code/pre  Disk0 is your main internal disk device containing the EFI-partition (dis0s1), the CoreStorage partition (disk0s2) and the Recovery HD (disk0s3). The No Name EFI (disk0s4) only exists if you had a Boot Camp partition previously and deleted it manually.    Disk1 is a logical disk created by booting to the netboot image which contains a recovery system (OS X Base System = disk1s2) similar to the Recovery HD.    Disk2 is also a logical disk residing in disk0s2 and it contains the CoreStorage stack./li liEnter codegpt -r -vv show /dev/disk0/codebr Example listing:  precodegpt show: /dev/disk0: mediasize=68719476736; sectorsize=512; blocks=134217728 gpt show: /dev/disk0: PMBR at sector 0 gpt show: /dev/disk0: Pri GPT at sector 1 gpt show: /dev/disk0: Sec GPT at sector 134217727       start       size  index  contents           0          1         PMBR           1          1         Pri GPT header           2         32         Pri GPT table          34          6                   40     409600      1  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B      409640  104974016      2  GPT part - 53746F72-6167-11AA-AA11-00306543ECAC   105383656    1269536      3  GPT part - 426F6F74-0000-11AA-AA11-00306543ECAC   106653192     204800      4  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B   106857992   27359703            134217695         32         Sec GPT table   134217727          1         Sec GPT header /code/pre  The partition with the index number 1 is the regular EFI-partition, the partition with index number 2 is your CoreStorage partition and the partition with index number 3 is your Recovery HD.br The partition with index number 4 (=No Name EFI) only exists if you had a Boot Camp partition previously and deleted it manually. All the rest is unallocated free space (in the example 27359703 blocks à 512 B)./li liEnter codediskutil cs list/codebr Example listing:  precode  CoreStorage logical volume groups (1 found) | +-- Logical Volume Group A629E051-D7B0-4B8C-A803-074F62704636     =========================================================     Name:         System     Status:       Online     Size:         53946696192 B (53.9 GB)     Free Space:   16777216 B (16.8 MB)     |     +-&lt; Physical Volume 90C09FC0-4215-4871-901B-70E2C9C7D464     |   ----------------------------------------------------     |   Index:    0     |   Disk:     disk0s2     |   Status:   Online     |   Size:     53946696192 B (53.9 GB)     |     +-&gt; Logical Volume Family F6962E38-50E4-4458-BFE6-CF2E179352F5         ----------------------------------------------------------         Encryption Status:       Unlocked         Encryption Type:         None         Conversion Status:       NoConversion         Conversion Direction:    -none-         Has Encrypted Extents:   No         Fully Secure:            No         Passphrase Required:     No         |         +-&gt; Logical Volume BD36C73D-860D-4DC6-B125-AD624F448B88             ---------------------------------------------------             Disk:                  disk2             Status:                Online             Size (Total):          53496696192 B (53.5 GB)             Conversion Progress:   -none-             Revertible:            Yes (no decryption required)             LV Name:               System             Volume Name:           System             Content Hint:          Apple_HFS /code/pre/li lito resize the CoreStorage volume you have to delete any blocking partition first (the Recovery HD doesn't count because it usually will be moved with the resizeStack command).br First you have to unmount all mounted volumes on disk0 (first the CoreStorage volume, which has its own disk identifier disk2 but resides on disk0, then all other mounted volumes on disk0 - check this with codedf/code):  precodediskutil unmountDisk /dev/disk2 /code/pre  then additional volumes (if you have any at all). Example:  precodediskutil unmount /dev/disk0s5  /code/pre  If you have a NoName EFI partition delete it by entering:  precodegpt remove -i 4 disk0 /code/pre/li liRemount any previously unmounted volume in the reverse order with  precodediskutil mount /dev/disk0s5 diskutil mount /dev/disk2  /code/pre/li liSince any blocking partition is deleted you may now resize the CoreStorage volume with    precodediskutil cs resizeStack LVUUID size  /code/pre  with LVUUID: UUID of the logical volume and size: the final size of your CoreStorage volume.br Examples:    precodediskutil cs resizeStack BD36C73D-860D-4DC6-B125-AD624F448B88 60g   /code/pre  to expand it to 60 GB    precodediskutil cs resizeStack BD36C73D-860D-4DC6-B125-AD624F448B88 40g   /code/pre  to shrink it to 40 GB    precodediskutil cs resizeStack BD36C73D-860D-4DC6-B125-AD624F448B88 0g  /code/pre  to expand it to the full available size (0g is a magic number here).    Your Recovery HD should be moved automatically - regardless of wether shrinking or expanding the CS volume - to the very end of it./li liIn case of shrinking the CoreStorage volume you may now create a 2nd partition with gpt./li liEnter the following to get the new partition scheme:  precodegpt -r -vv show /dev/disk0 /code/pre  and  precodegpt add -b StartBlock -s NumberOfBlocks disk0 /code/pre  to create a new partition. StartBlock is the number of the first block in the unallocated space and NumberOfBlocks is the number of free blocks or smaller. NumberOfBlocks has to be dividable through 8!/li liEnter codeexit/code and quit Terminal./li liOpen Disk Utility (and format your newly created partition if you have created a new partition in the second last step)./li liThen check your expanded CoreStorage volume for errors./li liQuit Disk Utility./li liReboot to your main volume./li /ul  <answer219328> Great article!  Thanks so much for the effort you've put into this - really helped me out!  I was tracking the use case of expanding my Core Storage removing a bootcamp volume and merging it.  I found I had to unlock my core storage before I could proceed with the command  precodediskutil cs resizeStack  /code/pre  Pretty simple  precodediskutil cs unlockVolume &lt;volume ID&gt; /code/pre  where  is the same ID for your core storage in the format of 11111111-2222-3333-4444-555555555555  Also on OS X 10.11.1 I found that 0g was not a valid parameter for the resize value.  I was required to provide a specific size.  And finally, I strongly suggest you also verify and repair any errors on your core storage volume before you attempt a resize.  It's easier to address those outside of the resize process.  <answer240368> I had this problem, and I think the simplest fix is this: Click the "+" sign on the bottom of the Partition Layout, resize the second partition to what you want, and then select the format to be "Free Space".   You will see that the second partition in the layout is replaced by empty space. Then, just select "Apply".  <answer288346> I was looking for a solution to non-destructively shrink a volume in Sierra to make room for a beta install of High Sierra, and found this page very helpful.  I was using an encrypted volume HFS+ Journaled in MacOS Sierra.  Matt's advice above is very good, but I found an even quicker mechanism for this, for CoreStorage Volumes that are encrypted or not.  Start with:   Boot into the Recovery Disk on startup of machine with CMD-R  Once in recovery mode, if you have a CoreStorage Encrypted volume, open the terminal window and prepare the drive like so. Otherwise skip ahead to DiskUtility usage below.  precodediskutil cs list /code/pre  Take note of the last UUID for the Locked Volume if it exists, then.  precodediskutil cs unlockVolume UUID /code/pre  The above command should ask for the passcode which is your normal user password.  If you DO NOT HAVE an encrypted CoreStorage Volume you can start here:  Open Disk Utility from terminal or back at the menu, and use the Partition feature on the main disk container.  You should be able to use the '+' key to optionally add a partition to the available space, adjust the size to your preference, and then use 'Apply' to initiate a NON-DESTRUCTIVE, NON-ERASING shrink of your existing partition. This leaves you with your original data on the smaller partition and an empty partition in the remaining space. Just be sure to set the new partition to not overlap the indicated crosshatched data.  It will tell you that the operation does not erase existing data, and I can assure you that in my case it did not.  The usual caveats apply here anyway, you really should always backup if you can, before starting an operation of this sort.  <comment182305> Yosemite seems to do this to drives. Core Storage is a world of pain. The easy way - http://apple.stackexchange.com/questions/148645/os-x-partition-not-resizable?rq=1 The hard way - http://apple.stackexchange.com/questions/153523/resizing-dual-boot-partitions-in-yosemite?rq=1 <comment182306> please add `diskutil cs list` output to your answer. You might scramble all uuids but choose different letters for any found UUID to better distinguish them if someone happens to answer <comment182307> @klanomath Added the output of the command - thanks! <comment182308> @Tetsujin first link: i only have one partition, it's not matching. second link: i want to restore my old data, which doesn't appear to be the case here. <comment182309> the TL:DR is that Disk Utility cannot do it, needs to be command line. I hope @klanomath can help you through it - he's good at this stuff. Personally, I'm not going anywhere near Yosemite until Apple get their GUI tools in line with Core Storage. <comment182310> @Tetsujin Thanks anyway. Definitely this was the last partition i ever made. <comment182322> This looks like an awesome response. I am going to perform these commands today after work and will come back here to report the results. Thanks in advance for taking the time for this repsonse! <comment182323> We may open a chat room and i may accompany you. I'm available all day until 1.00 am UTC (or 24.00 Uhr your time ;-)) <comment182324> thats super awesome and very kind of you :) I hope I will not need further assistance, but its good to know there is a place where one can go. <comment182332> before starting anything please enter this [chat room](http://chat.stackexchange.com/rooms/18448/resizing-a-partition) <comment182341> Could Not  erase recov disk bc it was not able to in mount. Resize said not possible bc boot helper was mounted. Going to chat now <comment195562> The chat-room has long-since been archived, but I'm getting this error: ‘-69771: The target disk is too small for this operation.’ There's currently a 500gb CoreStorage volume, on a 1.0TB GPT SSD; I'm trying to expand that to 700GBs of the full 1TB (rest will be BootCamp.) <comment195571> @ELLIOTTCABLE Did you already create the bootcamp partition? <comment196480> This seemed to work for me, but upon quitting and re-opening Disk Utility, it seemed to have failed. <comment196481> @klanomath I already had a bootcamp partition, I removed it to make this process simpler. I have a backup elsewhere I'll restore once my drive is back to a working condition. Maybe we should make another SO chat? <comment196482> @ELLIOTTCABLE, for me it works after relaunching Disk Utility as well. <comment196484> @ELLIOTTCABLE did you try the '0g' option instead of 'disksize-2g' (in the above example 748g)? <comment196488> @ELLIOTTCABLE Maybe you should better ask a new question with your specific problems. Then you may edit in your partition layout or error messages. I don't even know if it is possible to revive an already closed chatroom. At the moment i'm on an iPhone but i will be back home in 2 hours and will answer your question asap <comment196489> I'm actually going to be out-of-town for a bit; everything's *working* on my machine, I just have 500gb of inaccessible space. I'll post a new question next week. 3 <comment196829> @klanomath things have progressed; I reverted it from CoreStorage, and still can't expand it: http://apple.stackexchange.com/q/167857/15184 <comment205175> Hey Also try turning off FireVault before u try the above method. <comment212734> worked for me as well. Thanks for the detailed info <comment223243> I had this exact problem and I didn't have to do any of the complex stuff above, thankfully. This was the solution for me. <comment232978> Worked for me too, extremely easier and less error prone than the solutions above. Thank you. <comment236161> Worked flawlessly. Thank you very much. <comment237136> This was also the solution for me for the same problem as OP running Yosemite 10.10.4 and removing a Windows 10 bootcamp partition. <comment237456> This worked flawlessly for me too. Thank you! <comment271908> This did not work for me.  The free space merged with the new partition as advertised, but when deleting the partition, it all reverted to unusable free space - leaving less usable space than I started with!  The accepted answer ultimately worked.