10.9 Mail "smart mailbox" doesn't filter properly <body> I have a smart mailbox setup to combine the inboxes of my 3 Gmail accounts.  It worked great in 10.8.  In Mavericks, this "smart inbox" frequently shows messages which have already been archived, and do not appear in the regular Gmail inbox within Mail.app.  This screenshot shows an example.  So Mail recognizes that the two messages are archived, yet they still show up here.  These two messages do no appear in the regular Gmail inbox within Mail.  I have already tried deleting and recreating the smart mailbox.  I show its settings below.  img src="https://i.stack.imgur.com/axDDg.jpg" alt="enter image description here"  img src="https://i.stack.imgur.com/NqNIq.jpg" alt="enter image description here"  <answer118050> Have you tried a rebuild of the mailboxes in question?  In the codeMailboxes/code list select your codeInbox/code and then select codeMailbox/code  codeRebuild/code then do the same with the codeGmail (All Mail)/code mailbox.  Rebuilding the Gmail mailboxes may take some time.  I would then quit codeMail/code and restart.  <answer157883> I had the same problem with Yosemite 10.10.1 and rebooting solved it.  <answer186650> Here are two more possible solutions.  h2Reset Permissions/h2  precodechmod -a 'everyone deny write,delete,append,writeattr,writeextattr,chown' ~/Library/Mobile\ Documents/com~apple~mail/Data/MailData/* ~/Library/Mobile\ Documents/com~apple~mail/Data/MailData/Signatures/* /code/pre  This resets permissions on email related items (you can reset permissions on everything in Disk Utility).  h2Remove Indexes/h2  precoderm -rf ~/Library/Mail/V2/MailData/Envelope* mdimport ~/Library/Mail /code/pre  This second possibility gets rid of Mail's index (Mail will rebuild it upon restart) and refreshes Spotlight with your email content.  <comment137797> I've rebuilt the inbox multiple times, but haven't tried rebuilding the All Mail nor the smart mailbox. I will try. <comment137955> Rebuilding did not fix the problem. <comment185659> Has anyone followed up on this? Did you try rebooting?