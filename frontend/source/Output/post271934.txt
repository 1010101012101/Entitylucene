Messed up hard disk Macbook <body> Some days ago, I installed Ubuntu on my MacBookPro, I created a new partition shrinking the one I was using for MacOS.   Later I decided to remove it, so I deleted the partition containing Ubuntu, but I didn't manage to resize the MacOS partition back to the start, so I booted in Recovery Mode to do that. Then I realized that my battery was going low and I closed the MacBook lid to do that in another moment.  The day after I opened my lid, I heard the Mac sound and the missing boot icon appeared.   Now if I go to Recovery Mode, I can see the hard drive but the partition with MacOS is greyed out, and I don't know how to fix this.  Here is the output of codediskutil list/code:  precode /dev/disk0    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                        *251.0 GB   disk0    1:                        EFI EFI                     209.7 MB   disk0s1    2:                  Apple_UFS                         180.8 GB   disk0s2 /dev/disk1    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:     Apple_partition_scheme                        *1.3 GB     disk1    1:        Apple_partition_map                         30.7 KB    disk1s1    2:                  Apple_HFS OS X Base System        1.3 GB     disk1s2 /dev/disk2    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            untitled               *5.2 MB     disk2 /dev/disk3    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            untitled               *524.3 KB   disk3 /dev/disk4    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            untitled               *524.3 KB   disk4 /dev/disk5    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            untitled               *524.3 KB   disk5 /dev/disk6    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            untitled               *524.3 KB   disk6 /dev/disk7    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            untitled               *524.3 KB   disk7 /dev/disk8    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            untitled               *6.3 MB     disk8 /dev/disk9    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            untitled               *2.1 MB     disk9 /dev/disk10    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            untitled               *1.0 MB     disk10 /dev/disk11    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            untitled               *524.3 KB   disk11 /dev/disk12    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            untitled               *524.3 KB   disk12 /dev/disk13    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            untitled               *1.0 MB     disk13 /dev/disk14    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            untitled               *6.3 MB     disk14 /code/pre  and codegpt -r show disk0/code:  precode    start       size  index  contents           0          1         PMBR           1          1         Pri GPT header           2         32         Pri GPT table          34          6                   40     409600      1  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B      409640  353106320      2  GPT part - 55465300-0000-11AA-AA11-00306543ECAC   353515960  136718759            490234719         32         Sec GPT table   490234751          1         Sec GPT header /code/pre  <answer271942> The second partition of your internal disk got the wrong partition type, your data probably won't be lost.  A bootable OS X partition (except the Recovery HD) either has the GUID 48465300-0000-11AA-AA11-00306543ECAC for a standard OS X partition or the GUID 53746F72-6167-11AA-AA11-00306543ECAC for a CoreStorage partition. The 55465300-0000-11AA-AA11-00306543ECAC designates an Apple UFS partition.  It's unclear what happened to the Recovery HD partition.  The first block of a standard OS X partition doesn't contain non-zeros, the first block of a CoreStorage partition contains some non-zeros. To get the first 3 blocks of a partition enter codesudo dd if=/dev/diskXsY count=3 | hexdump/code.  The GUID can be modified with codegpt/code. Modifying the GUID partition table with gpt requires to unmount the whole disk which can't be done if you boot to its Recovery HD or another boot volume on the same disk.  hr  ul liBoot to an independent OS X/macOS system providing codehexdump/code. You may have to install a full bootable OS X to a thumb drive (16 GB) - an OS X installer thumb drive isn't sufficient!/li liOpen Terminal in the menubar Go To  Utilities  Terminal/li liGet an overview with codediskutil list/code/li liGet an overview of your internal disk with the disk identifier found in the previous command. Below I assume the disk identifier of your internal disk is disk0 (replace it with the one you have found in your environment)  precodesudo gpt -r show disk0 /code/pre/li liUnmount disk0 with codediskutil umountDisk disk0/code if booted to an external disk/thumb drive with a full OS X/macOS/li liQuick check if the 1269536 blocks following disk0s2 are a Recovery HD:  precodesudo gpt add -i 3 -b 353515960 -s 1269536 -t 426F6F74-0000-11AA-AA11-00306543ECAC disk0 diskutil verifyVolume disk0s3 /code/pre  If the volume verification doesn't reveal an error you probably recovered a deleted Recovery HD. If you get an error just remove the third partition again:  precodediskutil umountDisk disk0 sudo gpt remove -i 3 disk0 diskutil umountDisk disk0 /code/pre/li lihexdump the first 3 blocks of the Apple UFS partition:  precodesudo dd if=/dev/disk0s2 count=3 | hexdump /code/pre  The following result identifies it as a normal OS X partition:  precode0000000 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 * 0000400 48 2b 00 04 80 00 21 00 48 46 53 4a 00 00 01 ff 0000410 d3 8c 77 d3 d4 33 3c b0 00 00 00 00 d3 8c 5b b3 0000420 00 00 02 a8 00 00 00 25 00 00 10 00 00 fe b7 f6 0000430 00 fe 1e fa 00 ed 80 00 00 01 00 00 00 01 00 00 0000440 00 00 10 f2 00 00 5a 9d 00 00 00 00 00 00 00 01 0000450 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 0000460 00 00 00 00 00 00 00 00 7d 9d b0 3a 02 31 62 f0 0000470 00 00 00 00 00 1f e0 00 00 1f e0 00 00 00 01 fe 0000480 00 00 00 01 00 00 01 fe 00 00 00 00 00 00 00 00 0000490 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 * 00004c0 00 00 00 00 00 60 00 00 00 60 00 00 00 00 06 00 00004d0 00 00 0a 00 00 00 06 00 00 00 00 00 00 00 00 00 00004e0 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 * 0000510 00 00 00 00 03 10 00 00 03 10 00 00 00 00 31 00 0000520 00 03 ac 00 00 00 31 00 00 00 00 00 00 00 00 00 0000530 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 * 0000560 00 00 00 00 05 40 00 00 05 40 00 00 00 00 54 00 0000570 00 00 10 00 00 00 54 00 00 00 00 00 00 00 00 00 0000580 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 * 0000600 /code/pre  The first number is the byte count in hex: 0000000: 0; 0000600: 1536. The * denotes identical lines. This means: the first two blocks (0x000-0x3ff) are all zeros.  A CoreStorage partition shows some non-zeros in the first block (0x000-0x1ff):  precode0000000 0c 73 a1 a9 ff ff ff ff 01 00 10 00 07 14 d7 01 0000010 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 0000020 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 0000030 00 02 00 00 00 00 00 00 00 00 00 00 00 00 00 00 0000040 00 20 c1 cc 0f 00 00 00 00 00 00 00 00 00 00 00 0000050 00 00 00 00 00 00 00 00 43 53 01 00 00 00 04 00 0000060 00 10 00 00 00 00 40 00 11 bc fc 00 00 00 00 00 0000070 11 c0 fc 00 00 00 00 00 11 c4 fc 00 00 00 00 00 0000080 11 c8 fc 00 00 00 00 00 00 00 00 00 00 00 00 00 0000090 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00000a0 00 00 00 00 00 00 00 00 10 00 00 00 02 00 00 00 00000b0 62 02 98 59 ee a9 ab 51 9b 49 23 90 2e f8 8b 43 00000c0 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 * 0000130 e4 6e f8 f2 63 99 45 c1 b2 13 86 28 a5 18 46 6d 0000140 c4 51 c0 f6 32 f9 43 ab 8e 59 42 d2 1a ef f6 50 0000150 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 * 0000400 48 2b 00 04 80 00 21 00 48 46 53 4a 00 00 01 ff 0000410 d1 98 a4 93 d4 33 8b d5 00 00 00 00 d1 98 88 73 0000420 00 06 07 53 00 01 82 39 00 00 10 00 00 fb 6a 00 0000430 00 c5 1c 55 00 25 73 c7 00 01 00 00 00 01 00 00 0000440 00 0d e2 65 00 3e a2 fb 00 00 00 00 02 20 00 fb 0000450 00 00 00 31 00 06 b9 ef 00 00 00 00 00 00 00 00 0000460 00 00 00 00 00 00 00 31 fb 48 1e a0 6c 47 a2 9f 0000470 00 00 00 00 00 1f e0 00 00 1f e0 00 00 00 01 fe 0000480 00 00 00 01 00 00 01 fe 00 00 00 00 00 00 00 00 0000490 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 * 00004c0 00 00 00 00 00 60 00 00 00 60 00 00 00 00 06 00 00004d0 00 00 0a 00 00 00 06 00 00 00 00 00 00 00 00 00 00004e0 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 * 0000510 00 00 00 00 0e 40 00 00 01 30 00 00 00 00 e4 00 0000520 00 00 10 00 00 00 e4 00 00 00 00 00 00 00 00 00 0000530 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 * 0000560 00 00 00 00 11 d0 00 00 01 30 00 00 00 01 1d 00 0000570 00 02 80 00 00 00 72 00 00 13 30 97 00 00 13 00 0000580 00 15 c5 aa 00 00 13 00 00 18 2d 23 00 00 13 00 0000590 00 19 d8 fb 00 00 13 00 00 1b 76 cb 00 00 13 00 00005a0 00 1c 34 70 00 00 13 00 00 1d 0e 4d 00 00 13 00 00005b0 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 * 0000600 /code/pre  The line starting with byte 0x130 shows the UUID of the Physical Volume, the line starting with byte 0x140 shows the UUID of the Logical Volume Group.  The string em48 46 53 4a/em (= "HFSJ") in the first 16 bytes of the third blocks identifies a Journaled HFS+ volume./li liRemove the second partition:  precodediskutil umountDisk disk0 sudo gpt remove -i 2 disk0 diskutil umountDisk disk0 /code/pre  re-add the partition with the proper typebr either a normal OS X partition  precodesudo gpt add -i 2 -b 409640 -s 353106320 -t 48465300-0000-11AA-AA11-00306543ECAC disk0 /code/pre  or (if you have found a CoreStorage partition)  precodesudo gpt add -i 2 -b 409640 -s 353106320 -t 53746F72-6167-11AA-AA11-00306543ECAC disk0 /code/pre/li liFinally verify the disk with codediskutil verifyDisk disk0/code and/or codediskutil verifyVolume disk0s2/code. If a partition/file system error is reported, add a comment here, but strongdon't/strong actually repair, initialize or copy anything./li /ul  <comment341816> It's no exact duplicate of the linked [How do I recover/fix my OS X partition?](http://apple.stackexchange.com/questions/262457/how-do-i-recover-fix-my-os-x-partition) - your partition table is even more broken. Now you have to add which recovery tools you have (e.g Time Machine backup, thumb drive, second Mac, possibility to attach the broken Mac in Target Mode to a 2nd Mac etc) <comment341817> All I have is a second Mac and thumb drives.