This script randomizes a MAC address--but I cannot renew DHCP afterwards <body> precode#!/bin/bash NEWMAC=`openssl rand -hex 6 | sed 's/\(..\)/\1:/g; s/.$//'` ifconfig $1 ether $NEWMAC ifconfig $1 down ifconfig $1 up /code/pre  I pass en0 or en1 as the sole argument to the script and run as sudo. When I do this, the MAC does change, however I cannot restore connectivity until I reboot and the new MAC is lost. Initially the interface displays no IP, but after a few minutes it displays an IP and claims to have DHCP information. However, I believe this is a cached data and not an actual renewal, as I cannot ping, load pages, or otherwise connect to the Internet.  I have appended this snippet with no improvement in results.  precodeipconfig set $1 BOOTP ipconfig set $1 DHCP /code/pre  <answer52252> If you're on MacOSX 10.5 or later, at the beginning of your script, call codesudo /System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -z/code. Another thing you could do to improve this is to call the script itself with codesudo/code instead of calling codesudo/code multiple times within.  <comment59782> When I have `sudo ifconfig $1 down` before `sudo ifconfig $1 ether $NEWMAC`, I get this error: `ifconfig: ioctl (SIOCAIFADDR): Device power is off`. I've modified the script to require sudo when calling the script. <comment59784> Oh, my bad. I'll edit my answer. Did using `sudo ifconfig set $1 DHCP` work for you? <comment59785> Just tested it... results in `ifconfig: interface set does not exist` and the connection remains down. <comment59786> Oh, I messed up, and I edited my answer again. <comment59787> Oh, I think it's `ipconfig` and not `ifconfig` for this command, sorry. I get the two mixed up. Answer updated. <comment59788> I discovered that in Googling the error string. I substituted but it still isn't working.   I'm not sure of the relationship between that command and going into System Preferences  Network  Ethernet  Advanced  Renew DHCP Lease, but I have also been renewing the lease that way, without success. <comment59789> You may have to renew the BOOTP, also. I've updated my answer with the additional command. <comment59790> let us [continue this discussion in chat](http://chat.stackexchange.com/rooms/3574/discussion-between-trav1th-and-andrew-larsson) <comment266240> I know it this was over three years ago, but did my solution solve your problem? If so, could you please mark it as the correct answer? Thanks!