External disk reports incorrect amount of free space after doing clean up via terminal. DiskUtility's Repair temporarily fixes it, but why? <body> I have an external 5 TB USB drive (HFS extended) which contains one encrypted disk image (HFS extended) of an equal size (practically 5 TB). All the external disk's work files are inside the encrypted disk image.  Over time the available free space naturally shrunk and shrunk; and recently I did a bit of a clean up.  Some folders had accumulated ridiculous amounts of files so I decided to use terminal (instead of Finder) for the task, ie. files were removed with coderm/code.  Moreover, I noticed some backup folders had (partially) duplicated content. I knew the filenames were unique, so I created a catch-all folder and emmoved/em all suspected duplicates to it (namely, with codemv/code via terminal—probably not the best option in hindsight) effectively killing the duplicate files.  Now I'm sure I have plenty of free space available, but Finder doesn't seem to know it nor remember it.  After every remount, Finder, Disk Utility app and codedf/code report the space usage as follows (disk2s2 is the regular volume, and disk3s2 is the encrypted one):  precode$ df -h Filesystem                                 Size   Used  Avail Capacity   iused   ifree %iused  Mounted on /dev/disk2s2                              4.5Ti  4.5Ti  317Mi   100% 610375939   40592  100%   /Volumes/Snake /dev/disk3s2                              4.5Ti  4.5Ti  285Mi   100% 610178600   36496  100%   /Volumes/87 /code/pre  Which is to say I have 285 MB free space ≈pretty much what I had before clean up.  strongNow—if I run "Repair" in Apple's Disk Utility app (on the encrypted disk image, ie. disk3s2), I get emno errors/em, but free space is updated (and presumably corrected):/strong  precode$ df -h Filesystem                                 Size   Used  Avail Capacity   iused    ifree %iused  Mounted on /dev/disk2s2                              4.5Ti  4.5Ti  317Mi   100% 610375920    40611  100%   /Volumes/Snake /dev/disk3s2                              4.5Ti  4.2Ti  316Gi    94% 568746945 41468151   93%   /Volumes/87 /code/pre  ie. 316 GB available and no effects on disk2s2. I unmounted disk3s2 and scanned disk2s2, but neither that had any effect:  precode$ df -h Filesystem                                 Size   Used  Avail Capacity   iused   ifree %iused  Mounted on /dev/disk2s2                              4.5Ti  4.5Ti  317Mi   100% 610375930   40601  100%   /Volumes/Snake /code/pre  Also the corrected amount of free space is lost yet again after remounting disk3s2:  precode$ df -h Filesystem                                 Size   Used  Avail Capacity   iused   ifree %iused  Mounted on /dev/disk2s2                              4.5Ti  4.5Ti  317Mi   100% 610375931   40600  100%   /Volumes/Snake /dev/disk3s2                              4.5Ti  4.5Ti  285Mi   100% 610178592   36504  100%   /Volumes/87 /code/pre  Rebooting OS X does not help.  I tried secure erasing the free space by codesudo diskutil secureErase freespace 0 /dev/disk3s2/code, but that didn't help at all.   ol listrongWhat emmagic/em does Disk Utility's Repair do that fixes the reported free space?/strong/li listrongCan I do just emthat/em manually? By emthat/em I mean, I don't need to run diagnostic checks, only the emthing/em to get the space reporting right/strong/li listrongWhy the repaired space usage report does not persist‽/strong/li /ol  <answer257950> To back up a little for others, in the future.  strongHow to get a report of remaining storage./strong  strongVia Terminal/strong, type df -h and you’ll get a human-readable summary by volume in columns marked Used, Avail, and Capacity (as a percentage). (The Gi or Ti refers to gibibytes and tebibytes, base 2 units for a billion and trillion bytes instead of the base 10 gigabytes and terabytes.)  img src="https://i.stack.imgur.com/KjL8b.png" alt="enter image description here"  If these don’t agree, it’s likely a Spotlight error. Apple relies on Spotlight to mark and calculate remaining storage. You can delete the Spotlight index and rebuild it by following these steps:  ol liOpen the Spotlight preference pane./li liClick the Privacy tab./li liDrag the startup volume into the Privacy window./li liClick OK at the warning, and the Spotlight index is deleted./li liSelect your startup volume in the privacy list, and click the - (minus) button./li /ol  That restarts indexing. This should reset your storage.  <comment314423> It's purely cosmetic. <comment314433> That's a relief if true. (note: I replaced the Disk Utility screenshots with `df` output if that makes any difference. The used/free inode counts seem to be screwed prior using Disk Utility's repair as well.) <comment321818> Can you please share your hardware details and the version of macOS you're running? <comment321824> @Monomeeth it's a LaCie external 5 terabyte (single disk; 7200 rpm plates) USB3 desktop (power from mains) drive, connected via USB2 to mid-2010 iMac. Incident happened on El Capitan, but still persists on Sierra. <comment321828> Sorry, one more question. Have you tried accessing the drive from a different computer to see what free space is reported? What about when your Mac is booted in Safe Mode (make sure your HD is connected before booting in safe mode).  (Okay, that was 2 questions!) <comment322116> Have you tried secure erasing the the free space?  Issue the command `sudo diskutil secureErase freespace 0 /dev/diskX` where X is the drive you want to "clean". <comment322176> Out of curiosity, why do you have an encrypted disk image using up the whole disk? I wonder if that has something to do with it... Wouldn't it be easier to encrypt the whole disk and not have disk images involved? Granted, that may be difficult now.. <comment341179> @Monomeeth Just tried it: Finder seems to get "repaired" as it now reports correct numbers across two devices—for some reason Disk Utility and `df`, however, do not. I haven't yet stumbled upon any read or write errors and all status checks give me OK, but there's slight fear I am accidentally going to overwrite something. <comment341180> @MacManager Probably because should I run out of space then migration of a one file to new device would be much less of a hassle than moving all the scattered files (who knows how many) to new device. (And should I need to upgrade, I'd like to *replace* the disk rather than have two.) <comment367164> @Allan nope, that didn't help either :/