How should I debug AFP issues? <body> I'm having some problems connecting to a Time Capsule's shared drive from a Macbook Air running OS X 10.7.2 Lion.  I can connect to the share without problem from a Macbook Pro running OS X 10.6 Snow Leopard.  I do not have any other fileservers to attempt connecting against for comparison.  Disabling both the Macbook Air's inbound firewall and its outbound application firewall, Little Snitch, yields no improvement (no other firewall, such as codeipfw/code, is in use).  However, it is possible that some other (perhaps overly paranoid) security configuration is interfering with AFP.  The Time Capsule appears in Finder's sidebar, but reads "Connection Failed" when selected.  Clicking "Connect As..." immediately brings up the following message:     strongThere was a problem connecting to the server "Time-Capsule"./strong      Check the server name or IP address, and then try again.  If you continue to have problems, contact your system administrator.   Neither Little Snitch's network monitor nor codetcpdump/code show any network activity during the above interactions.  The same message appears (again, without network activity) after specifying "afp://1.2.3.4/share" (where 1.2.3.4 is the correct IP address of the Time Capsule and "share" is the correct name of the AFP share) in Finder's "Connect to Server..." dialog.  In syslog, the following entries appear:     Dec  5 22:41:17 MacbookAir Finder[123]: SharePointBrowser::handleOpenCallBack returned 22   From the command line:  precode$ mount_afp afp://username:password@1.2.3.4/share /Volumes/mount_point mount_afp: AFPMountURL returned error 22, errno is 22 /code/pre  I suspect that this is the error which resulted in the syslog entries from Finder, but I am unable to debug further.  I would welcome your thoughts and suggestions on how I might proceed!  <answer33022> It turns out that, as I suspected, a paranoid security configuration was preventing AFP from working.  In particular, the machine had been "hardened" per Apple's security configuration guide in which chapter 9 describes how to disable AFP by unloading the codecom.apple.afpfs_afpLoad/code dæmon (I had thought it was only required to serve files, not also to connect to an AFP server as a client).  Reenabling the dæmon resolved the issue.  I am nevertheless curious what tools are recommended for tracing file sharing problems in the future.  <comment37728> Have you started with running `tmdiagnose` and checking over the log files. It's very end-user un-friendly but if you are comfortable in terminal, it is the Apple provided tool for capturing potential problems to diagnose all sorts of time machine related issues or failures. <comment37735> @bmike: Thanks for this suggestion; whilst I managed to resolve the problem without resorting to this tool, I will keep it noted for the future (although in this case the problem wasn't really related Time Machine). <comment277885> How can I check if my machine has the `com.apple.afpfs_afpLoad` daemon unloaded?