Converting WAV to MP3 using LAME and Automator <body> I'd like to convert many WAV files to MP3 files using LAME and Automator. I need a script that I could right click a folder and convert all the WAV files inside the folder to MP3 files. I've been able to find a script to convert single file but I don't know how to modify it so I could convert many files with a single click.   I've been using script which I found here for single files. Here is a similar question but instead of using "Run Applescript" it uses "Run Shell Script". I've tried to replace LAME parameters between "do" and "done" but haven't succeeded to convert anything.  So, how could I convert folder full of WAV files to MP3 files? For me it doesn't matter is it done by using Applescript or Shell Script in Automator if both ways are possible.  <answer22807> Automator 'hangs' when attempting to use LAME encoder unfortunately. It's also not efficient or advisable to try and use a multi-threaded process as an Automator Service. For tasks such as this it's best to either run a simple script or use an alternate method.  The script below will encode a 20Mb .wav to .mp3 in strong3 seconds!/strong (at the highest quality settings)  precodefile="$1"  find . -name '*.wav' -maxdepth 1 -exec /usr/local/bin/lame -V 0 -q 0 '{}' \;  for file in *.mp3 do   mv "$file" "${file/wav./}" done /code/pre  hr  To install, download, then open terminal:  codesudo install encode-mp3 /usr/local/bin/code  To use, navigate into a desired conversion folder and type:  precodeencode-mp3 /code/pre  This will encode your .wav files to .mp3  strongConvert .wav to .mp3 | LAME Encoder Shell Script/strong [md5: 72d4e24f14ea9139136900f2c4281a7f]  hr     [original]      I just wrote a one-liner that will do this for you in Terminal, just   cd to the directory of files you want to convert and enter:  precodefind ./ -name "*.wav" -execdir lame -V 3 -q 0 {} \; /code/pre   <answer22817> You can use the following in Automator's "Run Shell Script" action (make sure to change "Pass input" to "as arguments"):  precodefind "$1" -name "*.wav" -execdir /usr/local/bin/lame -V 0 -q 0 {} \; /code/pre  This will find all .wav files in the selected folder, including sub-folders (and skip over any non-wav files). If you don't want it to look into sub-folders, you can change it to this:  precodefind "$1" -name "*.wav" -maxdepth 1 -execdir /usr/local/bin/lame -V 0 -q 0 {} \; /code/pre  Of course, you would change code-V 0 -q 0/code to whatever codelame/code options you prefer.  If you want to be notified when it's done, you can add a codesay/code command, use a "Show Growl Notification" action (if you have Growl installed), or use a codebeep/code command in a "Run AppleScript" action.  Below is a screenshot of what my workflow looks like with the extra codesay/code command and the Growl notification. Also notice I changed the "Service receives selected" option at the top to "folders" (it will be "text" by default).   img src="https://i.stack.imgur.com/T5LEN.png" alt="Lame WAV to MP3 Batch Conversion"  <answer46047> The thread is a bit updated, but for those who may find it useful,  I used Automator setup described here, and was able to avoid getting it stuck with -S option of lame, so my "Run Shell Script" command looks like:   precode    find "$1" -name "*.wav" -maxdepth 1 -execdir /usr/bin/lame -b 160 -q 0 -S {} \; /code/pre  (besides, my lame exec is in another place)  The -S option turns off Lames progress report  <comment25469> If you don't insist on using LAME, Doug's Applescripts for iTunes is a useful source. http://dougscripts.com/itunes/ <comment25476> [This](http://apple.stackexchange.com/questions/9064/how-to-i-go-from-flac-to-mp3-using-lame-flac-using-the-terminal-alone) goes .flac -- .mp3 so adds a step, but the idea is the same. It could be easily modified to deal with .wav instead of .flac. It's done in the terminal. I use it daily. <comment25635> Thank you for this! It worked perfectly. However, I don't want to open Terminal every time I convert files. Is it possible to use this in Automator? I would like to just right click a folder to convert files inside it. I tried to use it as a Shell Script but I didn't get it working. <comment25637> Thank you for your help! I wasn't able to get it working though. I guess I should but the line between "do" and "done" in that Shell Script, right? All I get is one 21 second MP3 file and infinite loop or something. I guess I'm doing something wrong :) I remembered to change "pass input" to "as arguments". <comment25638> I have checked those Applescripts for iTunes and they are great but I want to use the latest LAME to convert my WAV files. Anyway, thanks for your help! <comment25716> @nqw1 With the `find` command, you don't need to use the `for`, `do`, or `done` commands at all. Those commands form a loop statement to process each file in the folder. The `find` command yields similar results, but it will only run `lame` on files with the .wav extension. I'll edit the answer & include a screenshot from Automator. <comment25760> Thank you for your kind help! This is getting weird because I have everything exactly as in your screenshot but still it's creating only one unfinished ~20 second MP3 file and the service stays in infinite loop or something. I have to manually shut it down and then the Growl message appears. I even checked that folder path /usr/local/bin and there is lame file. Do you have any idea what could be the problem? <comment25798> If you try ioi's [answer](http://apple.stackexchange.com/questions/22803/converting-wav-to-mp3-using-lame-and-automator/22807#22807) in the same folder, does it get stuck on the same file? If so, that file may be corrupt. Another possibility may be that you may need to just give it more time to complete. On my 2.5 GHz Core 2 Duo with 4 GB RAM, it takes about 15 seconds for a 5 minute song. While I don't think it should make a difference, it may be worth mentioning that I've only tested this Automator workflow with lame 3.98.4 installed in Lion. <comment25859> ioi's answer works perfectly. I can convert the same WAV file(s) in ~10 seconds. I also use 3.98.4 LAME version but I have OS X 10.6.8 Snow Leopard. I guess that shouldn't make the difference? I guess the problem must be somewhere in Automator if I'm able to use LAME in Terminal.. My Automator version is 2.1.1 (247.1). <comment25908> Try typing `which lame` in Terminal to see if it gives you `/usr/local/bin/lame`. If it gives you a different path, try using that in Automator instead. If that's not it, I'm afraid I'm not sure what else could be causing the problem. <comment26172> Yep, it gives that path. Thank you for your persistent help :) <comment28376> Sure thing! It looks like you got it working w/automator since the last time I was here. I'm glad my one liner helped in the outcome of eventually accomplishing what you wanted; Hopefully it can help someone else as well. <comment28705> I still haven't been able to get it working on Automator. I have tried many things which can be read from the other answer. If you have more suggestions, feel free to help :) <comment28822> I created an Automator version for you. I have it setup so that Control + Mouse Clicking a FOLDER will bring up Services  Convert .wav to .mp3, which then converts the entire folder. Let me know if my workflow solves your problem. <comment28828> I noticed that in the example above it shows: 'Service receives selected [folders] in [any application], which is probably your issue. It should be set to [files or folders] to [Finder], which allows you to do files or folders and "Finder" correctly sends the command shell (/bin/bash).   You can download the workflow from my original answer. <comment28844> Thank you a lot for your help but I have the same problem as in the other answer. I have folder which contains 3 WAV files named 01.wav, 02.wav and 03.wav. I use the script for the folder and it starts to convert the files. It creates only one unfinished MP3 file which length is around 30 seconds and the service keeps running on background. After this, nothing happens. I manually have to shut the service down. I downloaded your script and didn't make any adjustments. I also tried to right click files and use the script but it didn't work. Any idea where could be the problem? :) <comment28861> I think it's an automator issue to be quite honest. It seems as though it gets stuck in the loop somehow. I'll try a couple other things and post it shortly. <comment28878> I know this doesn't answer your question, but couldn't you use [Switch](http://www.nch.com.au/switch/index.html)? <comment29179> @nqw1 — I tried to get this to work in every way possible, although I think it's a matter of Automator/Applescript not being able to handle a multi-threaded process such as this. I did polish up my original shell script though, which I must say is extremely fast. It can be installed as a command so all you would need to do is navigate into the folder of .wavs you want to convert and type 'encode-mp3', which will encode, and also handles the renaming too. <comment29183> @daviesgeek — I do not recommend that using that app. <comment29202> @ioi Any particular reason why? <comment29218> @daviesdeek, It's very unstable, tries to download something everytime you want to do a conversion (if it manages to stay open long enough), and doesn't encode to/from many formats that one would expect from a paid app. Since I don't want to go too much off topic here I'll just say that if you wanted to use a standalone application there are better ***free*** options. <comment29234> Alright, I got it working. Thank you a lot for your help!