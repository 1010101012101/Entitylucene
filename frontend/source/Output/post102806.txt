How to recover from "chown -R $USER /usr/"? <body> I ran a 'chown' on everything under /usr to a non root user. Meant to run it for /usr/local/ Now I get the error below on opening terminal  precodelogin(89809,0x7fff7bac5960) malloc: *** error for object 0x7fc7cb500b40: pointer being freed was not allocated *** set a breakpoint in malloc_error_break to debug  [Process completed] /code/pre  <answer102897> If you can't restore code/usr//code from a backup, you could first start up in single user mode (by holding command-S on startup) and run codechown -R root /usr//code.  On my installation, all files under code/usr/local//code were owned by either root or me, a few files under code/usr//code were owned by code_uucp/code, and all other files under code/usr//code were owned by root:  precode$ sudo find /usr/local ! -user root ! -user $USER $ sudo find /usr/!(local) ! -user root -print0|xargs -0 stat -f '%Su %N' _uucp /usr/bin/cu _uucp /usr/bin/uucp _uucp /usr/bin/uuname _uucp /usr/bin/uustat _uucp /usr/bin/uux _uucp /usr/sbin/uucico _uucp /usr/sbin/uuxqt _uucp /usr/share/uucp /code/pre  This would change the owner of the codeuucp/code files:  precodesudo chown _uucp /usr/bin/{cu,uucp,uuname,uustat,uux} /usr/sbin/{uucico,uuxqt} /usr/share/uucp /code/pre  code/usr/local//code does not exist on a fresh installation of OS X. If you only used code/usr/local//code with Homebrew, you might delete code/usr/local//code and then reinstall Homebrew.  Alternatively, you could use Pacifist to copy the default code/usr//code from an OS X installer downloaded from App Store. Doing an upgrade install of OS X from the recovery partition or upgrading to 10.9 might also restore the owners of some files.  <answer103591> I think this is a case where Repair Permissions actually does something useful. It will restore the correct permissions to all the files supplied by Apple which I think is all but those in /usr/local  That directory contains stuff you added and so you should be able to recreate.  To Repair Permissions Use Disk Utility.app and select the boot disk inthe left hand list of disks. There will be buttons to Verify or Repair Disk Permissions.   <comment121022> Possible duplicate of [how-can-i-reset-my-terminal](http://apple.stackexchange.com/questions/91381/how-can-i-reset-my-terminal)? <comment121031> Also asked on http://unix.stackexchange.com/q/91899/4667 <comment121900> I have many files under `/usr/!(local)/` that were not included with OS X: for example files that were added by the Command Line Tools package, files added by the installers for MacTeX, Java, and Haskell, and some binaries in `/usr/bin` that were added by `sudo /usr/bin/gem install`. <comment121903> There is a reason why it is often suggested that you should not add files in `/usr/!(local)/` Apple should be left to manage that area <comment121964> A) That's why you shouldn't install things to /usr/ except /usr/local/ and B) Repair Permissions is still your best bet to get your system working again. <comment123620> The single user mode solution worked. But before running chown, I had to run mount -uw / to allow modification of otherwise read only file system