Homebrew refuses to work on macOS Sierra <body> Just yesterday I updated my machine, a MacBook Pro (Mid 2010), to macOS Sierra. Everything seems to work fine, except when I try to use the homebrew packet manager with any command, for example codebrew help/code, the following error message is printed:  precode/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- mach (LoadError)     from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require'     from /usr/local/Library/Homebrew/extend/pathname.rb:2:in `&lt;top (required)&gt;'     from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require'     from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require'     from /usr/local/Library/Homebrew/global.rb:3:in `&lt;top (required)&gt;'     from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require'     from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require'     from /usr/local/Library/brew.rb:15:in `&lt;main&gt;' /code/pre  I have not messed with anything related to ruby. Upon research I noticed that there seem to be some compatibility issues with Sierra and homebrew around, however, none seemed to match my problem exactly.  <answer256298> For the big picture: I solved the issue by uninstalling homebrew and then re-installing it again. In order to help people maybe gain a bit more insight, let me go into further detail.  Researching the Internet for the error message, my first hunch was that it had something to do with permissions. Check a discussion on Reddit or on the Homebrew GitHub for reference. However, running codesudo chown -R $(whoami) /usr/local/code did not to the trick. In any way, I would advise to be very careful using this command as it will transfer the ownership of code/usr/local/code from the root user to yourself, which, apparently, was not intended by Apple. You can undo this by running  precodesudo chmod 0755 /usr/local sudo chown root:wheel /usr/local /code/pre  However, note that this will only undo it for the folder code/usr/local/code and not recursively for all its files.  So, I was left with uninstalling. If you want to do the same, type  precoderuby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)" /code/pre  in order to run the official script or see the Homebrew FAQ for reference. Be aware that this will also uninstall all your Formulae and that you will be left with installing them manually again later on.  To re-install homebrew, simply run  precode/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" /code/pre  If anyone figures out why I got the error in the first place or how it can  be addressed directly, please let me know.  <comment319582> Have you tried reinstalling homebrew? I seem to recall having issues with it every time I update macOS. <comment319583> I found the underlying issue as well as the answer and will post a link to a discussion shortly. <comment319584> Or so I thought. Unfortunately the solution proposed on [Reddit](https://www.reddit.com/r/MacOS/comments/4o37no/psa_fixing_homebrew_on_sierra/) does not work for me. I get the same error even after running chmod and running this let's me cringe anyway. <comment319591> Is it weird that /usr/local/Homebrew does not exist? Actually, on first sight I do not see anything related to homebrew except for the .git folder and the respective .gitignore. I am not able to create files/folders in /usr/local when running, for example,  `mkdir abc` without sudo. By the way, how should file ownership in /usr/local look like? Is ist correct that I am supposed to be the owner for every file and folder and not root? <comment319593> Have you tried the following: brew doctor <comment319594> I get the same error for every brew command, including this one. Seemingly, Sierra has reset the rights for /usr/local. Earlier versions of homebrew, however, need those rights. What I can't explain to myself is, why running `chmod` does not do the trick for me. <comment319595> Probably system protection. I found this command in my history â€“ maybe give it a try? brew uninstall --force brew-cask; brew untap phinze/cask; brew untap caskroom/cask; brew update; brew cleanup; brew cask cleanup <comment319607> So, I guess it is weird that there is no homebrew folder in /usr/local after all. At least there is nothing besides the .git folder and the .gitignore file. If it would have to do with permissions, as suggested in the Reddit link I posted, shouldn't I be able to run `brew` commands with `sudo` in front of it? <comment319613> Actually, I was just sick of it now, so I took the easy road and uninstalled homebrew using the provided script on GitHub. After re-installing, everything works fine. I am not sure whether I should put this as an answer because it does not address the core of the issue, although it somehow solves the problem. <comment324547> I got the same error when I tried to update my homebrew with Ansible after upgrading to Sierra. Till I found your post, I was thinking that the Ansible module caused the problem, now it seems to be related to homebrew itself. Did you run `brew update` after installing Sierra? <comment330301> Thanks for this! Just a small point in case it happens for anyone else - when running the uninstall script, the folders under `/usr/local/` were not being deleted after the uninstall of brew. This then caused issue with the fresh installation. So I had to manually delete those folders before running the install script, and it all worked then!