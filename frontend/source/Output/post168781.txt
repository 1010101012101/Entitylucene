Can not delete Free Space on iMac 5K: Partition doesn't appear in CS list <body> I recently tried to install a bootcamp instance of Win 8.1. The install failed for some reason (wasn't clear from the error message). This left me with an unaddressable partition. I erased that partition in Disk Utility but now I am left with a hunk of Free Space that refuses to be deleted or merged with my Macintosh HD partition.  When I try to delete it from the UI nothing happens -- no error nothing. It just sits there. When I do it from the command prompt I get an error saying that operation isn't available.  PLEASE HELP!  Here's the output of the code$diskutil cs list/code command. Note that this is a 1.1 TB drive and the 250GB Free Space partition doesn't show up here:  precodeCoreStorage logical volume groups (1 found) | +-- Logical Volume Group B7C59032-4924-48FD-AE6C-6B937F443A5E     =========================================================     Name:         Macintosh HD     Status:       Online     Size:         842855342080 B (842.9 GB)     Free Space:   114688 B (114.7 KB)     |     +-&lt; Physical Volume 11715AE4-D61A-404B-8B5F-84E03E196A5C     |   ----------------------------------------------------     |   Index:    0     |   Disk:     disk0s2     |   Status:   Online     |   Size:     120988852224 B (121.0 GB)     |     +-&lt; Physical Volume 93E06B6F-E206-419D-9ED7-16426463BB3E     |   ----------------------------------------------------     |   Index:    1     |   Disk:     disk1s2     |   Status:   Online     |   Size:     721866489856 B (721.9 GB)     |     +-&gt; Logical Volume Family 294984BD-084E-40FB-8FD2-3B3DE40FA921         ----------------------------------------------------------         Encryption Status:       Unlocked         Encryption Type:         None         Conversion Status:       NoConversion         Conversion Direction:    -none-         Has Encrypted Extents:   No         Fully Secure:            No         Passphrase Required:     No         |         +-&gt; Logical Volume DD3595D9-58B6-4745-8EC9-816F9ABE30E9             ---------------------------------------------------             Disk:                  disk2             Status:                Online             Size (Total):          836999970816 B (837.0 GB)             Conversion Progress:   -none-             Revertible:            No             LV Name:               Macintosh HD             Volume Name:           Macintosh HD             Content Hint:          Apple_HFS /code/pre  and for comparison the output of code$diskutil list/code:  precode/dev/disk0    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                        *121.3 GB   disk0    1:                        EFI EFI                     209.7 MB   disk0s1    2:          Apple_CoreStorage                         121.0 GB   disk0s2    3:                 Apple_Boot Boot OS X               134.2 MB   disk0s3 /dev/disk1    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                        *1.0 TB     disk1    1:                        EFI EFI                     209.7 MB   disk1s1    2:          Apple_CoreStorage                         721.9 GB   disk1s2    3:                 Apple_Boot Boot OS X               650.0 MB   disk1s3    4:                        EFI NO NAME                 104.9 MB   disk1s4 /dev/disk2    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                  Apple_HFS Macintosh HD           *837.0 GB   disk2                                  Logical Volume on disk0s2, disk1s2                                  DD3595D9-58B6-4745-8EC9-816F9ABE30E9                                  Unencrypted Fusion Drive /code/pre  Finally here is a shot of the disk utility UI: img src="https://i.stack.imgur.com/V8KxB.png" alt="Disk Utility UI: Free Space"  strongAdding output of GPT as requested/strong:  precodeThomass-iMac:~ moneill$ sudo gpt -r -vv show /dev/disk0 Password: gpt show: /dev/disk0: mediasize=121332826112; sectorsize=512; blocks=236978176 gpt show: /dev/disk0: PMBR at sector 0 gpt show: /dev/disk0: Pri GPT at sector 1 gpt show: /dev/disk0: Sec GPT at sector 236978175           start       size  index  contents           0          1         PMBR           1          1         Pri GPT header           2         32         Pri GPT table          34          6                   40     409600      1  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B      409640  236306352      2  GPT part - 53746F72-6167-11AA-AA11-00306543ECAC   236715992     262144      3  GPT part - 426F6F74-0000-11AA-AA11-00306543ECAC   236978136          7            236978143         32         Sec GPT table   236978175          1         Sec GPT header /code/pre  strongAnd Disk1/strong  precodeThomass-iMac:~ moneill$ sudo gpt -r -vv show /dev/disk1 gpt show: /dev/disk1: mediasize=1000204886016; sectorsize=512; blocks=1953525168 gpt show: /dev/disk1: PMBR at sector 0 gpt show: /dev/disk1: Pri GPT at sector 1 gpt show: /dev/disk1: Sec GPT at sector 1953525167        start        size  index  contents            0           1         PMBR            1           1         Pri GPT header            2          32         Pri GPT table           34           6                    40      409600      1  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B       409640  1409895488      2  GPT part - 53746F72-6167-11AA-AA11-00306543ECAC   1410305128     1269536      3  GPT part - 426F6F74-0000-11AA-AA11-00306543ECAC   1411574664      615544            1412190208      204800      4  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B   1412395008   541130127            1953525135          32         Sec GPT table   1953525167           1         Sec GPT header /code/pre  `  <answer168802> Usually this situation occurs when you use BootCamp to carve space out of the fusion drive to let the spinning HDD hold a windows partition.  Apple's tools don't easily let you resize things since the fusion layer is actually several components. The stock answer is to back up the volume to Time Machine and then erase / repartition both and start over with a new fusion drive.  I'd say, ask a second follow on question if you want to learn how to attempt to use the terminal to resize things and if you have a backup just in case things go south. The commands needed to resize the volume are partially undocumented and not supported by Apple even if we can patch something together that works on one version of OS X.  That question might be quite similar to this gem of a troubleshooting exercise.  ul liI think I messed up the Fusion Drive on my 1TB iMac (with BootCamp)/li /ul  em(or perhaps your question is already boiling down to - how do I just wipe things and start over?)/em  <answer168851> strongPreliminary remark/strong  Like bmike already mentioned: the path    ul liback up the CoreStorage Volume to Time Machine  /li liand then erase / repartition both and start over with a new fusion drive  /li /ul  should be preferred.  strongPreparation:/strong  ul liDetach any external drive (especially your external Time Machine backup drive)/li liRestart to Internet Recovery Mode by pressing kbdalt/kbd kbdcmd/kbd kbdR/kbd at startup.br The prerequisites are the latest firmware update installed, either ethernet or WLAN (WPA/WPA2) and a router with DHCP activated.br On a 50 Mbps-line it takes about 4 min (presenting a small animated globe) to boot into a recovery netboot image which usually is loaded from an apple/akamai server.  I recommend ethernet because it's more reliable. If you are restricted to WIFI and the boot process fails, just restart your Mac until you succeed booting.  Alternatively you may start from a bootable installer thumb drive (Mavericks or Yosemite) or a thumb drive containing a full system (Mavericks or Yosemite).  Below I assume that the disk identifier of your Internet Recovery HD (OS X Base System) or thumb drive is disk2, disk0 is your SSD, disk1 your HDD and disk3 your CoreStorage Logical Volume./li /ul  strong'Repair': (not recommended because of potential data loss)/strong  ul liFirst try to check the volume 'Macintosh HD' with Disk Utility. If the volume is corrupted consider a backup - if possible - and a reinstall of Mac OS X./li liIf the volume is OK quit Disk Utility/li liOpen Terminal and enter codediskutil list/code, codediskutil cs list/code, codegpt -r -vvv show /dev/disk0/code and codegpt -r -vvv show /dev/disk1/code/li liwith the informations found in the different listings enter codediskutil unmountDisk /dev/LogicalVolumeIdentifier/code and both codediskutil unmountDisk /dev/DisksContainingApple_CoreStorageIdentifier/codebr In your case: first enter codediskutil unmountDisk /dev/disk3/code, then codediskutil unmountDisk /dev/disk0/code and codediskutil unmountDisk /dev/disk1/code/li liremove the EFI NO NAME partition with codegpt remove -i IndexNumberOfEFINoName DiskIdentifier/code:br In your case: codegpt remove -i 4 disk1/code/li liRemount the CoreStorage disks and then the Logical Volume:br In your case: first codediskutil mountDisk /dev/disk0/code and codediskutil mountDisk /dev/disk1/code and then codediskutil mount /dev/disk3/code./li lienter codegpt -r -vvv show /dev/HDDApple_CoreStorageIdentfier/code to get verbose partition data of your HDD CoreStorage disk.br In your case: codegpt -r -vvv show /dev/disk1/codebr It should look similar to the example below:     precodeThomass-iMac:~ moneill$ sudo gpt -r -vv show /dev/disk1 gpt show: /dev/disk1: mediasize=1000204886016; sectorsize=512; blocks=1953525168 gpt show: /dev/disk1: PMBR at sector 0 gpt show: /dev/disk1: Pri GPT at sector 1 gpt show: /dev/disk1: Sec GPT at sector 1953525167        start        size  index  contents            0           1         PMBR            1           1         Pri GPT header            2          32         Pri GPT table           34           6                    40      409600      1  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B       409640  1409895488      2  GPT part - 53746F72-6167-11AA-AA11-00306543ECAC   1410305128     1269536      3  GPT part - 426F6F74-0000-11AA-AA11-00306543ECAC   1411574664   541950471          1953525135          32         Sec GPT table   1953525167           1         Sec GPT header /code/pre/li liThe free space consists of 541950471 blocks here.    Calculate the biggest block number dividable through 8. That are 541950464 blocks (á 512 bytes) which equals 277478637568 B or ~277.5 GB.br Add the size of your HDD CoreStorage Physical Volume (721866489856 B in your case).    The result is 277478637568 B + 721866489856 B = 999345127424 B/li liResize your HDD CoreStorage physical volume with codediskutil cs resizeDisk HDD-PVUUID newsize/codebr In your case: codediskutil cs resizeDisk 93E06B6F-E206-419D-9ED7-16426463BB3E 999345127424b/code/li liCalculate the maximal size of your CoreStorage Logical Volume (refresh  codediskutil cs list/code) = size disk0s2 + size disk1s2.br In your case that's 120988852224 B + 999345127424 B = 1120333979648 B. That should also be the size of your extended Logical Volume Group (check codediskutil cs list/code)./li liResize your Logical Volume with codediskutil cs resizeVolume LVUUID LVGSize-128 MB/code. In your case that's codediskutil cs resizeVolume DD3595D9-58B6-4745-8EC9-816F9ABE30E9 1120205979648b/code. If you get an error (There is not enough free space...) choose a smaller size like 1120141979648b (=LVGSize-192 MB).    Magical numbers like codediskutil cs resizeVolume LVUUID 100%/code or codediskutil cs resizeVolume LVUUID 0g/code sadly don't work here - at least for me./li liQuit Terminal and open Disk Utility./li liCheck your expanded CoreStorage Volume for errors./li liQuit Disk Utility, choose your now expanded CoreStorage volume as startup disk and restart your Mac/li /ul  <answer168933> I would go to the Disk Utility application and create a MS-DOS (FAT) partition named BOOTCAMP using all the remaining free space. Then go back to Bootcamp Assistant application and remove the Bootcamp windows partition.  <answer169065> Thanks to @klanomath for a great answer. It's amazing to me that the only way to do this is such a destructive one. I will outline here a few things I learned and maybe a little bit of an abstraction of the problem.  ul liThe FusionDrive, as the name suggests, is actually two physical drives fused together./li liOccasionally when setting up BOOTCAMP, the Windows partition is corrupted or otherwise screwed up. Of the three times I tried to set up a Win8.1 BC drive two failed this way./li liThe Windows partition is impossible to remove using the Disk Utility or the diskutil command in terminal./li liYou can not add or alter the partition./li liDiskUtility UI can not alter these, even in Recovery Mode./li liWhat you need to do is, in a nutshell:/li liBack up your system using Time Machine/li liBoot into Recovery Mode using either Internet Recovery/li liLaunch TERMINAL under UTILITIES and, using the command line, delete the Logical and Physical partitions/li liYou then are left with an SSD (128GB) and an HDD (988GB) (adding up to 1TB in my case)/li liYou then re-fuse these two together using the command line and re left with an empty 1TB (in my case) drive/li liFinally, you plug in your Time Machine back up and restore/li /ul  I don't know but none of the descriptions made it clear what was actually happening so I thought I'd provide this answer. The details in the above thread work well but when I finally clicked on what I was doing, I thought I'd share.  I find it crazy that OS X's Disk Utility a) screws this up so badly and b) can't fix it without a full reformatting!  <answer177642> On yosemite, I created free space partition and couldn't remove it from disk utility. So this is what I ended up doing.  ol liget windows 7 or 8 64 bit iso/li lifollow the boot camp steps up to dividing hd(ssd) space. ul lipreparing bootable USB along with boot camp control with device managers/li liboot camp assi. 5, BCA5/li /ul/li liexit from BCA5 on the dividing hd(ssd) space step./li lishutdown mac/li liinsert bootable USB/li liturn on mac and press 'option' key right away./li liwhen you see startup disk selection screen, let go 'option' key/li liselect created bootable USB/li liinstall win7/8, boot camp control/li liafter all the installation, boot back to mac by selecting mac as startup disk on boot camp control/li liremove boot camp by using boot camp assistance(I didn't do this step b/c I was planning to use win8.1)/li /ol  <comment198152> Please add result of `gpt -r -vv show /dev/disk0` and `gpt -r -vv show /dev/disk1` to your question <comment198327> Thanks for the help here. One question: the Free Space isn't listed as Core Storage. The rest of the machine, i.e. Macintosh HD, is fully backed up to Time Machine. <comment198328> I've added gpt output to the body of the original question. Thank you! <comment198329> That's correct. You have to expand 'Physical Volume 93E06B6F-E206-419D-9ED7-16426463BB3E' (that's the part of your physical hdd-disk dedicated to CoreStorage) into the free space. In my example: `diskutil cs resizeDisk 93E06B6F-E206-419D-9ED7-16426463BB3E 996351459328b`. <comment198330> I will adapt my answer. But as mentioned by bmike and me better choose the [long way](http://apple.stackexchange.com/questions/168723) <comment198335> Will do. By the way, I am comfortable with partitions, command line intefaces,etc. However, my experience has always been on the PC side. I've never had to manage partitions w/ a Mac, hence my confusion. <comment198336> @MattO'Neill Some of the commands are NOT documented at all. I tested all that in a Parallels VM and it worked. It wasn't a bootcamp environment though - afaik it's not possible to add a Bootcamp partition in a Mac OS X VM. <comment198337> I see above that you say 'not recommended' but what IS the recommended way? I basically want to: - Delete the old Free Space partition - Extend Macintosh HD parition into Free Space - Without losing my existing Backup / Restore partition <comment198340> @MattO'Neill [my answer](http://apple.stackexchange.com/questions/168723/i-think-i-messed-up-the-fusion-drive-on-my-1tb-imac-with-bootcamp) 'Preparation' + 'Rebuild Fusion' drive. Leave out 'Repair CoreStorage' <comment198342> @MattO'Neill hmm where is your backup partition. It's not visible in your `diskutil list`! <comment198344> Cheers, @klanomath. One question, and pardon if I'm being thick, where does the 'Rebuild Fusion' drive section begin.   w/r/t backup it only shows up when I'm in recovery boot mode <comment198347> @MattO'Neill in [my linked answer](http://apple.stackexchange.com/questions/168723/i-think-i-messed-up-the-fusion-drive-on-my-1tb-imac-with-bootcamp) there are three headlines in bold: **Preparation:** - Detach any..., **'Repair CoreStorage' (not recommended):** - first i would try to check... and **'Rebuild Fusion Drive' (recommended if you have a Time Machine backup)** - booted to recovery.  Just leave out the 13 steps in **'Repair CoreStorage' (not recommended):** and you are fine. Is the linked answer unclear? <comment198348> Check the [first picture](http://i.stack.imgur.com/V8KxB.png) of the question: You can't partition anything. There is no free space.. <comment198349> OK, but gpt shows 277 GB of free space on disk1 right after index 4. Also, his disk utility snap shot does not show the + sign button grayed out. He should be able to click it and add a partition. <comment198350> after the very first step I get: Error: -69888: Couldn't unmount disk  Frustrating. <comment198351> @MattO'Neill Did you boot to Internet Recovery Mode? Maybe your identifiers differ. First you have to unmount the logical volume (in my example disk3, in your diskutil list it's disk2) <comment198352> Not sure what happened there. I had to go into disk utility and click unmount like 5 times until it finally 'took'. This process worked perfectly the first time through. the ONLY thing not mentioned that I encountered was once I went into the diskutility app and clicked on the ssd, i was prompted to autofix. I clicked ignore. otherwise, all went perfectly! (BTW yes I was in recovery mode) <comment198355> The current partition will be splitted into 2 different equally sized partitions then. If you click apply it finally will fail. Instead you may add a fat32 partition with `gpt add ...` named Bootcamp in the free space and later delete it with Bootcamp Assistant. I can't test this though. <comment198492> Ok, I have question. Why didn't you use the Boot Camp Assistant application to remove the bootcamp windows partition in the first place? Is this option not available when you have a fusion drive? The web site [Set up a Windows partition on your Mac](http://support.apple.com/en-us/HT204009) for Boot Camp 5.1 details the remove procedure. Also, could you give the model identifier of your apple computer? <comment198493> @MattONeill There might be better/faster solutions than my suggested. I'm still working on it and can't confirm it yet. The main hurdle is the fact that a lot of people in the same situation do something ostensibly (i hope that's the correct word) obvious to them: use Disk Utility to remove the Windows partition. Instead Bootcamp Assistant should be used to remove Windows 7/8, the additional EFI and expand the OS X volume (and underlying CoreStorage volumes) to the full size. <comment198683> David, the very first thing i tried was using BCA to remove it. It failed and said I had to repair the disk. <comment198684> Klanomath I tried exactly that -- adding a windows partition but it failed. <comment198697> But before @klanomath's `gpt add ...` you would need to 1) boot to internet recovery. 2) enter `distutil unmountDisk ...`. 3) Now do `gpt add ...` then follow with 4) `gpt label ...`. Anyway, what you are saying is that it wouldn't matter, because BCA already failed before you removed the partition using Disk Utility. <comment198955> I have (hopefully) some final questions. You removed the bootcamp window partition and restored your OS X partition. What happen to the tiny recovery partitions? Are they now gone? They were shown as TYPE Apple_Boot in the original output of the `distutil list` that you posted. It would be useful to post the output of `diskutil list` and `distutil cs list` to compare to the originals. BTW, I is assume your model identifier is iMac15,1. When you installed windows, could you tell if windows is using BIOS or EFI mode? (i.e. Does windows see the disk as an MBR or GPT disk?) <comment204130> @klanomath I need your help please  http://apple.stackexchange.com/q/173512/115245