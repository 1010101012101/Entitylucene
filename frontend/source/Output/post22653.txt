Lion Terminal remembers sudo password after quitting <body> I've been using Lion since its release, and I noticed today, for the first time, that Terminal did not prompt me for a password when I typed in a codesudo/code command, if I emclose/em and emreopen/em Terminal within the five-minute window, but wait longer than five minutes after reopening the application to enter another codesudo/code command.  Is it being cached somewhere as a result of Lion's new "remember the state of the application" feature? Can I turn off this setting? It seems rather insecure.  I've also tried using the kbdCommand/kbd + kbdOption/kbd + kbdQ/kbd combination, as well as exiting Terminal before quitting the application, to no avail (also within the five minute timeout window).  For the record, I don't recall seeing this behaviour before I updated to 10.7.1, but I may be wrong.  Can anyone else replicate this for me and confirm my suspicion, before I log a bug with Apple?  hr  strongEDIT/strong: Apparently my question isn't clear. I want to know if this is normal, or a bug:  ul liIssue codesudo/code command. I am prompted for a password./li liClose Terminal before codesudo/code timeout takes effect (within five minutes)./li liOpen Terminal again, and wait emmore than five minutes/em before issuing codesudo/code again./li liIssue codesudo/code command. I am emnot/em prompted for a password./li /ul  <answer22655> By default, codesudo/code retains authentication state for 5 minutes (this is not new to Lion). This default timeout can be controlled with the codetimestamp_timeout/code setting in strong/etc/sudoers/strong (use codevisudo/code to edit). See codeman 5 sudoers/code for more.  It can also be reset individually by removing the timestamp directory for the user, e.g. codesudo rmdir /var/db/sudo/username/code  This is not related to the application state feature introduced in Lion (controllable via strongSystem Preferences - General - Restore windows when quitting and re-opening apps/strong).  <answer22665> This is normal, and an inherent consequence of the way codesudo/code handles its 5-minute don't-need-to-reauthenticate window.  When you authenticate to codesudo/code, it records your emaccount/em as having authenticated.  Because the authentication is tied to your account (not a Terminal session or something like that), it's still valid if you quit &amp; reopen Terminal, log out &amp; back in, or even switch to a different session type (e.g. console login vs. SSH session vs. cron job running as your user ID, etc). I'm not certain offhand if it survives a reboot -- if not, it's because there's a step in the system startup process that wipes the timestamp files.  BTW, you can clear your own timestamp file with codesudo -K/code.  <comment25237> I'm not asking about the default timeout. I'm asking whether it's normal that the timeout seems to stop until another `sudo` is performed after opening Terminal. <comment25239> Ah, I missed that part. The timeout is actually measured when sudo runs, based on the difference between the current time and the timestamp on the time stamp directory (/var/db/sudo/username). So unless your clock stops ticking, the timeout should never pause. It does however also get refreshed when another sudo is executed from the same user, so check for that (by monitoring the timestamp directory to see if the timestamp gets refreshed when you don't use sudo yourself). Good luck in hunting that down :) <comment25243> That's the behaviour I'm seeing: it seems to pause and only starts going once someone issues another `sudo`, whether me or another user. So is it a bug on mine or everyone's computer? <comment25247> Cannot reproduce this here (Lion 10.7.1), seems to work as intended: I run `sudo ls`, quit Terminal, wait 6 minutes and `sudo` asks for a password again, as expected. As I said, the most likely cause is another process refreshing the timeout by running sudo as the same user. To find out which process, run `sudo fs_usage -wf filesys|grep /var/db/sudo` (while not actively using sudo anywhere else). <comment25257> If you open Terminal within the five minute window and then wait six minutes after it is open, can you repeat the behaviour? <comment25696> It has been this way since at least the first beta version of OSX I have used.. <comment25708> @cftarnas: even longer than that, since OS X's implementation of `sudo` came from earlier unixes which worked the same way. <comment25709> @Gordon: I would suspect so! More recent Linux distros that I have used like RHEL require the password at every invocation, but that could be that I've only been using the enterprise linux distros for the last 10 years or so.