Why is my BASH script being executed twice? I'm using launchd <body> I have one plist associated with this launchd agent. There is one agent listed in launchctl list, and it calls my bash script, called rc.wakeup, whenever the mac is woken up from sleep. There is only one copy of this bash script. The code in the bash script is not repeated. Despite this, the bash script is being executed twice in its entirety. Why?  I have created an install bash script and an uninstall bash script. I have been executing these in series an an attempt to get both scripts working so this program can be used by anyone. I believe improperly installing/uninstalling these files has caused the problem, although I have no idea why it would.  Here is the plist:  precode&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN"    "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt; &lt;plist version="1.0"&gt; &lt;dict&gt;     &lt;key&gt;Label&lt;/key&gt;     &lt;string&gt;de.bernhard-baehr.sleepwatcher&lt;/string&gt;     &lt;key&gt;ProgramArguments&lt;/key&gt;     &lt;array&gt;             &lt;string&gt;/usr/local/sbin/sleepwatcher&lt;/string&gt;             &lt;string&gt;-V&lt;/string&gt;             &lt;string&gt;-s /etc/rc.sleep&lt;/string&gt;             &lt;string&gt;-w /etc/rc.wakeup&lt;/string&gt;     &lt;/array&gt;     &lt;key&gt;RunAtLoad&lt;/key&gt;     &lt;true/&gt;     &lt;key&gt;KeepAlive&lt;/key&gt;     &lt;true/&gt; &lt;/dict&gt; &lt;/plist&gt; /code/pre  Here is the install script I use to install the program:   precode#!/bin/bash sudo mkdir -p /usr/local/sbin /usr/local/share/man/man8 sudo cp ~/Desktop/mysecureview/sleepwatcher_2.2/sleepwatcher /usr/local/sbin sudo cp ~/Desktop/mysecureview/sleepwatcher_2.2/sleepwatcher.8     /usr/local/share/man/man8  mkdir ~/mysecureview mkdir ~/mysecureview/log mkdir ~/mysecureview/pics  cp ~/Desktop/mysecureview/imagesnap-master/imagesnap ~/mysecureview/imagesnap  mkdir ~/Library/LaunchAgents cp ~/Desktop/mysecureview/sleepwatcher_2.2/config/de.bernhard-baehr.sleepwatcher-20compatibility.plist ~/Library/LaunchAgents/de.bernhard-baehr.sleepwatcher-20compatibility.plist  launchctl load ~/Library/LaunchAgents/de.bernhard-baehr.sleepwatcher-20compatibility.plist  sudo cp ~/Desktop/mysecureview/sleepwatcher_2.2/config/rc.wakeup /etc/rc.wakeup sudo cp ~/Desktop/mysecureview/sleepwatcher_2.2/config/rc.wakeup /etc/rc.sleep  cp ~/Desktop/mysecureview/num.txt ~/mysecureview/num.txt cp ~/Desktop/mysecureview/logs.txt ~/mysecureview/logs.txt cp ~/Desktop/mysecureview/compile.bash ~/mysecureview/compile.bash cp ~/Desktop/mysecureview/uninstall ~/mysecureview/uninstall  mkdir ~/mysecureview/logs.txt echo "========================" echo "~Installation Succesful~" echo "========================" /code/pre  here is the uninstallation script:  precode#!/bin/bash launchctl unload ~/Library/LaunchAgents/de.bernhard-baehr.sleepwatcher-20compatibility.plist; rm ~/Library/LaunchAgents/de.bernhard-baehr.sleepwatcher-20compatibility.plist sudo rm /etc/rc.wakeup sudo rm /etc/rc.sleep  sudo killall sleepwatcher sudo rm -rf /Library/StartupItems/SleepWatcher  launchctl unload de.bernhard-baehr.sleepwatcher launchctl remove de.bernhard-baehr.sleepwatcher  rm ~/mysecureview/num.txt rm ~/mysecureview/compile.bash rm ~/mysecureview/imagesnap rm ~/mysecureview/logs.txt  for i in {1..100} do         p=".txt"         x="$i$p"         rm ~/mysecureview/log/$x done  rmdir ~/mysecureview/log  echo "====================="   echo "~Uninstall Successful" echo "=====================" /code/pre  Here is the actual script being executed when the computer is woken up:  precodefor user in `echo 'show State:/Users/ConsoleUser' | scutil | awk     '/kCGSSessionUserNameKey/ { print $3 }'`; do         home=`eval echo ~$user`         if [ -x "$home/.wakeup" ]; then                 logger -t $0 "executing .wakeup of user $user"                 su - $user -c "$home/.wakeup"         fi done  #The following is the MySecureView script used to capture the picture and its information. cd ~/mysecureview  # take a picture. ./imagesnap  #get the log index. Create a variable for and iterate the index. numPics=$(cat ~/mysecureview/num.txt) numPics=$[numPics+1] jpg=".jpg" index="$numPics$jpg"  #We only allow 100 log entries to exist at a time. if [ $numPics == 100 ]; then         numPics=1  fi  #temp storage for the newest picture. cp ~/mysecureview/snapshot.jpg ~/mysecureview/pics/$index  rm ~/mysecureview/snapshot.jpg rm ~/mysecureview/date.txt  # temporary storage for the most recent log entry. date=$(date) entry="$numPics $date"  logNum="$numPics.txt" echo "$entry" &gt; ~/mysecureview/log/$logNum  #store the index for next use. echo "$numPics" &gt; ~/mysecureview/num.txt  #compile each and every log entry .txt file into the logs.txt file. bash compile.bash /code/pre  <answer190567> There's a lot going on here.  You've got a daemon called SleepWatcher 2.2 which is being kept alive by codelaunchd/code. It supposedly runs your code/etc/wakeup.rc/code script on computer wake. Your script then calls the program codeimagesnap/code.  Your script is being executed twice. I'd first look at codelaunchctl list/code and then codeps/code to see if SleepWatcher is running two instances. If not, then  I'd point the finger at SleepWatcher calling the on-wake script twice.  Unless you want to dig into SleepWatcher's source, you will need to make your script resilient to multiple calls. Maybe codetouch/codeing a lock file at the beginning of execution and removing it some seconds after completion? Your script would then check for the existence of this lock file and abort if it exists.  PS: I'd put your codewakeup.rc/code file somewhere in the user's home folder, not in system-wide code/etc/code because it's a user-level launchd agent, not a root-level one. Maybe code~/mysecureview/.wakeup/code.  <answer242856> I had this problem, but fixed it with the following commands in Terminal:  precode$ sudo launchctl unload /Library/LaunchDaemons/de.bernhard-baehr.sleepwatcher.plist $ sudo rm /Library/LaunchDaemons/de.bernhard-baehr.sleepwatcher.plist /code/pre  <comment226276> I was using very familiar setting some time ago. Could You check what's inside `~/.wakeup` script? `rc.wakeup` in my setting was only launching this file and `imagesnap` job was done from `~/.wakeup`. <comment298844> This will uninstall the `launchd` script.