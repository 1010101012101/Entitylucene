Custom Local DNS entry ignored <body> I'm using dnsmasq to route requests to code.lh/code hosts to my vagrant server currently running on code192.168.0.5/code on Mac OSX 10.6.  codescutil --dns/code returns the correct resolver info:  precoderesolver #9   domain : lh   nameserver[0] : 192.168.0.5 /code/pre  But ping (and also the browser) is unable to resolve the domain:  precodeping root.blah.lh ping: cannot resolve root.blah.lh: Unknown host /code/pre  I added code192.168.0.5/code to my list of DNS servers in my network settings, and it's sitting at the top of the list, above code8.8.8.8/code - seems to be getting completely ignored.   codesudo killall -HUP mDNSResponder/code and codesudo dscacheutil -flushcache/code apparently have no effect.   How can I get code.lh/code hosts to resolve to code192.168.0.5/code correctly?  hr  (the stuff below this line is historical, and has been moved here after Alan Shutko's answer indicating that codenslookup/code is not a useful analysis tool in this case)  codenslookup/code is also unable to resolve the domain:  precodenslookup blah.lh Server:     8.8.8.8 Address:    8.8.8.8#53  ** server can't find blah.lh: NXDOMAIN /code/pre  I also tried adding code127.0.0.1/code to my DNS server list in network settings (at the top), which produces a lookup on local, viz:  precodenslookup blah.lh Server:     127.0.0.1 Address:    127.0.0.1#53  Name:   blah.lh Address: 127.0.0.1 /code/pre  <answer83593> I'm assuming you are using Mac OS X, since you mention codescutil/code. nslookup doesn't use the same mechanisms as the rest of the OS:  From codeman nslookup/code:     Mac OS X NOTICE      The nslookup command does not use the host name and address resolution or the DNS query routing mechanisms used by other processes running on Mac OS X.  The results of name   or address queries printed by nslookup may differ from those found by other processes that use the Mac OS X native name and address resolution mechanisms.  The results of         DNS queries may also differ from queries that use the Mac OS X DNS routing library.   <comment96247> I see the same notice in man host and dig.  Do you know if there is a command line utility that does not carry this restriction? <comment96258> `dscacheutil -q host blah.lh` might work. If it does, I'll update my answer. Do other commands (notably Safari) work?  The command-line tools probably use /etc/resolv.conf <comment96374> I am using OSX, yes - thanks, I'll update my question. Using other methods doesn't work either, `ping blah.lh` returns `ping: cannot resolve root.blah.lh: Unknown host` and attempts through the browser return a server not found message. I don't know if the `dscacheutil -q host blah.lh` was for me or the other guy, but when I ran it just in case it gave me a list of hosts from my `/etc/hosts` file.