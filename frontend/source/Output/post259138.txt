macOS Sierra kernel panic during shutdown or restart <body> Few weeks ago I noticed disturbing behaviour of my MacBook. Sometimes, but not very often, during shutdown or restart phase - just before the power should went off - macOS displays Kernel Panic screen.  I spent some time investigating the issue, I've tried resetting SMC controller and NVRAM and recently I've performed clean installation of macOS Sierra. But unfortunately even after clean reinstallation of operating system problem still occurs from time to time.  What's interesting, this error only occurs during shutdown of my computer, I've never encountered kernel panic during usual day work with MacBook.  My MacBook is MacBook Pro Mid 2014 - 15" and OS X version is 10.12.1.  Below is one of Kernel Panic logs.  precodeAnonymous UUID:       CD65628C-9304-CFD1-A28B-5646A9941250  Fri Oct 28 19:58:51 2016  *** Panic Report *** panic(cpu 0 caller 0xffffff801ea065ea): Kernel trap at 0xffffff801e969d90, type 14=page fault, registers: CR0: 0x000000008001003b, CR2: 0x0000000000000008, CR3: 0x000000001a379001, CR4: 0x00000000001627e0 RAX: 0x0000000000000000, RBX: 0xffffff920a48b7d0, RCX: 0x0000000000000002, RDX: 0xffffff80484eee00 RSP: 0xffffff920a48b6c0, RBP: 0xffffff920a48bab0, RSI: 0x0000000000000000, RDI: 0xffffff80484eee00 R8:  0x0000000000000000, R9:  0x0000000000000000, R10: 0x00000000ffffffff, R11: 0xffffff80246ce000 R12: 0xffffff80484eee00, R13: 0x0000000000000023, R14: 0xfffffffff0000000, R15: 0x0000000000000000 RFL: 0x0000000000010246, RIP: 0xffffff801e969d90, CS:  0x0000000000000008, SS:  0x0000000000000010 Fault CR2: 0x0000000000000008, Error code: 0x0000000000000000, Fault CPU: 0x0, PL: 0  Backtrace (CPU 0), Frame : Return Address 0xffffff920a48b350 : 0xffffff801e8f368c  0xffffff920a48b3d0 : 0xffffff801ea065ea  0xffffff920a48b5b0 : 0xffffff801e8a5743  0xffffff920a48b5d0 : 0xffffff801e969d90  0xffffff920a48bab0 : 0xffffff801e968ab6  0xffffff920a48bb10 : 0xffffff801edb3f26  0xffffff920a48bb40 : 0xffffff801eb1bda9  0xffffff920a48bbc0 : 0xffffff801eb1b6b6  0xffffff920a48bc00 : 0xffffff801eb1fa72  0xffffff920a48bc80 : 0xffffff801eb2ad04  0xffffff920a48bd20 : 0xffffff801eb20e83  0xffffff920a48bd50 : 0xffffff801eb1ace7  0xffffff920a48bdc0 : 0xffffff801ed851eb  0xffffff920a48be80 : 0xffffff801ed98f75  0xffffff920a48bf50 : 0xffffff801ee276da  0xffffff920a48bfb0 : 0xffffff801e8a5f46   BSD process name corresponding to current thread: launchd  Mac OS version: 16B2555  Kernel version: Darwin Kernel Version 16.1.0: Thu Oct 13 21:26:57 PDT 2016; root:xnu-3789.21.3~60/RELEASE_X86_64 Kernel UUID: 8941AC1C-B084-37DE-8A34-4CE638C5CFC9 Kernel slide:     0x000000001e600000 Kernel text base: 0xffffff801e800000 __HIB  text base: 0xffffff801e700000 System model name: MacBookPro11,2 (Mac-3CBD00234E554E41)  System uptime in nanoseconds: 4875086622163 last loaded kext at 4839093484198: com.apple.macos.driver.AppleUSBEthernetHost  8.0.1 (addr 0xffffff7fa1781000, size 49152) last unloaded kext at 185858500902: com.apple.driver.AppleXsanScheme    3 (addr 0xffffff7fa0b3a000, size 40960) loaded kexts: com.apple.macos.driver.AppleUSBEthernetHost 8.0.1 com.apple.driver.AppleBluetoothMultitouch   92 com.apple.driver.AudioAUUC  1.70 com.apple.driver.AGPM   110.23.11 com.apple.driver.ApplePlatformEnabler   2.7.0d0 com.apple.driver.X86PlatformShim    1.0.0 com.apple.filesystems.autofs    3.0 com.apple.driver.AppleOSXWatchdog   1 com.apple.driver.AppleGraphicsDevicePolicy  3.13.74 com.apple.driver.AppleUpstreamUserClient    3.6.4 com.apple.driver.AppleHDA   278.23 com.apple.driver.pmtelemetry    1 com.apple.iokit.IOUserEthernet  1.0.1 com.apple.iokit.IOBluetoothSerialManager    5.0.1f7 com.apple.driver.AppleIntelHD5000Graphics   10.2.0 com.apple.driver.AppleBacklight 170.9.10 com.apple.Dont_Steal_Mac_OS_X   7.0.0 com.apple.driver.AppleHV    1 com.apple.iokit.BroadcomBluetoothHostControllerUSBTransport 5.0.1f7 com.apple.driver.AppleSMCLMU    208 com.apple.driver.AppleMCCSControl   1.2.13 com.apple.driver.AppleCameraInterface   5.57.0 com.apple.driver.AppleIntelFramebufferAzul  10.2.0 com.apple.driver.AppleIntelSlowAdaptiveClocking 4.0.0 com.apple.driver.AppleLPC   3.1 com.apple.driver.AppleThunderboltIP 3.0.8 com.apple.driver.AppleUSBCardReader 404.20.1 com.apple.driver.AppleUSBTCButtons  251 com.apple.driver.AppleUSBTCKeyboard 251 com.apple.AppleFSCompression.AppleFSCompressionTypeDataless 1.0.0d1 com.apple.AppleFSCompression.AppleFSCompressionTypeZlib 1.0.0 com.apple.BootCache 40 com.apple.filesystems.hfs.kext  366.1.1 com.apple.iokit.IOAHCIBlockStorage  295.20.1 com.apple.driver.AppleAHCIPort  326 com.apple.driver.AirPort.Brcm4360   1110.4.1a8 com.apple.driver.AppleSmartBatteryManager   161.0.0 com.apple.driver.AppleACPIButtons   5.0 com.apple.driver.AppleRTC   2.0 com.apple.driver.AppleHPET  1.8 com.apple.driver.AppleSMBIOS    2.1 com.apple.driver.AppleACPIEC    5.0 com.apple.driver.AppleAPIC  1.7 com.apple.nke.applicationfirewall   172 com.apple.security.quarantine   3 com.apple.security.TMSafetyNet  8 com.apple.driver.AppleBluetoothHIDKeyboard  197 com.apple.driver.AppleHIDKeyboard   197 com.apple.driver.IOBluetoothHIDDriver   5.0.1f7 com.apple.driver.AppleMultitouchDriver  368.4 com.apple.driver.AppleInputDeviceSupport    76.4 com.apple.kext.triggers 1.0 com.apple.driver.DspFuncLib 278.23 com.apple.kext.OSvKernDSPLib    525 com.apple.iokit.IOSerialFamily  11 com.apple.iokit.IOSurface   153.1 com.apple.iokit.IOBluetoothHostControllerUSBTransport   5.0.1f7 com.apple.iokit.IOBluetoothHostControllerTransport  5.0.1f7 com.apple.iokit.IOBluetoothFamily   5.0.1f7 com.apple.driver.AppleHDAController 278.23 com.apple.iokit.IOHDAFamily 278.23 com.apple.iokit.IOAudioFamily   205.11 com.apple.vecLib.kext   1.2.0 com.apple.driver.AppleSMBusController   1.0.14d1 com.apple.driver.AppleBacklightExpert   1.1.0 com.apple.iokit.IONDRVSupport   2.4.1 com.apple.driver.AppleGraphicsControl   3.13.74 com.apple.driver.X86PlatformPlugin  1.0.0 com.apple.driver.AppleSMC   3.1.9 com.apple.AppleGraphicsDeviceControl    3.13.74 com.apple.iokit.IOAcceleratorFamily2    288.15 com.apple.iokit.IOGraphicsFamily    2.4.1 com.apple.iokit.IOSlowAdaptiveClockingFamily    1.0.0 com.apple.driver.IOPlatformPluginFamily 6.0.0d8 com.apple.iokit.IOSCSIBlockCommandsDevice   394 com.apple.iokit.IOUSBMassStorageDriver  131.1.1 com.apple.iokit.IOSCSIArchitectureModelFamily   394 com.apple.driver.AppleUSBMultitouch 258 com.apple.driver.usb.IOUSBHostHIDDevice 1.1 com.apple.driver.usb.networking 5.0.0 com.apple.driver.usb.AppleUSBHostCompositeDevice    1.1 com.apple.driver.usb.AppleUSBHub    1.1 com.apple.driver.CoreStorage    540 com.apple.filesystems.hfs.encodings.kext    1 com.apple.iokit.IOAHCIFamily    288 com.apple.driver.AppleThunderboltDPInAdapter    4.5.5 com.apple.driver.AppleThunderboltDPAdapterFamily    4.5.5 com.apple.driver.AppleThunderboltPCIDownAdapter 2.0.5 com.apple.driver.AppleThunderboltNHI    4.1.6 com.apple.iokit.IOThunderboltFamily 6.2.3 com.apple.iokit.IO80211Family   1200.12.2 com.apple.driver.mDNSOffloadUserClient  1.0.1b8 com.apple.iokit.IONetworkingFamily  3.2 com.apple.driver.corecapture    1.0.4 com.apple.driver.usb.AppleUSBXHCIPCI    1.1 com.apple.driver.usb.AppleUSBXHCI   1.1 com.apple.driver.usb.AppleUSBHostPacketFilter   1.0 com.apple.iokit.IOUSBFamily 900.4.1 com.apple.iokit.IOUSBHostFamily 1.1 com.apple.driver.AppleUSBHostMergeProperties    1.1 com.apple.driver.AppleEFINVRAM  2.1 com.apple.driver.AppleBusPowerController    1.0 com.apple.driver.AppleEFIRuntime    2.0 com.apple.iokit.IOHIDFamily 2.0.0 com.apple.iokit.IOSMBusFamily   1.1 com.apple.security.sandbox  300.0 com.apple.kext.AppleMatch   1.0.0d1 com.apple.driver.AppleKeyStore  2 com.apple.driver.AppleMobileFileIntegrity   1.0.5 com.apple.driver.AppleCredentialManager 1.0 com.apple.driver.DiskImages 444.20.3 com.apple.iokit.IOStorageFamily 2.1 com.apple.iokit.IOReportFamily  31 com.apple.driver.AppleFDEKeyStore   28.30 com.apple.driver.AppleACPIPlatform  5.0 com.apple.iokit.IOPCIFamily 2.9 com.apple.iokit.IOACPIFamily    1.4 com.apple.kec.Libm  1 com.apple.kec.pthread   1 com.apple.kec.corecrypto    1.0  System Profile: AirPort: spairport_wireless_card_type_airport_extreme (0x14E4, 0x134), Broadcom BCM43xx 1.0 (7.21.171.47.1a8) Bluetooth: Version 5.0.1f7, 3 services, 27 devices, 1 incoming serial ports Thunderbolt Bus: MacBook Pro, Apple Inc., 17.1 Memory Module: BANK 0/DIMM0, 8 GB, DDR3, 1600 MHz, 0x80AD, 0x484D54343147533641465238412D50422020 Memory Module: BANK 1/DIMM0, 8 GB, DDR3, 1600 MHz, 0x80AD, 0x484D54343147533641465238412D50422020 USB Device: USB 3.0 Bus USB Device: Apple Internal Keyboard / Trackpad USB Device: BRCM20702 Hub USB Device: Bluetooth USB Host Controller Serial ATA Device: APPLE SSD SM0256F, 251 GB Model: MacBookPro11,2, BootROM MBP112.0138.B17, 4 processors, Intel Core i7, 2,2 GHz, 16 GB, SMC 2.18f15 Network Service: Wi-Fi, AirPort, en0 Graphics: Intel Iris Pro, Intel Iris Pro, Built-In /code/pre  <comment334044> Do you have a USB to ethernet adapter plugged in? - If you unplug this adapter before shutting down, does the problem disappear? <comment335029> No, I don't use USB to ethernet adapter. However, recently this problem did not happen to me so maybe one of the macOS udpates resolved it somehow?