Do /etc/resolver/ files work in Mountain Lion for DNS resolution? <body> Can anyone tell me if adding a file under /etc/resolver will work for DNS resolution using a DNS server other than what is handed out via DHCP ?  My issue is that I want to use OpenDNS for a clients home DNS resolution in order to take advantage of the filtering and anti scam capabilities but the massive disadvantage is that here in Australia things such as Apple content are delivered by a CDN (Akamai) which will then server content using a US based delivery point.   What I want to do is have the DNS server address handed out via DHCP to be the local router address (DNSMasq using OpenDNS DNS servers) and then, for example, place a file called apple.com under /etc/resolver with the following line:  precodenameserver 203.12.160.35 /code/pre  The idea is that any DNS request to apple.com would be resolved by a TPG (my ISP) DNS server rather than the local routers DNSMasq daemon using OpenDNS servers.  So I have done this and the output of strongscutil --dns/strong is:  precodeDNS configuration  resolver #1   search domain[0] : harland   nameserver[0] : 192.168.10.1   nameserver[1] : 192.168.10.1   if_index : 4 (en2)   reach    : Reachable,Directly Reachable Address  resolver #2   domain   : local   options  : mdns   timeout  : 5   order    : 300000  resolver #3   domain   : 254.169.in-addr.arpa   options  : mdns   timeout  : 5   order    : 300200  resolver #4   domain   : 8.e.f.ip6.arpa   options  : mdns   timeout  : 5   order    : 300400  resolver #5   domain   : 9.e.f.ip6.arpa   options  : mdns   timeout  : 5   order    : 300600  resolver #6   domain   : a.e.f.ip6.arpa   options  : mdns   timeout  : 5   order    : 300800  resolver #7   domain   : b.e.f.ip6.arpa   options  : mdns   timeout  : 5   order    : 301000  resolver #8   domain   : apple.com   nameserver[0] : 8.8.8.8  DNS configuration (for scoped queries)  resolver #1   search domain[0] : harland   nameserver[0] : 192.168.10.1   nameserver[1] : 192.168.10.1   if_index : 4 (en2)   flags    : Scoped   reach    : Reachable,Directly Reachable Address macbookair:resolver /code/pre  Now the output of an nslookup on apple.com is:  precodemacbookair:resolver ilium007$ nslookup apple.com Server:     192.168.10.1 Address:    192.168.10.1#53  Non-authoritative answer: Name:   apple.com Address: 17.149.160.49 Name:   apple.com Address: 17.172.224.47  macbookair:resolver  /code/pre  So I am not using the TPG DNS server - I am still resolving against 192.168.10.1 which is the local router. Does the order of the resolvers matter ? ie. the entry created after I place the apple.com file in /etc/resolver is resolver #8:  precoderesolver #8   domain   : apple.com   nameserver[0] : 8.8.8.8 /code/pre  I would really like a way to make this work - any help would be appreciated.  <answer82006> This question seems a bit old, but I'm going to answer it anyways as I had a similar problem:  strongYes, this works./strong  Your strongfirst problem/strong is that you obviously have the wrong IP (code8.8.8.8/code instead of code203.12.160.35/code) in code/etc/resolver/apple.com/code. Verify that the contents of this file is really:  precodenameserver 203.12.160.35 /code/pre  Then codescutil --dns/code should have an entry like this:  precoderesolver #8   domain   : apple.com   nameserver[0] : 203.12.160.35 /code/pre  The strongsecond problem/strong is that you tried to verify it using codenslookup/code which does not use the DNS resolution mechanisms of OS X. If you look at the man page of codenslookup/code you will find this:  precodeMac OS X NOTICE    The nslookup command does not use the host name and address resolution or the DNS     query routing mechanisms used by other processes running on Mac OS X.  The results of     name or address queries printed by nslookup may differ from those found by other    processes that use the Mac OS X native name and address resolution mechanisms. The     results of DNS queries may also differ from queries that use the Mac OS X DNS routing     library. /code/pre  To strongcheck your DNS config/strong you could do  precodedns-sd -G v4 images.apple.com /code/pre  and verify if it yields the same IP as   precodenslookup images.apple.com 203.12.160.35 /code/pre  <comment120433> It's also worth noting this can be used to specify a nameserver for a specific top level domain. For example if file is named "dev" then all lookups  for "example.dev" will be sent to that nameserver. This is useful for company intranets, especially when you're not on the company LAN (eg: when connecting to a VPN) <comment163072> `Your first problem is that you obviously have the wrong IP (8.8.8.8)` Not necessarily; `8.8.8.8` and `8.8.4.4` are Google's DNS servers. How they obtained those octets is beyond me. <comment172533> As of 10.10, it seems that there is no /etc/resolver directory present. <comment197622> You need to create it yourself in 10.10. <comment324700> i'm on os x 10.11 and the etc/resolve folder just seems to be ignored. :( <comment324703> ok, WORKS on os x 10.11.... the folder is etc/resolver, not "etc/resolve" as in my previous comment haha <comment324806> @RaduSimionescu you are correct! `etc/resolve` is ignored ;-) I am still looking for a replacement for `dig`.