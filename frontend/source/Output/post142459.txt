How to eject my external drive when my Mac refuses because of Spotlight? <body> I have plugged an external disk to my Mac. Now, I want to eject it. But my Mac stubbornly refuses and says that an application may be using the disk.  I have not launched any app neither opened any file from the disk.  I have downloaded and installed the app emWhat's Keeping Me?/em This app is quite nice. She tells me that the process codemds/code is using my disk.  I have killed the process codemds/code and several processes codemdworker/code. These are for Spotlight. But such processes get spawned again.  strongHow can I eject emmy/em disk from emmy/em Mac ?/strong  I have Mac OS X 10.6.8.  <answer142462> To prevent Spotlight from indexing the drive, create a plaintext file in TextEdit with no content, just the title of .metadata_never_index and save to the external. Uncheck use extension "txt" ... and tell TextEdit that yes, you do want to save it with a dot at the front (which will make it invisible.)  I'm not sure whether that will stop it right now, but it will prevent it in future.  Alternatively, make this Applescript into an app, to force eject [with the usual caveats on force-ejecting...]... credit to The MacTipper Blog  precode    property show_credits : true  set the_volumes to do shell script "ls /Volumes/" tell application "Finder" to set the_HD to path to home folder as string  set ejectable_volumes to {} repeat with i in (every paragraph of the_volumes)     if the_HD does not start with i then         set end of ejectable_volumes to (i as string)     end if end repeat if (count of items of ejectable_volumes) is 0 then     tell me to activate     display dialog "Sorry, but there are no ejectable volumes." else if (count of items of ejectable_volumes) is 1 then     tell me to activate     set the_result to item 1 of ejectable_volumes as string     display dialog ("Eject \"" &amp; the_result &amp; "\"?") buttons {"No", "Yes"} default button 2 cancel button "No"     set the_path to quoted form of ("/Volumes/" &amp; the_result as string)     do shell script "hdiutil eject -force " &amp; the_path else     tell me to activate     set the_result to choose from list ejectable_volumes with prompt "Please choose a volume to eject (You can select multiple items):" with multiple selections allowed     if the_result is not false then         repeat with j in the_result             set the_path to quoted form of ("/Volumes/" &amp; j as string)             do shell script "hdiutil eject -force " &amp; the_path         end repeat     end if end if  if show_credits is true then     tell me to activate     set the_credits to button returned of (display dialog "This applescript brought to you by The MacTipper Blog.\n\nhttp://mactipper.com" buttons {"Don't Show Again", "Visit TMB", "OK"} default button 3) as string     if the_credits is "Don't Show Again" then         set show_credits to false     else if the_credits is "Visit TMB" then         open location "http://mactipper.com"     end if end if /code/pre  <answer142666> If you can’t disconnect a drive for any reason, you can simply Shutdown the computer. When the computer is off, you can safely disconnect the drive. Then start the computer. This will not only enable you to safely unplug the drive, but it will ensure that the mds process restarts in case it is actually hung.  If you have decided that you don’t want to use Spotlight with that drive, all you have to do to stop it from being indexed is add the drive to the Privacy tab of the Spotlight pane of System Preferences. Spotlight will ignore the drive.  Alternatively, if you do want to use Spotlight on that drive, then building an index the first time the computer sees the drive is a necessary evil. Once the index is built, it is updated with every change to every file, so it won’t make you wait again. But if you don’t see a progress bar in the Spotlight menu, then it is likely that mds is hung. Again, just Shutdown the computer in that case, and disconnect your drive.  <answer142669> Simply turn indexing off for the drive and erase the contents of the journal on the volume. To do so, open Terminal and enter the following command:  precodesudo mdutil -Ei off "/Volumes/Name_of_Drive" /code/pre  You must run this procedure as an admin. Enter your password when prompted. A reboot may be required.  Alternatively, as suggested by Simon White, just shut down the machine and then unplug the drive. The caveat is that the drive will start indexing when connected again, however.   <answer162680> Another simple option is to eject it through Disk Utilities.  <answer178765> You may try to unmount it from the command line:  precodediskutil unmount /Volumes/MountPoint /code/pre  or with force:  precodediskutil unmount force /Volumes/MountPoint /code/pre  If it's still failing, check what's using your disk:  precodesudo fs_usage -w -f filesys | grep Volumes /code/pre  Or using codelsof/code:  precodesudo lsof | grep Volumes /code/pre  (Some processes only turn up when lsof is run as administrator.)  hr  To disable temporary Spotlight, run:  precodesudo mdutil -a -i off /code/pre  Then codesudo mdutil -a -i on/code to re-enable.  hr  Other apps which can be helpful: Whats Keeping Me.  <answer187586> You can try to force-quit Finder, this worked for me. Finder was hanging onto the USB drive, so force-quiting and re-launching released whatever the hang was.  <answer224368> You can tell Spotlight that it should never index that drive and then you won't have to worry about it.  In the 10.11 System Preferences there's an entry for 'Spotlight', which has a tab named 'Privacy'.  Click '+', select your drive, and you're done.  Just close System Preferences, wait a few seconds for the system to notice the update, and you should be able to eject.  Now it won't start indexing the disk the next time you connect, so you won't have the problem again in the future.    <answer224992> Often I find it is mds that is preventing me from unmounting a volume.   precodesudo killall mds /code/pre  And then (quickly) try ejecting the volume again.   In my case, I am mounting another Mac's main volume on my current Mac. I don't  want to disable Spotlight as I want indexing to resume when the external volume is returned to the other Mac (as its boot up volume).   <comment167877> Thank you. But... "to force eject [with the usual caveats on force-ejecting...]" This is worrying. If I agreed to taking the risk of corrupting the disk, I would simply unplug it. <comment167878> Then set the no spotlight flag & wait for it to see it & stop indexing. <comment168067> Or, you can run `sudo diskutil unmountDisk force /Volumes/Name_of_Volume` from Terminal to forcibly do so. That script is not necessary. <comment168068> @NicolasBarbulesco These are not the same. Forcibly unmounting a volume is not the same as pulling the plug. In the latter case, you are physically removing power from the device in a sudden way, which, as one imagines, can cause damage to a magnetic disk rotating at several K rpm. In the former, your simply forcing the device to unmount the volume. The disk then spins down properly, and you pull the plug as you normally would.  It's much safer. <comment168119> @njboot - I did not try your `diskutil` command. But I did try the equivalent with Disk Utility - to no avail. <comment168120> Surely I can shut down the Mac. But this is not an option. <comment168121> I like the idea of having Spotlight know my disk. But I tried to make Spotlight ignore my disk for the moment. By using the System Prefs → Spotlight. This did not work : "Impossible because of an unknown error." Great error message ! Apple must have hired a defector from Micro$oft ! I also tried letting time act. I went to work and let Spotlight index the disk during the whole day. The evening, I came back, and the problem was still the same. <comment168185> @NicolasBarbulesco Disk Utility doesn't offer the "force" option - only it's command line counterpart. At any rate, I suggest trying the command listed in my response above before proceeding. Cheers. <comment190260> Did you read the comments in Tetsujin's answer? **Disk Utility doesn't offer the "force" option** <comment190318> Just try it. A simple eject through Disk Utilities always works for me when an external drive of any kind won't eject because it's "in use." <comment191080> I did try to eject the drive with Disk Utility. But this did not work. <comment191214> Sorry to hear about that. Disk Utility ejects unmountable "in use" disks just fine on my unit which runs on 10.7.5. You might look into DiskWarrior. <comment192911> For whatever reason, using Disk Utility unmount command worked for me on a problem disk. <comment211800> Disk Utility does offer force option. `Usage:   diskutil u[n]mount [force] MountPoint` <comment221797> how would one do that ? force quit finder ? <comment261982> I just found out that Spotlight (mds, mds_store, mdworker) will not be listed when I run `lsof` as user.  However, `sudo lsof | grep Volumes` works fine.  ("Whats Keeping Me" has an "As Administrator" checkbox, respectively.) <comment263734> simply stopping the process is enough. `sudo mdutil -i off "/Volumes/Name_of_Drive"` (`-E` erases and rebuilds the index). It should start scanning again next time you mount the drive. to disable scanning that drive permanently, use `-d` (`sudo mdutil -d "/Volumes/Name_of_Drive"`). See all these arguments and more by typing `mdutil` into your command line. <comment264236> Option+Command+ESC ! <comment265858> I actually think the problem is that the `mds` is either not telling the system that it finished with the drive or not quitting after it's done and by doing so, holds the drive until the process is killed somehow (like a shutdown). If I see the `mds` not using the CPU while claiming to use the drive, I force eject the drive. <comment273900> Liked the tip, but please don't suggest exiting after the command...I didn't notice and lost the history of output I had there. <comment278014> @njboot - No. The command "history" just gives me the history of the commands entered, it does not give me back their result. <comment278173> @bauerMusic - How do you "force eject the drive"? <comment278175> @njboot - This is interesting. What are the risks in force-ejecting with your command? <comment278176> But can this work in the Spotlight case of my question? <comment278177> Interesting. Maybe the "quickly" is key! <comment278180> I tried that. That did not work. See my comment here: http://apple.stackexchange.com/questions/142459/how-to-eject-my-external-drive-when-my-mac-refuses-because-of-spotlight#comment168121_142666 <comment278218> @NicolasBarbulesco The 'Force eject drive' is an option the system offers after a while. If you try to eject, it should say 'Trying to eject your drive' (or similar) and after a minute or so (of being unsuccessful), show another popup that have an option to force eject. <comment283570> Thanks! This is the only answer that worked for me other than force ejecting, which I wouldn't want to do. <comment283798> After issuing the mdutil command, I still could not eject the disk. So I also issued "sudo killall mds", and that made it work. <comment315183> Though today just using "Eject" in Disk Utility did not eject it, it did give me a very useful clue. While I figured Spotlight was indexing the disk, Disk Utility told me _Failed to eject "Time Machine disk 3" because it is currently in use by "1Password mini"_.