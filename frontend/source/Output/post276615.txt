2011 MacBook wakes immediately on sleeping, even after change of HD and OS <body> I have a 2011 MacBook Pro. About six months ago it developed a sleep problem - it wakes immediately on sleeping. Occasionally when recently rebooted it will sleep as it ought, but usually not. On each waking, the log says this:  codelocalhost kernel[0]: (AppleACPIPlatform) Wake reason: ?/code  Not helpful!  I've done all the obvious things (network, bluetooth, USB) and tried to reset PRAM and SMC, though the latter doesn't seem actually to reset.  More info which might be relevant - occasionally when the Mac is powered off and I plug in the charger, it boots.  Last week the original HD failed and I had a SSD installed. I also upgraded the OS from Snow Leopard to Sierra. The fault has persisted through both these changes. This leads me to wonder if this is a hardware issue.  Only other info about the machine is that it suffered the degrading-solder problem common to 2011 MacBooks. Since it happened before the Apple Repair scheme kicked in, I had it resoldered by a third-party.  Thanks for any help!  Edit: Further to this: a few things I've found: a process called 'hidd' is listed as Preventing Sleep in the Activity Monitor. Its parent is called 'launchd (1)'. And   precodepmset -g assertions /code/pre  gives the following:  precodeIdle sleep preventers: IODisplayWrangler /code/pre  And finally - when I put the computer to sleep, it very briefly sleeps (1s or so), but then HD starts up again. The sleep light goes off, and does not wink or re-light, but the display stays off. To 'wake' it again takes 10-15 seconds.  <answer276619> Since you're not actually sure if the SMC reset did anything, I'd reset both the NVRAM and SMC again (and in that order) using the steps below.   Before doing so, ensure you have no external hardware connected and that you're using the strongbuilt-in keyboard/strong.  strongReset the NVRAM/strong  Older Macs had what's called Parameter RAM (PRAM), newer Macs use Non-Volatile Random-Access Memory (NVRAM). Here’s how to reset the NVRAM on your particular MBP:  ol listrongShut down your machine./strong Yes, a full shut down, not just logging out./li liPress the kbdpower button/kbd emand then/em press the kbdcommand/kbdkbdoption/kbdkbdp/kbdkbdr/kbd keys. You have to make sure you press these keys strongbefore/strong the gray screen appears or it won’t work./li listrongHold those keys down/strong until your Mac reboots again and you here the startup chime./li liLet go of the keys and let your Mac reboot normally./li /ol  strongNote:/strong When you log back in you strongemmay/em/strong need to readjust some of your system preferences (e.g. speaker volume, screen resolution, startup disk selection, time zone information, etc).  strongReset the SMC/strong  To reset the SMC on your particular MBP, follow these steps:  ol liShut down your computer/li liKeep the power cable strongplugged in/strong./li liPress at the same time kbdshift/kbdkbdoption/kbdkbdcontrol/kbd (on the strongleft/strong side of the built-in keyboard) strongemand/em/strong the kbdpower button/kbd/li liLet go/li liTurn your computer back on with the power button./li /ol  After resetting both the NVRAM and SMC, use your computer to determine if the issue still persists. IF it does, then test the hardware as per the instructions below.  strongRun Apple Hardware Test/strong  Your model MBP uses Apple Hardware Test. To use this, follow these steps:  ol liShut down your MacBook Pro /li liRestart your MacBook Pro/li liPress and hold the kbdD/kbd key before the gray startup screen appears./li liAfter a while, Apple Hardware Test (AHT) will start./li liWhen prompted, select your language and click the right arrow. /li liWhen the AHT console appears, you can choose to run Basic tests by clicking the Test button. However, I suggest you select the "Perform extended testing" checkbox before you click the Test button./li liYour test results will appear in the window in the bottom-right of the console./li /ol  strongNote 1:/strong that the extended test will take some time. Take a note of the results and report back.   strongNote 2:/strong If pressing and holding the kbdD/kbd key at Step 3 doesn't work, start again at Step 1 and, at Step 3 press and hold both the kbdOption/kbdkbdD/kbd keys instead. This will try and run diagnostics from the internet instead, so you will need to allow more time for it to complete.  <comment348179> A couple things....Did you have a look at this support article re:  [waking unexpectedly](https://support.apple.com/en-us/HT204760)?  Also, when you say you "changed" the OS, did you upgrade (meaning install one on top of the other) or did you do a clean install (meaning you started with a clean slate).  If the first, can you try doing a clean install?  The reason being is if the problem existed in software, backing up and restoring it to the same computer will just bring the problem over to your new drive. <comment348182> Thanks for this! The OS was installed by the computer shop on the new disc - I take it that counts as a clean install? I did then restore a Time Machine backup with my data, after the new OS had been installed. <comment348183> Not necessarily, but they probably (I would hope) did.  However, to go from Snow L. to Sierra, you have to go to El Cap first then upgrade to Sierra.  Then a restore of Apps and data from TM can "reintroduce" issues.  I would start from a clean OS installation.  If the problem goes away, you know it's a software issue.  Then start restoring things gradually, testing as you go until it fails.  Then you will know what's causing it. <comment348190> Many thanks for this. I reset the PRAM (definitely successful). Tried to reset the SMC, but as always when I try this, the Mac powers up when I press the key combo, which shouldn't happen. Odd, this. The extended hardware test passed without comments. <comment348192> But if Sierra was installed on a clean (brand new) SSD, would it have ever had to go via El Cap? <comment348193> No.  Sierra will go on clean and I am assuming that's what they did.  If they didn't ( I have seen techs do some really weird things), then they would have had to use El Cap.  It's best to verify and be sure. <comment348197> Some more info just posted in the question