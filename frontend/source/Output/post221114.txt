How to fix broken GPT, GUID and unmountable, no type volumes? <body> I have a Macbook Pro with retina, Yosemite and 500GB hard drive. I tried to install Windows using Bootcamp and accidentally deleted a partition, now my Mac cannot boot anymore. This is the output from codesudo gpt -r show disk0/code  precode  gpt show: disk0: Suspicious MBR at sector 0     start       size  index  contents         0          1         MBR         1          1         Pri GPT header         2         32         Pri GPT table        34          6                 40     409600      1  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B    409640  776617328      2  GPT part - FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF 777026968    1269760      3  GPT part - 48465300-0000-11AA-AA11-00306543ECAC 778296728        616          778297344  198807552      4  GPT part - 48465300-0000-11AA-AA11-00306543ECAC 977104896        131          977105027         32         Sec GPT table 977105059          1         Sec GPT header /code/pre  I only need to make the second partition at index 2 and type codeFFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF/code to be bootable again. This partition has FileVault 2 enabled.  But right now, I have no clue on what to do.  P/S: I Followed the instruction from @klanomath Boot from a external hard drive with full Yosemite system but at the last command to change the partition type  precodesudo gpt add -b 409640 -s 776617328 -i 2 -t 53746F72-6167-11AA-AA11-00306543ECAC /dev/disk0 /code/pre  It got this error:  precodegpt add: /dev/disk0: Suspicious MBR at sector 0 gpt add: /dev/disk0: error: no space available on device /code/pre  This is the output from codesudo gpt -r show /dev/disk0/code  precode   gpt show: /dev/disk0: Suspicious MBR at sector 0      start       size  index  contents          0          1         MBR          1          1         Pri GPT header          2         32         Pri GPT table         34          6                  40     409600      1  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B     409640  776617328      2  MBR part 218  777026968    1269760      3  GPT part - 48465300-0000-11AA-AA11-00306543ECAC  778296728        616           778297344  198807552      4  MBR part 175  977104896        131           977105027         32         Sec GPT table  977105059          1         Sec GPT header /code/pre  strongProgress:/strong  I have executed command codesudo gpt destroy /dev/disk0/code  But when I tried to add the first partition back using this command codesudo gpt add -b 40 -s 409600 -i 1 -t C12A7328-F81F-11D2-BA4B-00A0C93EC93B /dev/disk0/code  I got this error straight away   precodegpt add: /dev/disk0: Suspicious MBR at sector 0 gpt add: /dev/disk0: error: no primary GPT header; run create or recover /code/pre  Now the command codesudo gpt -r show /dev/disk0/code gives me this  precode   gpt show: /dev/disk0: Suspicious MBR at sector 0      start       size  index  contents          0          1         MBR          1     409639              409640  776617328      2  MBR part 218  777026968    1269760      3  MBR part 175  778296728        616           778297344  198807552      4  MBR part 175  977104896        164 /code/pre  strongProgress 2:/strong  I executed codesudo gpt create /dev/disk0/code and got this error:  precodegpt create: /dev/disk0: Suspicious MBR at sector 0 gpt create: /dev/disk0: error: device contains a MBR /code/pre  and I executed this command codesudo fdisk -i -a hfs /dev/disk0/code to write new MBR and executed codesudo gpt create /dev/disk0/code again but got the same error codegpt create: /dev/disk0: error: device contains a MBR/code  Now codesudo gpt -r show /dev/disk0/code gives me this  precode      start       size  index  contents       0          1         MBR       1         62               63  977104997      1  MBR part 175 /code/pre  strongProgress 3 and final :D/strong  Firstly a big thank to @klanomath, without the help, I couldn't go this far.  I executed this command codesudo gpt create -fp /dev/disk0/code  And this command codesudo gpt recover /dev/disk0/code to get the secondary GPT header  After that, I executed codesudo gdisk /dev/disk0/code and the disk is mounted and functions properly  <answer221119> The content type of the second partition is wrong. Instead of FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF it has to be 53746F72-6167-11AA-AA11-00306543ECAC.  To edit the content type you have to boot to Internet Recovery Mode and use codegpt/code. Additionally the fourth partition will be removed (probably the "deleted" partition). Please check that it doesn't contain any data!  strongPreparation:/strong  ul liDetach any external drive (especially your external Time Machine backup drive)/li liRestart to Internet Recovery Mode by pressing kbdalt/kbd kbdcmd/kbd kbdR/kbd at startup.  The prerequisites are the latest firmware update installed, either ethernet or WLAN (WPA/WPA2) and a router with DHCP activated.br On a 50 Mbps-line it takes about 4 min (presenting a small animated globe) to boot into a recovery netboot image which usually is loaded from an Apple/Akamai server.  I recommend ethernet because it's more reliable. If you are restricted to WIFI and the boot process fails, just restart your Mac until you succeed booting.  Alternatively you may start from a bootable installer thumb drive (preferably Yosemite or El Capitan) or a thumb drive containing a full system (preferably Yosemite or El Capitan). If you boot to a full system and login as admin you have to prepend codesudo/code to execute special commands like codegpt .../code!/li /ul  strongRemove the fourth partition and change the content type of the second partition/strong  ul liBooted to Internet Recovery Mode open Utilities â†’ Terminal in the menubar and enter:  codediskutil list/code to get the disk identifiers. Below I assume that your main disk has the disk identifiers disk0./li liFirst you have to remove the fourth partition (only do that if it is really empty!):  precodegpt -r show /dev/disk0 #to get an overview /code/pre  To delete a partition with codegpt/code the disk has to be unmounted:  precodediskutil unmountDisk /dev/disk0 gpt remove -i 4 /dev/disk0 #remove the fourth partition /code/pre/li liThen you have to change the content type of the second partition:  precodediskutil unmountDisk /dev/disk0 gpt remove -i 2 /dev/disk0 #remove the second partition gpt add -b StartBlock -s NumberOfBlocks -i 2 -t 53746F72-6167-11AA-AA11-00306543ECAC /code/pre  In your case:  precodegpt add -b 409640 -s 776617328 -i 2 -t 53746F72-6167-11AA-AA11-00306543ECAC /dev/disk0 /code/pre/li liNow you should be asked for the FileVault passphrase. Enter it./li liEnter codeexit/code and quit emTerminal/em/li liCheck the main volume emMacintosh HD/em for errors/li liQuit emDisk Utility/em and reboot to your main volume/li /ul  hr  strongAddendum: Removing the stubborn MBR/strong  You can either use codefdisk/code or codegpt/code to remove the MBR at block 0. If you use an admin user prepend codesudo/code using the codegpt ..../code commands.  ul liFirst get an overview again. This step is important before you destroy the gpt, because it's the source to rebuild it from scratch:  precodegpt -r show /dev/disk0 /code/pre/li liThen delete the gpt:  precodediskutil unmountDisk /dev/disk0 gpt destroy /dev/disk0 /code/pre/li liCreate a new GUID partition table:  precodegpt create -f /dev/disk0 /code/pre/li liFinally add all partitions one by one:  precodegpt add -b 40 -s 409600 -i 1 -t C12A7328-F81F-11D2-BA4B-00A0C93EC93B /dev/disk0 gpt add -b 777026968 -s 1269760 -i 3 -t 426F6F74-0000-11AA-AA11-00306543ECAC /dev/disk0 gpt add -b 409640 -s 776617328 -i 2 -t 53746F72-6167-11AA-AA11-00306543ECAC /dev/disk0 /code/pre  emHint/em: You may add and remove partitions in an arbitrary order if you keep the right index number. In the above commands I added the third partition (code... -i 3 .../code) before adding the second partition (code... -i 2 .../code). You don't have to unmount disk0 then because the partitions i=1 and i=3 don't contain auto-mounted volumes while the second partition does.  strongemI missed to detect the wrong partition type/em/strong of your Recovery HD (the third partition with the index number 3) in the first part of my answer. Therefore I used:  precodegpt add -b 777026968 -s 1269760 -i 3 -t 426F6F74-0000-11AA-AA11-00306543ECAC /dev/disk0 /code/pre  above instead of the strongwrong/strong  precodegpt add -b 777026968 -s 1269760 -i 3 -t 48465300-0000-11AA-AA11-00306543ECAC /dev/disk0 #wrong partition type of the Recovery HD /code/pre  to re-add it.  If you still get errors, tackle the MBR with codefdisk/code. If you use an admin user prepend codesudo/code using the codefdisk .../code commands.:  precodefdisk -i -a hfs /dev/disk0 /code/pre  and add the gpt entries with codegpt .../code outlined above./li /ul  hr  strongResizing the main volume to fill the whole disk/strong  Finally you probably want to resize the main volume to fill the whole disk.  ul liGet an overview with:  precodediskutil cs list /code/pre  You may have several CoreStorage Logical Volume Groups, if you boot from an external drive with a full system! Use the proper one!/li liResize the whole stack:  precodediskutil cs resizeStack lvUUID size #lvUUID is the UUID of the Logical Volume. Usually it's the last one listed. /code/pre  Booted to Yosemite you can use code0g/code for the size to expand it. 0g is a "magical" size here.  precodediskutil cs resizeStack lvUUID 0g /code/pre  Booted to El Capitan you have to use a real size like code500g/code. If you get an error use a slightly smaller size like code499g/code orcode499500m/code.  precodediskutil cs resizeStack lvUUID 500g /code/pre/li /ul  <comment267800> I'm still stuck. Firstly, after executing "gpt delete -i 2 /dev/disk0", it said "gpt: unknown command: delete" so I assume that I need to change 'delete' to 'remove'. But at the last command that I need to execute, it said "gpt add: /dev/disk0: error: no space available on device" <comment267801> I have followed your instruction and posted the results in the question, thanks <comment267828> I have followed the second instruction, unfortunately I'm stuck again with the error "gpt add: /dev/disk0: error: no primary GPT header; run create or recover". I have added the progress <comment267832> no worries, I just updated my progress. looks like I couldn't get rid of the MBR <comment267836> I have successfully recover the stubborn FileVault, you may want to update your answer with my final progress, thanks so much :D <comment297596> Well that would've been useful to know when this same exact problem happened to me a few months ago...klanomath never fails to amaze me with how much he knows about macs. I ended up losing all my data. <comment316078> I had to unmount twice, once before gpt remove and once before gpt add.