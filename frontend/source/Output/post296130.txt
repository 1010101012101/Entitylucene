Macbook Pro 8,2 Crashing During Login <body> strongSpecs:/strong  Early 2011 15" Macbook Pro (Sierra).  ul liRAM upgraded October 2016, 16GB Corsair/li liSSD upgraded July 2016, 256GB SanDisk/li liBattery replaced January 2016/li liLogic board replaced February 2016 (replaced as result of qualifying for the gfx card recall.)/li /ul  Basically a year old computer   strongProblem:/strong  Yesterday it started crashing while signing into a user account -- while connected to power. The flow is as follows:  ol liBoot (Grey screen with Apple logo)/li liDisplay user accounts/li liSign in to user's account/li liSign in progress bar/li liCrash at ~1/3 complete progress bar/li liReboots automatically/li /ol  strongBackground:/strong  Over the past 1.5 months the battery has become seemingly defunct.  ul liInitially, it would crash after ~2 minutes of use after waking from sleep and running off battery. It would need to be connected to power in order to start up successfully./li liAfter about 2 months of this, it began crashing while running off battery regardless of whether or not it had woken from sleep./li liNow it (usually) crashes within seconds if the charger is disconnected./li /ul  When I went to the Genius Bar I was told it may be a bad battery. It passed all of their diagnostics, however, it seemed to heuristically lose charge quickly and the capacity came in at over 100% -- which is only expected from batteries right out of the factory.  This all seemed like a case of a bad battery until yesterday. Maybe these issues are not connected... but seems like they could be.  strongTroubleshooting:/strong  So far I've tried:  ol liTried 4 separate properly 85W MagSafe chargers. Same results.  ul liSo it's not the bad battery./li /ul/li liBooted from an external bootable drive (running El Capitan). Same results.  ul liSo, not an issue with the SSD nor corrupt OS (I think. Booting from an external drive should bypass the internal drive completely. Yes?*)/li /ul/li liRan the extended hardware test. No issues found.  ul liSo, not an issue with RAM. I am going to try and run memtest if I can get access to a shell./li /ul/li liLeft it idle for ~15 minutes at the login screen. Does not crash./li liSpent ~15 minutes in the guest account (the safe account -- only Safari access) and messed around. Does not crash./li liSpent ~2 hours of time in the "BIOS" pages. Hardware test, Disk Utility, etc. Does not crash./li liBooting into safe mode (Cmd + S) displays codeBuildError(): error building a user of type/code/li /ol  strongHypothesis:/strong  It seems the issue is occurring when the boot program is loading the OS. I don't know a ton about how things work at this level, but my guess is the logic board is the culprit and is failing during this handoff.  strongQuestions:/strong  ol liAny ideas?/li liCould a bad battery somehow bust up power management -- or is it entirely isolated whilst connected to external power?/li liHave I done enough to rule out corrupt software, SSD, and RAM?/li /ol  <answer296230> This question is an excellent example of the unintended consequences of not addressing a small issue (bad battery) and having it create new issues (crashing).  While it may emappear/em that a bad battery and a crashing hard drive are mutually exclusive, they, in fact, are intrinsically linked.  This however, doesn't preclude the possibility that their are other issues at play, but in order to address efficiently and accurately, you have to eliminate the initial problem.  h3The Battery/h3  You have a at least an 18 month old battery assuming it was "brand new" when you installed it and not sitting around in a warehouse for a few years prior to your purchase.  Your battery reports its remaining capacity based on a emcalculation/em of certain variables - the current voltage and the draw.  It can't measure the batteries ability to emhold/em a charge.  So reading a battery that says 100% only means it's 100% emat that moment/em.  h3Sleeping on a Dead Battery/h3  When your MacBook Pro detects a low battery condition, it will put the MacBook Pro to sleep.  Going to sleep powers everything down except the RAM;  its current state is kept in RAM so you can quickly resume right where you left off.  If your power gets low enough, it will go into hibernation mode writing the RAM to disk.  If your battery dissipates so quickly as to not allow this state to be saved, you run the risk of corrupting data (and not just your pictures of cats and toasters, but data critical to macOS).  strongThis sounds like the issue you described./strong  br  h3Troubleshooting/h3  ol listrongEliminate your battery from the equation./strong  Disconnect it from the logic board.  Remove the back cover and using a strongplastic/strong tool (like a spudger) remove the battery connection. strongemYour MacBook doesn't need a battery to function/em/strong.  You don't need to replace the back cover for the next step, just be certain you are not putting the MBP on a conductive material.  You can put it on a towel if you want.  img src="https://i.stack.imgur.com/7kjQ3m.png" alt="enter image description here"/li listrongCheck the health of your SSD./strong  Boot into recovery mode, and run the following commands to check the SMART status of your SSD:  precode$ diskutil verifyDisk disk0 $ diskutil info disk0 | grep -i smart /code/pre  Most likely, you will get "Verified" with the last command meaning your SSD is good.  Anything other than "verified" consider getting a new disk.  If everything is good, you can move on to fixing the login issue/li /ol  br  h3Fix Login Issue/h3  ol listrongCreate a new user in Terminal./strong  Boot into Single User Mode and then issue the following commands  precodefsck -y mount -uw / /code/pre  What you are doing is checking the drive and then mounting the code//code volume as read/write.  To create a new user, follow the instructions already written up in this post being sure to adjust the values for your specific needs.  Reboot by typing codereboot/code  If you can log in with this newly created account, you corrupted your User Profile and your best bet is to use this new account and/or create another one.  If it solves your issue, you can skip to step 3.  If you can't log in, continue to the next step./li listrongReinstall macOS/strong.  Operating under the assumption you have made Time Machine backups, reinstall the OS.  Migrate your backed up data using Migration Assistant.  /li listrongRun your Mac, but don't disconnect the power./strong (you're not on battery, remember?) Use your Mac as you normally would.  If you have no problems, then the issue of it crashing is solved.  /li listrongReplace the battery./strong  If everything works, you would have resolved the login crash issue and narrowed down the cause to the failing battery. See this Answer:     When they [batteries] do die, it's always best to get a good quality replacement   battery from a reputable manufacturer. The 2006 MBP uses an external   battery so it's fairly easy to find replacements - and some even come   with generous warranties.   Even though it's written to address a 2006 MBP, the explanation and recommendations are still valid and relevant./li /ol  <comment373995> Idea 1: Changing chargers does not rule out much about the battery, only the different AC-adapers. <comment373996> Idea 2: How hot is the unit getting? Can you boot into Recovery-SafeBoot (cmd+r+shift)? How long and how warm does it last there? Also: boot verbose mode (cmd+v on boot or sudo nvram boot-args="-v"). That it seems to work in Guest-account is mysterious. <comment374011> 2011 is an old battery, over its 5 years lifetime. <comment374012> Did you try to boot into safe mode ? that would exclude any bad drivers ? <comment374013> did you try the Single user mode ? Start or restart your Mac. As soon as you hear the startup tone, press and hold Command-S on the keyboard. Keep holding down those keys until you see a black screen with white lettering.  Now you might see where it gets stuck ! <comment374015> if the Single user mode did not help you try the Verbose mode. Command (⌘) – V key combination for Verbose Mode. <comment374138> @Buscar웃 The formatting at the top didn't come out right -- but the battery is only 1.5 years old. Also, I mentioned above I did try Safe user -- it does not permit log in (I think due to File Vault). <comment374139> @LangLangC Not any hotter than normal. I ended up dropping it off at a repair shop last night... Hoping it's the battery as that's still under warranty. <comment374154> Thanks for a wonderful answer Allan (and the edit!). I was going to try disconnecting the battery but my tools are currently in storage.   I should be hearing back today regarding my computer. Let's hope it's the bad battery as my credit card gives me an added 1 year to the warranty provided by Apple *crossing fingers*