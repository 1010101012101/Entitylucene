bad wake/sleep crashes in 10.9.3 turned into severe screen blackout crashes in 10.9.4 <body> While still on 10.9.3 I had the occasional problem of the OS crashing upon wake-up. Every couple of weeks, made more frequent by using an external monitor.  Now on 10.9.4, which was supposed to fix sleep/wake crashes, this has worsened significantly. The frequency is up to about once a day and crashes now occur also during active use with the screen turning black. The OS is still running the background. Pressing the power button, for example, produces a feedback ping, but there's no way to continue working other than a hard reset.  I'm posting this here to find out whether anybody has found a way to combat these debilitating crashes.  System: MacBook Pro Retina 15'', 10.9.4, CPU 2.3 GHZ Intel Core i7, RAM 8GB; 2012 model  The latest crash report of a screen blackout in mid-operations is below.  precodeAnonymous UUID:       1F803B2D-6B61-15DC-E69E-DF43E3B065F7 Thu Jul 31 16:21:56 2014 panic(cpu 0 caller 0xffffff7faa286f7c): "GPU Panic: [&lt;None&gt;] 2 0 a0 d9 9 8 0 3 : NVRM[0/1:0:0]: Read Error 0x00000100: CFG 0xffffffff 0xffffffff 0xffffffff, BAR0 0x102c00000 0xffffff8139c1d000 0x0e7150a2, D0, P1/4\n"@/SourceCache/AppleGraphicsControl/AppleGraphicsControl-3.6.22/src/AppleMuxControl/kext/GPUPanic.cpp:127 Backtrace (CPU 0), Frame : Return Address 0xffffff813995b530 : 0xffffff8027e22f79  0xffffff813995b5b0 : 0xffffff7faa286f7c  0xffffff813995b680 : 0xffffff7fa88f5ca4  0xffffff813995b740 : 0xffffff7fa89bff5a  0xffffff813995b780 : 0xffffff7fa89bffca  0xffffff813995b7f0 : 0xffffff7fa8bf49de  0xffffff813995b860 : 0xffffff7fa89e2a81  0xffffff813995b880 : 0xffffff7fa88fc75d  0xffffff813995b930 : 0xffffff7fa88fa268  0xffffff813995bb30 : 0xffffff7fa88fb308  0xffffff813995bc10 : 0xffffff7fa88a96b1  0xffffff813995bdb0 : 0xffffff7fa88a831a  0xffffff813995bdd0 : 0xffffff7faa25868c  0xffffff813995beb0 : 0xffffff7faa258568  0xffffff813995bf00 : 0xffffff7faa25720e  0xffffff813995bf20 : 0xffffff8027e4a20a  0xffffff813995bfb0 : 0xffffff8027ed7417        Kernel Extensions in backtrace:          com.apple.driver.AppleMuxControl(3.6.22)[32862231-50BC-3AF6-87A2-703321AE4F90]@0xffffff7faa278000-&gt;0xffffff7faa28bfff             dependency: com.apple.driver.AppleGraphicsControl(3.6.22)[AA46D551-BE0F-33DA-93A3-8F46197BB36F]@0xffffff7faa270000             dependency: com.apple.iokit.IOACPIFamily(1.4)[045D5D6F-AD1E-36DB-A249-A346E2B48E54]@0xffffff7fa91a7000             dependency: com.apple.iokit.IOPCIFamily(2.9)[4662B11D-2ECA-315D-875C-618C97CDAB2A]@0xffffff7fa84be000             dependency: com.apple.iokit.IOGraphicsFamily(2.4.1)[75D81741-64C1-3941-ADFA-9D6B6C434EE4]@0xffffff7fa884c000             dependency: com.apple.driver.AppleBacklightExpert(1.0.4)[E04639C5-D734-3AB3-A682-FE66694C6653]@0xffffff7faa273000          com.apple.nvidia.driver.NVDAResman(8.2.6)[6DAE3128-DB93-3F93-858C-F46ADE1368A2]@0xffffff7fa88a5000-&gt;0xffffff7fa8b18fff             dependency: com.apple.iokit.IOPCIFamily(2.9)[4662B11D-2ECA-315D-875C-618C97CDAB2A]@0xffffff7fa84be000             dependency: com.apple.iokit.IONDRVSupport(2.4.1)[D41125CE-69BD-32E7-9B1D-4E83431662DD]@0xffffff7fa888f000             dependency: com.apple.iokit.IOGraphicsFamily(2.4.1)[75D81741-64C1-3941-ADFA-9D6B6C434EE4]@0xffffff7fa884c000             dependency: com.apple.AppleGraphicsDeviceControl(3.6.22)[91D61DEC-2946-3790-8134-B808C016C4C9]@0xffffff7fa889f000          com.apple.nvidia.driver.NVDAGK100Hal(8.2.6)[EF73AF59-A574-3A5A-B410-7E4F2DA819B0]@0xffffff7fa8b24000-&gt;0xffffff7fa8cd0fff             dependency: com.apple.nvidia.driver.NVDAResman(8.2.6)[6DAE3128-DB93-3F93-858C-F46ADE1368A2]@0xffffff7fa88a5000             dependency: com.apple.iokit.IOPCIFamily(2.9)[4662B11D-2ECA-315D-875C-618C97CDAB2A]@0xffffff7fa84be000          com.apple.driver.AGPM(100.14.28)[FA3AB19A-6DB2-3CBA-B74F-012CB69E39D9]@0xffffff7faa255000-&gt;0xffffff7faa267fff             dependency: com.apple.iokit.IOPCIFamily(2.9)[4662B11D-2ECA-315D-875C-618C97CDAB2A]@0xffffff7fa84be000             dependency: com.apple.driver.IOPlatformPluginFamily(5.7.1d6)[67BEDCC9-E9AB-3F32-82CE-84729FB82C0A]@0xffffff7fa91b0000             dependency: com.apple.iokit.IONDRVSupport(2.4.1)[D41125CE-69BD-32E7-9B1D-4E83431662DD]@0xffffff7fa888f000             dependency: com.apple.iokit.IOGraphicsFamily(2.4.1)[75D81741-64C1-3941-ADFA-9D6B6C434EE4]@0xffffff7fa884c000             dependency: com.apple.AppleGraphicsDeviceControl(3.6.22)[91D61DEC-2946-3790-8134-B808C016C4C9]@0xffffff7fa889f000  BSD process name corresponding to current thread: kernel_task  Mac OS version: 13E28  Kernel version: Darwin Kernel Version 13.3.0: Tue Jun  3 21:27:35 PDT 2014; root:xnu-2422.110.17~1/RELEASE_X86_64 Kernel UUID: BBFADD17-672B-35A2-9B7F-E4B12213E4B8 Kernel slide:     0x0000000027c00000 Kernel text base: 0xffffff8027e00000 System model name: MacBookPro10,1 (Mac-C3EC7CD22292981F)  System uptime in nanoseconds: 15501712554143 last loaded kext at 14506533426803: com.apple.iokit.AppleBCM5701Ethernet    3.8.1b2 (addr 0xffffff7faa3bb000, size 233472) last unloaded kext at 14569577246251: com.apple.driver.AppleIntelMCEReporter    104 (addr 0xffffff7faa39b000, size 32768) loaded kexts: com.Cycling74.driver.Soundflower    1.5.2 com.apple.iokit.AppleBCM5701Ethernet    3.8.1b2 com.apple.filesystems.smbfs 2.0.2 com.apple.driver.AppleHWSensor  1.9.5d0 com.apple.filesystems.autofs    3.0 com.apple.iokit.IOBluetoothSerialManager    4.2.6f1 com.apple.driver.AppleMikeyHIDDriver    124 com.apple.driver.X86PlatformShim    1.0.0 com.apple.driver.AGPM   100.14.28 com.apple.driver.ApplePlatformEnabler   2.0.9d6 com.apple.driver.AppleHDA   2.6.3f4 com.apple.driver.AppleMikeyDriver   2.6.3f4 com.apple.driver.AudioAUUC  1.60 com.apple.GeForce   8.2.6 com.apple.driver.AppleUpstreamUserClient    3.5.13 com.apple.iokit.IOUserEthernet  1.0.0d1 com.apple.Dont_Steal_Mac_OS_X   7.0.0 com.apple.driver.AppleLPC   1.7.0 com.apple.driver.AppleHWAccess  1 com.apple.driver.AppleIntelHD4000Graphics   8.2.8 com.apple.driver.AppleSMCLMU    2.0.4d1 com.apple.driver.AppleIntelFramebufferCapri 8.2.8 com.apple.iokit.BroadcomBluetoothHostControllerUSBTransport 4.2.6f1 com.apple.driver.AppleSMCPDRC   1.0.0 com.apple.driver.AppleMuxControl    3.6.22 com.apple.driver.AppleMCCSControl   1.2.5 com.apple.driver.AppleThunderboltIP 1.1.2 com.apple.driver.AppleUSBTCButtons  240.2 com.apple.driver.AppleUSBTCKeyboard 240.2 com.apple.AppleFSCompression.AppleFSCompressionTypeDataless 1.0.0d1 com.apple.AppleFSCompression.AppleFSCompressionTypeLZVN 1.0.0d1 com.apple.AppleFSCompression.AppleFSCompressionTypeZlib 1.0.0d1 com.apple.BootCache 35 com.apple.driver.XsanFilter 404 com.apple.driver.AppleUSBHub    683.4.0 com.apple.iokit.IOAHCIBlockStorage  2.6.0 com.apple.driver.AppleSDXC  1.5.2 com.apple.driver.AirPort.Brcm4331   700.20.22 com.apple.driver.AppleAHCIPort  3.0.5 com.apple.driver.AppleUSBEHCI   660.4.0 com.apple.driver.AppleUSBXHCI   683.4.0 com.apple.driver.AppleSmartBatteryManager   161.0.0 com.apple.driver.AppleRTC   2.0 com.apple.driver.AppleACPIButtons   2.0 com.apple.driver.AppleHPET  1.8 com.apple.driver.AppleSMBIOS    2.1 com.apple.driver.AppleACPIEC    2.0 com.apple.driver.AppleAPIC  1.7 com.apple.driver.AppleIntelCPUPowerManagementClient 217.92.1 com.apple.nke.applicationfirewall   153 com.apple.security.quarantine   3 com.apple.driver.AppleIntelCPUPowerManagement   217.92.1 com.apple.iokit.IOEthernetAVBController 1.0.3b4 com.apple.driver.mDNSOffloadUserClient  1.0.1b5 com.apple.driver.AppleThunderboltPCIUpAdapter   1.4.5 com.apple.kext.triggers 1.0 com.apple.iokit.IOSCSIArchitectureModelFamily   3.6.6 com.apple.iokit.IOSerialFamily  10.0.7 com.apple.driver.DspFuncLib 2.6.3f4 com.apple.vecLib.kext   1.0.0 com.apple.iokit.IOAcceleratorFamily 98.22 com.apple.iokit.IOAudioFamily   1.9.7fc2 com.apple.kext.OSvKernDSPLib    1.14 com.apple.iokit.IOBluetoothFamily   4.2.6f1 com.apple.nvidia.driver.NVDAGK100Hal    8.2.6 com.apple.nvidia.driver.NVDAResman  8.2.6 com.apple.driver.AppleSMBusPCI  1.0.12d1 com.apple.iokit.IOSurface   91.1 com.apple.driver.X86PlatformPlugin  1.0.0 com.apple.driver.AppleHDAController 2.6.3f4 com.apple.iokit.IOHDAFamily 2.6.3f4 com.apple.driver.AppleSMC   3.1.8 com.apple.iokit.IOAcceleratorFamily2    98.22 com.apple.AppleGraphicsDeviceControl    3.6.22 com.apple.iokit.IOBluetoothHostControllerUSBTransport   4.2.6f1 com.apple.driver.IOPlatformPluginFamily 5.7.1d6 com.apple.driver.AppleGraphicsControl   3.6.22 com.apple.driver.AppleBacklightExpert   1.0.4 com.apple.iokit.IONDRVSupport   2.4.1 com.apple.driver.AppleSMBusController   1.0.12d1 com.apple.iokit.IOGraphicsFamily    2.4.1 com.apple.driver.AppleUSBMultitouch 240.9 com.apple.iokit.IOUSBHIDDriver  660.4.0 com.apple.driver.AppleThunderboltDPInAdapter    3.1.7 com.apple.driver.AppleThunderboltDPAdapterFamily    3.1.7 com.apple.driver.AppleThunderboltPCIDownAdapter 1.4.5 com.apple.driver.AppleUSBMergeNub   650.4.0 com.apple.driver.AppleUSBComposite  656.4.1 com.apple.driver.AppleThunderboltNHI    2.0.1 com.apple.iokit.IOThunderboltFamily 3.3.1 com.apple.iokit.IOUSBUserClient 660.4.2 com.apple.iokit.IO80211Family   640.36 com.apple.iokit.IONetworkingFamily  3.2 com.apple.iokit.IOAHCIFamily    2.6.5 com.apple.iokit.IOUSBFamily 683.4.0 com.apple.driver.AppleEFINVRAM  2.0 com.apple.driver.AppleEFIRuntime    2.0 com.apple.iokit.IOHIDFamily 2.0.0 com.apple.iokit.IOSMBusFamily   1.1 com.apple.security.sandbox  278.11.1 com.apple.kext.AppleMatch   1.0.0d1 com.apple.security.TMSafetyNet  7 com.apple.driver.AppleKeyStore  2 com.apple.driver.DiskImages 371.1 com.apple.iokit.IOStorageFamily 1.9 com.apple.iokit.IOReportFamily  23 com.apple.driver.AppleFDEKeyStore   28.30 com.apple.driver.AppleACPIPlatform  2.0 com.apple.iokit.IOPCIFamily 2.9 com.apple.iokit.IOACPIFamily    1.4 com.apple.kec.pthread   1 com.apple.kec.corecrypto    1.0 /code/pre  <answer140586> Seems to me like GPU failure. If the descrete GPU is dead, the these kinds of symptoms appear. If you try to connect an external monitor or use GPU dependent applications, the system will freeze and/or the screen will go black. You have to force shutdown it.  <answer140588> Actually you have Kernel Problems, which is bit more serious.  You can try repairing the Kernel (Operating system) , or reinstall it.  On top of already recommended Graphics fix (off) try following:  Reset your NVRAM/PRAM.  Also disable some of your special set ups (if you can live without them) ie. "X86PlatformShim"- or fix it. If you use Clover take care of it.  <answer157350> After getting many useful suggestions and none of them solving my problem, I went for a logic board exchange. After that I haven't had another blackout, 1.5 weeks and counting.  So, in conclusion what looked like a software problem was probably a faulty GPU on the logic board or something on the board that caused the GPU to fail.  Big thanks to Pratika and esp. Buscar who shared their expertise and helped me move towards the hardware solution. I appreciate it very much.  <comment165679> Looks like somethings wrong with graphics. Try disabling automatic graphics switching. <comment165681> Thanks for the tip. I will try that. Disabled automatic GPU switching under Preferences / Energy Saver and will report back whether that affects crashes. Over and out. <comment174919> Switched off "Automatic Graphics Switching" under Prefs/Energy Saver. Next crash came a little later than before but it still came. <comment174920> My MBP 15'' Retina has an integrated Intel HD Graphics 4000 and an NVIDIA GeForce GT 650M PCIe. I tried turning off graphics switching but it didn't do much. Next crash came a little later but it's not a fix.  And as far as I understand, there's no way to force the OS to use the integrated only as I would want to if the discrete one is dead. Turning off switching simply forces the discrete NVIDIA chip to be used all the time, doesn't it? <comment174924> I reinstalled and migrated after exchanging the monitor (broken pixels) and it was better for a while but the bliss didn't last and the OS is back to crashing every other day. <comment174935> Does it work in Safe mode ? <comment175119> @SeanJ Yes, turning off switching forces the discrete GPU all the time. You can do one thing. Download an app called gfxCardStatus. Install it and change the GPU to Intel HD Graphics. But it may not solve the issue if you put your Mac to sleep or connect an external monitor. The only option left sis to replace the logic board of your Mac. I have the same issue as yours, but mine is a 2011 MBP. You can check all the 2011 MBP are faulty and Apple is doing nothing about it. <comment177072> I reset the NVRAM and it seemed to delay the time to the next crash: 6 Oct to 14 Oct. Before that I experienced this crash every 1-3 days. Let me try the safe mode and get back to you. Thanks for the tips btw. <comment177073> This was the crash log after deleting NVRAM & disabling graphics switching. It seemed to delay the next crash but it unfortunately didn't prevent it. <comment177075> Since it didn't fit into the comments: http://1drv.ms/1yy36yb <comment177120> You are welcome, just come more often so we can move forward with this and hopefully close this as a success. <comment179446> related bug reports: http://forums.macrumors.com/showthread.php?t=1722832 (2014-4; solution: detaching from ext. screen before sleep), https://discussions.apple.com/thread/6014780?start=0&tstart=0 (2014-03; not resolved), https://discussions.apple.com/thread/5665501 (2013-12, not resolved), https://discussions.apple.com/thread/5548226 (2013-11 to 2014, not resolved), http://forums.macrumors.com/showthread.php?t=1553654 (2013-03; solution: removal of Bresink driver), http://bit.ly/1wdVO1C (2012-8, problem w Bluetooth, fixed by OS update 10.8.1),.. <comment179448> I tried Safe mode and it still crashes (crash report: http://1drv.ms/1we5MzU). How do I disable X86PlatformShim and identify other special setups? PS: Buscar, sorry this is taking so long but I'm working all day on other things and can only test intermittently. Plus, the bug only occurs every other day, so it takes some time to get a crash report. <comment179510> In this new crash report is mostly about your Graphics card/Chip and about X86PlatformShim which is a product of Clover boot loader. You installed it for some reason. Remove the Clover EFI boot loader. <comment179610> Clover boot loader was certainly all Greek to me. I had to look it up online (http://clover-wiki.zetam.org/Preface) but I certainly never messed around with a tool that allows one to run OS X on a PC. It's very weird that it appears in quite a few crash reports online (http://bit.ly/10qO4w8). <comment179614> Ok, so being a newb to this depth of OSX, I read up on Kernel extensions, found out that they are in /System/Library/Extensions, searched for the suspect that you indicated using: find . -name X86PlatformShim, and found out that it's in the extension ./IOPlatformPluginFamily.kext/Contents/PlugIns/X86PlatformShim.kext/Contents/MacOS/X86PlatformShim. Whatever that is. Moved the entire folder to the Desktop and restart. Let's see. <comment179616> The new OS certainly didn't fix anything. Yosemite 10.10 crashed on the same day with the following report: http://1drv.ms/1vUDUj3. Bummer. Had my hopes up. <comment179629> and? is it still alive :) <comment179868> Still alive so far but since the bug often took a while (hours to days) to reappear I'm not sure about this yet. Certainly looking good so far. Close to 24h w/o crash. <comment179976> Now, about 36h in, the OS didn't wake up from sleep again and had to be hard reset. This is the crash report: http://1drv.ms/1xnxKpX. How can X86PlatformShim still be listed despite no longer being in the Extensions folder?