How can Time Machine in Lion backup the volume content of a sparse bundle disk image? <body> Using Mac OS X 10.7 (Build 11A511), attempts to backup volume content with Time Machine have failed.   With a simple non-encrypted image I tried three approaches:   ol lithe traditional workaround, which reportedly works on Snow Leopard/li lithe coderemoveexclusion/code verb of codetmutil/code in Lion/li li(1) and (2) combined./li /ol  This leaves the question:   h1How can Time Machine backup .sparsebundle volume content?/h1  ul licontent of the volume, not the bands of the image./li /ul  h2Differences between Snow Leopard and Lion/h2  h3Finder preferences/h3  code~/Library/Preferences/com.apple.finder.plist/code  Within this file, the codeFXRecentFolders/code key contains an array of data.   Opening the required volume in Finder, then closing the window causes volume-related data to be written as a sub-key:   ul licodefile-data/code sub-keys in Snow Leopard/li licodefile-bookmark/code sub-keys in Lion. /li /ul  h3Time Machine preferences/h3  code/Library/Preferences/com.apple.TimeMachine.plist/code  The coderemoveexclusion/code verb of tmutil (manual page not yet published by Apple):   ul liseems to add — to the codeIncludedVolumes/code array of codecom.apple.TimeMachine.plist/code — key emdata/em that differs from the data found in codecom.apple.finder.plist/code/li lidoes strongnot/strong add a corresponding key emstring/em to the codeIncludedVolumeUUIDs/code array./li /ul  h2Relevant commands/h2  For a volume named strongmyVolume/strong  codedefaults read com.apple.finder FXRecentFolders | grep --before-context=1 myVolume/code  codediskutil information /Volumes/myVolume | grep UUID/code  h2A similar question, asked in 2010/h2  How can I get Time Machine to back up the contents of a File Vault while logged in?  ul lithat 2010 question focuses on FileVault 1 encrypted home directories in Snow Leopard/li lithis 2011 question, strongnot focused on FileVault/strong, is more broadly about content of volumes attached from sparse bundle disk images in Lion./li /ul  h3Other references/h3  How To: backup your File Vault home directory unencrypted (also works with Snow Leopard!) « Useful solutions (2009-12-12)  10.6: Let Time Machine backup File Vault while logged in — Mac OS X Hints (2010-01-27)  h2Test results/h2  To follow.   <comment22307> I wouldn't try to be too clever here. Backups need to be reliable first and foremost. Trying to hack something together that Apple has chosen not to support directly is asking for trouble. Just accept the limitations of using sparse bundles. Or migrate to FileVault2. <comment22334> Despite great care with backups, recently I discovered that for at least one volume: the **majority of Time Machine backups were useless** (file `sparsebundle-backups.txt` at http://www.wuala.com/grahamperrin/public/2011/07/27/a/?mode=gallery). Thanks to the `startbackup` verb in `tmutil` we might somehow automatically backup every time any volume is unmounted (I thought first of unsupported [MarcoPolo](http://www.symonds.id.au/marcopolo/), but it does not recognise eject/unmount) … hacking of a different nature. I'd like to explore multiple hacking avenues with focus on Time Machine. <comment22336> FileVault 2 is not applicable to anything other than the startup volume. (This question is broader than the home directory-focused question that was asked in 2010). I could encrypt using Core Storage, but any such volume will be unusable with Snow Leopard or less. For support purposes I most often need to use my removable media with machines without support for Core Storage, machines that do work with encrypted disk images. ICT support and encryption aside, there remain a variety of other use cases where sparse bundle disk images are desirable or required. <comment23234> Graham - could you edit this a bit? It's really TL;DR <comment23277> @bmike agreed. I'll put the test results elsewhere then sit on it for a few days before another edition …