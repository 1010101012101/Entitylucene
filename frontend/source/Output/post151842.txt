Yosemite Cannot Resolve Domain Names <body> So I know Apple removed codemDNSResponder/code in Yosemite, but it appears that a bunch of apps are still trying to interact with it and failing  precodeOct 20 10:57:00 Nicks-MacBook-Pro.local configd[25]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:8 Err:-1 Errno:61 Connection refused Oct 20 10:57:03 Nicks-MacBook-Pro.local ntpd[239]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:3 Err:-1 Errno:61 Connection refused Oct 20 10:57:03 Nicks-MacBook-Pro.local Spotify[604]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:88 Err:-1 Errno:61 Connection refused Oct 20 10:57:04 Nicks-MacBook-Pro.local configd[25]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:8 Err:-1 Errno:61 Connection refused Oct 20 10:57:06 Nicks-MacBook-Pro.local ntpd[239]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:3 Err:-1 Errno:61 Connection refused Oct 20 10:57:07 Nicks-MacBook-Pro.local configd[25]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:8 Err:-1 Errno:61 Connection refused Oct 20 10:57:09 Nicks-MacBook-Pro.local ntpd[239]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:3 Err:-1 Errno:61 Connection refused Oct 20 10:57:10 Nicks-MacBook-Pro.local configd[25]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:8 Err:-1 Errno:61 Connection refused Oct 20 10:57:12 Nicks-MacBook-Pro.local ntpd[239]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:3 Err:-1 Errno:61 Connection refused Oct 20 10:57:13 Nicks-MacBook-Pro.local configd[25]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:8 Err:-1 Errno:61 Connection refused Oct 20 10:57:15 Nicks-MacBook-Pro.local ntpd[239]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:3 Err:-1 Errno:61 Connection refused Oct 20 10:57:16 Nicks-MacBook-Pro.local configd[25]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:8 Err:-1 Errno:61 Connection refused Oct 20 10:57:18 Nicks-MacBook-Pro.local ntpd[239]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:3 Err:-1 Errno:61 Connection refused Oct 20 10:57:19 Nicks-MacBook-Pro.local configd[25]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:8 Err:-1 Errno:61 Connection refused Oct 20 10:57:21 Nicks-MacBook-Pro.local ntpd[239]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:3 Err:-1 Errno:61 Connection refused Oct 20 10:57:23 Nicks-MacBook-Pro.local configd[25]: dnssd_clientstub ConnectToServer: connect() failed path:/var/run/mDNSResponder Socket:8 Err:-1 Errno:61 Connection refused /code/pre  Chrome still works fine (is there a separate resolver in Chrome?) but Firefox does not, I can codedig google.com/code and it will return the correct results.  I've tried with both my ISP's DNS servers as well as code8.8.8.8/code/code8.8.4.4/code with no real difference.  The very weird thing is, if I restart I'll get a few minutes of fine performance before this happens again.  Any ideas?  h2Update/h2  Evidently if you unload/load codediscoveryd/code things start to work (past instructions have been to unload/load codemDNSResponder/code) at least for a little while:  precodesudo launchctl unload -w /System/Library/LaunchDaemons/com.apple.discoveryd.plist sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.discoveryd.plist /code/pre  This is what I have in my console after I load/unload. No idea what's relevant:  precode10/20/14 4:44:08.268 PM discoveryd[1333]: Basic Sockets GetProcessNameFromSocket() failed errno[57] err[-1] 10/20/14 4:44:08.268 PM discoveryd[1333]: Basic Sockets Unknown(-1), errno 0 UDS FD=3 10/20/14 4:44:08.268 PM discoveryd[1333]: Basic Sockets UDS FD=3 ERROR: failed to get effective user ID, errno 0 10/20/14 4:44:08.268 PM discoveryd[1333]: Basic SleepProxy BSP Server Disabled. Metric = 3373 10/20/14 4:44:08.272 PM discoveryd[1333]: AwdlD2d AwdlD2dInitialize: Initialized 10/20/14 4:44:08.273 PM discoveryd[1333]: D2D_IPC: Loaded 10/20/14 4:44:08.273 PM airportd[29]: _resetD2DConnection: Connection re-established to mDNSResponder D2D server 10/20/14 4:44:08.275 PM discoveryd_helper[254]: Detailed RemoteControl com.apple.discoveryd_helper XPC connection 0x7fa853800680: start (pid=1333, &lt;unknown&gt; not root) 10/20/14 4:44:08.277 PM configd[25]: network changed. 10/20/14 4:44:08.282 PM discoveryd[1333]: Basic RemoteControl com.apple.discoveryd Starting XPC Server 10/20/14 4:44:08.282 PM discoveryd[1333]: Basic DNSResolver etc/hosts file changed: Event 0x7ffab6b005e0 Flushed /etc/hosts cache 10/20/14 4:44:08.283 PM discoveryd[1333]: Basic RemoteControl com.apple.discoveryd.dnsproxy Starting XPC Server 10/20/14 4:44:08.283 PM discoveryd[1333]: AwdlD2d AwdlD2dStartAdvertisingPair: 'nicks-macbook-pro' Advertising service started 10/20/14 4:44:08.283 PM discoveryd[1333]: Basic SleepProxy Sleep Proxy Server is not enabled 10/20/14 4:44:08.284 PM discoveryd[1333]: AwdlD2d AwdlD2dStartAdvertisingPair: 'nicks-macbook-pro' Advertising service started 10/20/14 4:44:08.285 PM discoveryd[1333]: AwdlD2d AwdlD2dStartAdvertisingPair: '483e5cefffa5108400000000000008efip6arpa' Advertising service started 10/20/14 4:44:08.286 PM discoveryd[1333]: AwdlD2d AwdlD2dStopAdvertisingPair: 'nicks-macbook-pro' Advertising service stopped 10/20/14 4:44:08.286 PM discoveryd[1333]: AwdlD2d AwdlD2dStopAdvertisingPair: 'nicks-macbook-pro' Advertising service stopped 10/20/14 4:44:08.287 PM discoveryd[1333]: AwdlD2d AwdlD2dStartAdvertisingPair: 'nicks-macbook-pro' Advertising service started 10/20/14 4:44:08.287 PM discoveryd[1333]: AwdlD2d AwdlD2dStartAdvertisingPair: 'nicks-macbook-pro' Advertising service started 10/20/14 4:44:08.288 PM discoveryd[1333]: AwdlD2d AwdlD2dStopAdvertisingPair: '483e5cefffa5108400000000000008efip6arpa' Advertising service stopped 10/20/14 4:44:08.289 PM discoveryd[1333]: AwdlD2d AwdlD2dStartAdvertisingPair: '483e5cefffa5108400000000000008efip6arpa' Advertising service started /code/pre  I'm still having to unload/load every so often to keep going though. What might be causing this?  <answer152720> A long shot, but do you use a Bonjour account with Adium? https://trac.adium.im/ticket/16827  An update from the OP indicates this was the issue:     Turns out the issue was leaving bonjour messaging enabled in Adium. To fix this I unloaded/loaded discoveryd, went into Adium, disabled bonjour then restarted with no problem. If you want bonjour, load/unload discoveryd or wait for the above Adium ticket to be handled.   <comment179037> I'm having this same problem and it's infuriating. I can't even get Apache or MySQL to work right. <comment179038> What happens when you run `dscacheutil -configuration`? I think the neverending reload of /etc/hosts might be related to this: http://superuser.com/questions/829383/how-to-fix-etc-hosts-which-doesnt-work-in-os-x-10-10-yosemite <comment179867> Wow... If you restart with bonjour disabled in adium, the moment you re-enable bonjour networking it immediately shuts down networking (like I described in the bug), ramps up `discoveryd` to 100% and forces you to unload/load it. It appears as long as I keep that disabled I'm all good. Thanks! <comment183722> This issue also happens to user who have not installed adium at all. Do we have a solution which is not loading/unloading discoveryd or killing the corresponding process through activity monitor? <comment183723> There is an intermittent time before the discoveryd process hangs and thus I do NOT believe the Adium connection mentioned above is definitive. My guess is that toggling the bonjour option in Adium has some temporary effect on discoveryd similar to quitting the process. I do not run Adium and like the poster above, have the same issue with discoveryd ramping up to 100%+ CPU usage and it being unable to resolve DNS names. Changing DNS servers within Network Prefs has no long term effect however it does cause discoveryd to refresh thereby giving the illusion of fixing the problem, similar to the <comment205400> This article got me on right track. I don't use adium but I found that there was still com.apple.mDNSResponder.plist left after upgrade. After nuking com.apple.mDNSResponder.plist, com.apple.mDNSResponderHelper.plist and reboot my OSX DNS works just fine. <comment218099> All of my dnsreponser plists are already gone. Problem persists. <comment231175> Just a note - 10.10.4 [replaces](https://support.apple.com/en-us/HT204928) discoveryd with an updated mDNSResponder