Terminal/iTerm2 issue: reverse-i-search trims off command <body> I've been having this issue since 10.9.  ol licd into a reasonably long path, e.g., codecd /Volumes/Storage/backup/long/path/code/li liEnter a moderately long command, e.g., codecurl -X GET http://localhost:8888/code/li likbdctrl/kbd+kbdR/kbd, type codecurl/code/li likbdctrl/kbd+kbdE/kbd/li /ol  The command displayed is shifted to far to the left and leaving whitespace to the right like so:  img src="https://i.stack.imgur.com/IdhAc.png" alt="enter image description here"  Is this a known bug or is it just me?  <answer174978> The unfortunate answer is: it's just you.  My codebash/code is:  precodebash-3.2$ bash --version GNU bash, version 3.2.57(1)-release (x86_64-apple-darwin14) Copyright (C) 2007 Free Software Foundation, Inc. /code/pre  And iTerm2 is the latest release and it behaves as expected: Ctrl-E during a reverse history search puts me at the end of the line, on character after the last character in the selected line.  It might be something in your codebash/code configuration that's causing the problem. You can move aside your code~/.bash_profile/code and ~/.bashrc` files and try Ctrl-R and Ctrl-E and see if things behave better. If they do, replace your customizations one at a time and see if you can spot the culprit.  <answer174981> It's your code$PS1/code - it's not properly escaped. You have to escape all non-printing characters with code\[/code and code\]/code. For example, if you have  precodePS1='\e[32m\u \W\e[0m $ ' /code/pre  you have to change it to  precodePS1='\[\e[32m\]\u \W\[\e[0m\] $ ' /code/pre  or your cursor will appear far to the right because your shell thinks your prompt is that long, and when it retypes the command it can't find it. Annoying, I know. In codezsh/code you need to use code%{/code and code%}/code IIRC.  And while you're considering switching to another shell, I'd suggest fish. It's a bit more of a jump, but it keeps me sane.  <answer231765> Changing the codeexport TERM="xterm-color"/code to codeexport TERM="xterm"/code in my code.bash_profile/code fixed the issue for me.  <comment206142> Reverse search is a function of the shell not the terminal. It would be worthwhile mentioning what shell you're using. `bash`? `zsh`? And to answer the second part of your question: it's not happening for me `zsh` 5.0.7 using the latest iTerm2 on 10.10.2. Edit starts at the end of the command as expected. <comment206150> I'm using `bash` 3.2.53 and the latest iTerm2. <comment206160> `bash` 3.2.57 is working as expected for me, here. It puts the cursor one character beyond the last character in the line every time. <comment206164> @IanC. inspired me to switch to `zsh`, and I'm quite happy with it! <comment206176> My dotfiles can help you get up and running fast with zsh: https://github.com/ianchesal/dotfiles <comment206223> My `PS1` is `PS1='\[\e[0;33m\]\u\[\e[0m\]:\[\e[0;32m\]\w\[\e[0m\]\$ '` I can't quite seem to pick out what hasn't been escaped. <comment264988> Note: it is unnecessary and undesirable to `export` shell variables. Interactive sub-shells will run the startup script and define the variable, and it is generally undesirable to have programs you run from the shell inherit shell-specific variables.