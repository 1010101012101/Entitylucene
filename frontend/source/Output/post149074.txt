Keep MacBook Pro awake in a clamshell mode + HDMI switcher setup <body> I'm running a setup with the latest Retina MacBook Pro, a Windows desktop and a single external monitor.   Both machines are outputting display to a HDMI switcher, which connects to the monitor. I can switch between the sources with a button on the switcher.  The problem is that everytime I switch to the Windows machine, the Mac goes to sleep since it's in clamshell mode and it has no display connected. The VPN connection I use for work on the Mac keeps disconnecting because the machine goes to sleep.  I've tried fiddling with the power saving settings and other third party programs (including Caffeine and NoSleep) that are supposed to keep the machine awake, but none worked so far.  I am running Mavericks 10.9.5 on the latest MacBook Pro model (SSD).  Any ideas on how to always keep the machine awake, even when I switch the display to the Windows desktop?  <answer149075> InsomniaX is a third party program designed to do just that: disabling the sleep mode on a Apple laptops.  The program can prevent the Mac entering sleep mode from closing the lid or just idling (or both, of course). It's also possible to disable the sleep mode as per timer, after which the sleep mode kicks in normally.  <answer149078> You can use codecaffeinate/code from the terminal.app.  Just open the terminal.app and type codecaffeinate/code  Without arguments it just stays awake until you ctr+C at the terminal. There are more arguments you can use in order to prevent different system components from sleeping.  <answer149085> If InsomniaX doesn't work, you could also try macosx-nosleep-extension.  Or try to restore the pre-10.7 clamshell mode behavior by running  precodesudo nvram boot-args=iog=0x0 /code/pre  and restarting. When the laptop is connected to an external display, it makes closing the lid put the laptop to sleep, and it makes the internal display stay disabled even after the lid is opened.  <answer216505> Ensure that your Macbook is plugged to the AC power adapter, that should be enough.   See also : https://support.apple.com/en-us/HT201834  <comment175596> Hi, InsomniaX doesn't seem to work either. The machine seems to be awake, but the VPN client thinks it's not. It disconnects the session because it thinks the machine has been suspended. Would it behave like that because when I switch displays from the Mac  Windows (and back), OS X is temporarily suspending while it detects the display changes? <comment175599> Hmm, could be. Are there any retry-options in the VPN? Which VPN are you using? <comment175600> I am using the Cisco AnyConnect client. Reconnection is disabled on the VPN server, so I have no control over it. <comment175602> Thanks! This seems to have solved it. I guess I have to start looking for scripts that run caffeinate smartly at startup (discriminate between AC vs non AC to run the command, etc). Or better yet'll write one of my own. <comment175673> You should up vote for solutions. <comment177254> I've tried upvoting, it says I don't have enough reputation.