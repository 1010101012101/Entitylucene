Zsh using 100% of CPU during iWork install <body> I've been trying to install Keynote and Numbers, but they hang like so:  img src="https://i.stack.imgur.com/q0one.png" alt="app store hang screen"  This is associated with a shell script consuming 100% of a CPU:  img src="https://i.stack.imgur.com/chCXv.png" alt="activity monitor"  That process is codedefaults delete com.apple.helpd com.apple.helpd.sdmMapsCreated/code, which looks like an operation that shouldn't be long-running at all:  img src="https://i.stack.imgur.com/xGtMY.png" alt="enter image description here"  Killing its grandparent process results in the "an error has occured" message in the app store. What gives? I don't even know how to begin debugging this.  <answer147075> I was able to solve this, but I still don't know what caused it.  Iteratively:  ol liWatch for a hung codesh/code job./li liRun the command in a terminal./li liKill the parent of the hung job with codekill -9/code./li liReturn to 1 until no more hung jobs appear./li /ol  <answer187153> I just change my shell using codechsh -s /bin/bash $USER/code, apply the updates and finally change my shell back to ZSH.  <comment173136> Please look at the relevant error messages within `/var/log/system.log` at the time of this `zsh -c ...` and include them within your OQ. There might be some sort of lock on the `defaults` command. <comment178824> Same problem.  Didn't find anything interesting in the logs. <comment178825> Not fun, but worked for me.