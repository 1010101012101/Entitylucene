diskutil shows Macintosh HD is missing (with Recovery HD occupying the entire space) <body> So yesterday I managed to screw up my iMac 2012 (with Fusion Drive) by installing the Mac OS X 10.10.2 update... The installation stalled and when I tried to restore from an external drive using Time Machine I somehow managed to corrupt my hard drive... When I try to reinstall OS X it says I don't have any disks to install it to.  Anyways, now I'm running Disk utility on the command line at boot and I see the Macintosh HD volume has disappeared. Here is a screenshot of codediskutil cs list/code and codediskutil list/code:  img src="https://i.stack.imgur.com/gaC6p.jpg" alt="diskutil list"  It seems that the Recovery HD disk is occupying the entire disk space (3TB). How do I restore Macintosh HD with a new partition so I can finally reinstall OS X?  strongUpdate 1/strong  After deleting 'Recovery HD' on the second disk erroneously here a second screenshot of codediskutil list/code:  img src="https://i.stack.imgur.com/VRbnd.jpg" alt="diskutil list"  strongUpdate 2/strong  So I delete the LVG and LG and went to Disk Utility... (See screenshot3) But my disks are in red and DiskUtility is forcing me to fix them... (Screenshot4) And when I do Im back to the same setup... (Screenshot5).  img src="https://i.stack.imgur.com/swtsg.jpg" alt="screenshot3" img src="https://i.stack.imgur.com/dLPfs.jpg" alt="screenshot4" img src="https://i.stack.imgur.com/YUVB0.jpg" alt="screenshot5"  Any help would be greatly appreciated...  <answer170078> Your Recovery HD doesn't occupy your whole 3 TB drive. It's disk1s3 in the diskutil listing with the common size of 650 MB.  Your Logical Volume Family and the Logical Volume vanished though.  ul liTo rebuild it start to your Recovery HD or to Internet Recovery Mode, open Terminal and enter codediskutil cs list/code./li liCopy the LVGUUID/li liTo recreate the LV enter codediskutil cs createVolume LVGUUID type name size/code    In your case probably codediskutil cs createVolume 7ABC--i_can't_read_the_rest jhfs+ "Macintosh HD" 100%/code.  /li liNow reinstall Mac OS X or restore your system with the Time Machine backup./li /ul  strongUpdate 1/strong:   Recovery HD doesn't exist anymore - it was deleted by accident. You have to rebuild your Fusion Drive from scratch now:  strongPreparation:/strong  ul liDetach any external drive (especially your external Time Machine backup drive)/li liRestart to Internet Recovery Mode by pressing kbdalt/kbd kbdcmd/kbd kbdR/kbd at startup.br The prerequisites are the latest firmware update installed, either ethernet or WLAN (WPA/WPA2) and a router with DHCP activated.br On a 50 Mbps-line it takes about 4 min (presenting a small animated globe) to boot into a recovery netboot image which usually is loaded from an apple/akamai server.  I recommend ethernet because it's more reliable. If you are restricted to WIFI and the boot process fails, just restart your Mac until you succeed booting.  Alternatively you may start from a bootable installer thumb drive (preferably Mavericks or Yosemite) or a thumb drive containing a full system (preferably Mavericks or Yosemite)./li /ul  strongRebuild Fusion Drive/strong  ul liBooted to Internet Recovery Mode open Utilities → Terminal in the menubar and enter:br codediskutil cs list/code to get the CoreStorage listing.  /li liCopy the Logical Volume Group UUID, it's the first listed in the listing of codediskutil cs list/code.  /li liThen delete the Logical Volume Group with codediskutil cs delete LVGUUID/code.br In your case: codediskutil cs delete 7ABC--i_can't_read_the_rest/code/li liEnter codeexit/code and quit 'Terminal'/li liOpen 'Disk Utility'. Enter 'Ignore' if you are asked to fix the drives./li liChoose your SSD and partition it: 1 Partition Mac OS X Extended (Journaled), hit the Options button and choose GUID Partiton table and hit OK and Apply.br Please check that the size is ~121 GB    Example:    img src="https://i.stack.imgur.com/puoay.png" alt="ssd"/li liChoose your HDD and partition it: 1 Partition Mac OS X Extended (Journaled), hit the Options button and choose GUID Partiton table and hit OK and Apply.br Please check that the size is ~3 TB    Example:    img src="https://i.stack.imgur.com/g2zac.png" alt="hdd"/li liQuit Disk Utility and open Terminal/li liEnter codediskutil list/code  Example (your disk identifiers and sizes are different of course: Your volume SSD probably has the Identifier disk0s2 and the size 121 GB and your volume HDD probably has the Identifier disk1s2 and the size 3.0 TB):  img src="https://i.stack.imgur.com/ME7yM.png" alt="diskutil"/li liEnter codediskutil cs create "Name" IdentifierSSD IdentifierHDD/codebr In your case probably codediskutil cs create "Macintosh HD" disk0s2 disk1s2/code.    Copy the resulting LVGUUID  Example:   img src="https://i.stack.imgur.com/yIrV7.png" alt="cscreate"/li liEnter codediskutil cs CreateVolume LVGUUID jhfs+ "Macintosh HD" 100%/code.  Example:  img src="https://i.stack.imgur.com/tRBJV.png" alt="lvcreate"/li liEnter codediskutil cs list/codebr Check the size of your Logical Volume. It should have the size ~3.121 TB  Example:  img src="https://i.stack.imgur.com/55bIV.png" alt="diskcslist"/li liQuit Terminal/li liOpen 'Disk Utility' and check your newly created volume for errors/li liQuit 'Disk Utility'/li liAttach your external Time Machine backup drive or check this answer if you use NAS or another network share./li liOpen 'Restore from Time Machine Backup'/li liChoose the appropriate Time Machine backup and restore your system/li liReboot to your restored system./li liUnmount and detach your Time Machine backup drive/li liOpen 'Terminal' and enter 'diskutil list'/li liCheck if your 'Recovery HD' is listed./li liIf your 'Recovery HD' is missing, usually reinstalling your current system with the latest available system installer (e.g. 'Install OS X Mavericks (10.9.5)' if Mavericks is currently installed) will recreate it without loosing any data. AFAIK Recovery Partition Creator 3.8 will NOT create a Recovery HD on CoreStorage volumes./li liAfter reinstalling the system with the latest available system installer open codeApp Store/code and install the latest security fixes./li /ul  <comment199930> Hi klanomath. I tried what you said but got an "Error creating CoreStorage Logical Volume Group: The target disk is already in use by Core Storage (-69753)." I think this might be due to my latest attempt at erasing the Recovery HD. Can you look at my updated screenshots? Thanks a lot for your help. <comment199936> I thought it was in conflict with Macintosh HD. Did I screw up? <comment199941> yes. I'm back to internet recovery mode. If I list with diskutil list I now see disk1 is Boot OS X (as in the first screen shot). However, I see the Recovery HD in the Disk Utility panel. What should I do now? Anyway to reconvert the Boot OS X disk to Recovery HD? <comment199955> Thanks klanomath. I have the Recovery HD now. However, I'm getting "An error occured while adding a recovery system to the destination disk" when restoring from TM. Any idea why this is happening? <comment200132> Once again...thanks for the help. I think I'm almost there. My problem is that when I go back to Disk Utility it says that I have to fix my disks (I now have 2 - HD and SDD). Look at my screenshots in my updated question. Where do I go from here? Do I partition the Macintosh HD it gives me when I fix them? <comment200134> Ok new update... When restoring from Time Machine, i get an error saying "an error occured while adding a recovery system to the destination disk". I did all the steps you gave me. Any ideas? <comment200226> I can't ignore the Time Machine error...it asks me to restart <comment200265> No I get the error before restoration is complete <comment200269> @sobremesa Then i recommend to Reinstall OS X (via internet) in Internet Recovery Mode. Probably Mountain Lion will be installed. Reboot and upgrade to the latest Yosemite. Then i would use Migration Assistent to import all apps and user data from the Time Machine backup <comment200279> still same error... Quick question: I see you grayed out the first disk (disk0) in the 3rd screenshot. It seems to be the Recovery HD. Should I be seeing that? Because right now I only have 3 disks. disk0 is SSD, disk1 is HDD, and disk2 the OS X Base System <comment200284> @sobremesa Please delete all your comments except the last one from time to time. the admins don't like extended commenting. I did the screenshots in a virtual machine. I had a system disk (disk0) and added two additional disks (disk1 and disk2) to create a fusion drive with those 2. Not to confuse anyone, i tried to mask disk0. If you have disk0 and disk1 now you have to continue with the step '• Enter `diskutil cs create "Name" IdentifierSSD IdentifierHDD` In your case probably `diskutil cs create "Macintosh HD" disk0s2 disk1s2`.' in my answer and continue until the end. <comment200288> @sobremesa don't get confused by the (masked) recovery disk in my example. Don't create a recovery disk manually! It will be created later automatically installing Mountain Lion/Yosemite OR by just reinstalling Yosemite after a successful time machine restore. <comment200300> Let us [continue this discussion in chat](http://chat.stackexchange.com/rooms/20814/discussion-between-klanomath-and-sobremesa).