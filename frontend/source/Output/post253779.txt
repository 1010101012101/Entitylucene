macOS 10.12 Sierra will not forget my ssh keyfile passphrase <body> After creating a new encrypted codeid-rsa/code key file with codessh-keygen/code and using it for the first time, I cannot get macOS to forget the passphrase. This is similar to how to make OS X not remember ssh key passphrase question but worse.  I tried rebooting, killing the codessh-agent/code, locking all my keychains but it still seems to be stored somewhere. However, I cannot find it in any keychains. This seems to be very insecure. The answers to SSH private key password never removed with Keychain/ssh-agent also do not help.   In fact, the dialog that used to appear asking you whether you wanted to store the passphrase or not does not seem to exist anymore.  <answer254012> precodessh-add -K -d /code/pre  This can remove passphrases previously stored in the keychain. Since macOS 10.12 Sierra, to avoid the passphrase stored in the keychain again, be sure to do codessh-add/code first.  <answer254619> Thanks to Clive, I have a better understanding of this new 'feature'. When you type in your passphrase Sierra adds it to your Keychain but not to the ssh-agent. If your identity isn't in ssh-agent there is no way to manage it with codessh-add/code. To manage (ie. remove) your identity from Keychain you need to add your identity to codessh-agent/code by using codessh-add/code. Once you have added your identity to codessh-agent/code you can use codessh-add -K -d/code to remove it from both codessh-agent/code and Keychain. If you want your identity to be added to ssh-agent every time you use ssh add:  precodeAddKeysToAgent yes /code/pre  to your code.ssh/config/code. This will ensure that codessh-agent/code always has your identity.   <answer256866> To disable storing passphrase in keychain you should add following lines to strong~/.ssh/config/strong file:  precodeHost * UseKeyChain no /code/pre  If you already have passphrase stored in keychain you can delete it using commands:  precodecd ~/Library/Keychains/&lt;UUID&gt;/ sqlite3 keychain-2.db 'delete from genp where agrp="com.apple.ssh.passphrases"' /code/pre  If you would like to have a behavior like in OS X El Capitan or earlier (i.e. passphrase stored until logout or restart) simply add to ~/.ssh/config:  precodeAddKeysToAgent yes /code/pre  You don't need to start ssh-agent.  <comment316018> Did you check if it's actually encrypted at all? <comment316069> Yeah. Pretty sure it is as ssh does ask for the passphrase the first time I use it. Can someone actually reproduce this? <comment316122> Well, it works that way with my setup too, it's the way ssh/ssh-agent was configured. <comment316300> Yes. This used to work on previous versions of macOS Sierra. But doesn't work anymore. macOS Sierra still remembers the passphrase. <comment316304> That's true if you click the checkbox to tell macOS to store the passphrase in the keychain. However, if you don't click that checkbox macOS should always ask for the passphrase. But even if you did click it, you were always able to remove it again in the keychain utility. Since Sierra the dialog box does not appear anymore and there is no entry in keychain utility. <comment316305> This is the dialog box I'm talking about which does not seem to exist anymore: http://www.dribin.org/dave/resources/pictures/ssh_leopard_dialog.png <comment316354> OK. More investigation. It does forget it once but it will go straight back into the keychain after using it anywhere (ssh, scp, git etc.). Some kind stranger e-mailed me directly and found out that the passphrase seems to be stored in ~/Library/Keychains/SOME-UUID/keychain-2.db. But even when locking my login keychain (and all other keychains), os x will not ask for my keychain password when accessing the passphrase. That really doesn't seem right. <comment317575> According to [this answer on a related rdar](https://openradar.appspot.com/27348363), Apple changed the way SSH keys are handled. You even have to add all your SSH keys with `/usr/bin/ssh-add -A` to the ssh-agent once after each reboot or add this to your shell startup files. <comment317874> Indeed it seems that in Sierra the passphrase is being saved in that keychain location and not the usual Login keychain. <comment318804> Same question on Apple Communities: https://origin-discussions-us.apple.com/message/30749199 <comment319603> Just a followup. If you add 'UseKeyChain no' to your .ssh/config it will keep Keychain from adding your passphrase. You want to keep 'AddKeysToAgent yes' in ssh-agent will keep your passphrase until you reboot or use ssh-add -d. <comment320266> Note this requires the use of the OpenSSH shipped by Apple. This patch isn't included in home-brew as of `homebrew/dupes/openssh: stable 7.3p1` <comment320541> This answer permanently solves the problem! So I marked this as the correct answer. Thank you! <comment321353> suggested edit: change `Library/Keychains/UUID/` to `~/Library/Keychains/UUID/` for clarity:) <comment322067> suggested edit accepted :) <comment331968> By the way, I filed a bug report with Apple about this on Sept 20, 2016: https://openradar.appspot.com/28394826