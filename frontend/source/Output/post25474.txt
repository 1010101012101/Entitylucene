How do I diagnose a slow login? <body> After logging in (typing the passwort) my MacBook Air will display a white screen for about 10 seconds before the desktop appears.  How can I find out what is going on and fix it?  So far I've tried:  ul lideleted the ~/Library/Caches and /Library/Caches folder/li lichecked that there are no login items/li lilogging in without 'reopening windows'/li lidisabled the network (in case it's waiting for a timeout)/li lirepaired the disk permissions/li liverified the keychain/li lilooked at the output from Console (there is a large gap where apparently nothing is happening)/li /ul  but none of this made any difference whatsoever.  I've also created a new user account and I can login to that in about 2 seconds - so I assume that the problem has to be with my account.  The system is Lion (with the latest updates). I've installed Vbox, KeyRemap4MacBook and Xcode.  EDIT: As suggested, here is the console output for the account that takes about 15 seconds to login:  precode2011-09-22 11:54:33.748 PM SecurityAgent: User info context values set for chris 2011-09-22 11:54:33.748 PM SecurityAgent: User info context values set for chris 2011-09-22 11:54:33.830 PM SecurityAgent: Login Window login proceeding 2011-09-22 11:54:33.830 PM SecurityAgent: Login Window login proceeding 2011-09-22 11:54:34.074 PM loginwindow: Login Window - Returned from Security Agent 2011-09-22 11:54:34.113 PM airportd: _doAutoJoin: Already associated to “wifi1”. Bailing on auto-join. 2011-09-22 11:54:34.158 PM loginwindow: USER_PROCESS: 2849 console 2011-09-22 11:54:34.203 PM com.apple.launchd.peruser.503: (com.apple.quicklook.32bit) Unknown key for boolean: DisallowDataExecute 2011-09-22 11:54:34.203 PM com.apple.launchd.peruser.503: (com.apple.ReportCrash) Falling back to default Mach exception handler. Could not find: com.apple.ReportCrash.Self 2011-09-22 11:54:34.821 PM UserEventAgent: CaptiveNetworkSupport:CNSServerRegisterUserAgent:187 new user agent port: 32703 2011-09-22 11:54:35.501 PM KeyRemap4MacBook: observer_IONotification 2011-09-22 11:54:36.907 PM KeyRemap4MacBook: skip checkForUpdates 2011-09-22 11:54:37.000 PM kernel: KeyRemap4MacBook --Info-- RemapClass::allocation_count_ 167849/2097152 (capacity 8%) 2011-09-22 11:54:37.564 PM com.apple.dock.extra: Could not connect the action buttonPressed: to target of class NSApplication 2011-09-22 11:54:37.565 PM com.apple.dock.extra: 2011-09-22 23:54:37.563 com.apple.dock.extra[2902:1707] Could not connect the action buttonPressed: to target of class NSApplication 2011-09-22 11:54:37.565 PM com.apple.dock.extra: Could not connect the action buttonPressed: to target of class NSApplication 2011-09-22 11:54:37.565 PM com.apple.dock.extra: 2011-09-22 23:54:37.564 com.apple.dock.extra[2902:1707] Could not connect the action buttonPressed: to target of class NSApplication 2011-09-22 11:54:37.566 PM com.apple.dock.extra: Could not connect the action buttonPressed: to target of class NSApplication 2011-09-22 11:54:37.566 PM com.apple.dock.extra: 2011-09-22 23:54:37.565 com.apple.dock.extra[2902:1707] Could not connect the action buttonPressed: to target of class NSApplication 2011-09-22 11:54:37.566 PM com.apple.dock.extra: Could not connect the action buttonPressed: to target of class NSApplication 2011-09-22 11:54:37.566 PM com.apple.dock.extra: 2011-09-22 23:54:37.565 com.apple.dock.extra[2902:1707] Could not connect the action buttonPressed: to target of class NSApplication 2011-09-22 11:54:45.344 PM com.apple.loginwindow: chris-pc /code/pre  Can anyone spot the problem?  And here is the output from a new account that takes only 1-2 seconds to logon:  precode9/22/11 11:33:39.404 PM loginwindow: Login Window - Returned from Security Agent 9/22/11 11:33:39.452 PM airportd: _doAutoJoin: Already associated to “wifi1”. Bailing on auto-join. 9/22/11 11:33:39.501 PM loginwindow: USER_PROCESS: 2278 console 9/22/11 11:33:39.597 PM com.apple.launchd.peruser.501: (com.apple.quicklook.32bit) Unknown key for boolean: DisallowDataExecute 9/22/11 11:33:39.597 PM com.apple.launchd.peruser.501: (com.apple.ReportCrash) Falling back to default Mach exception handler. Could not find: com.apple.ReportCrash.Self 9/22/11 11:33:40.096 PM UserEventAgent: CaptiveNetworkSupport:CNSServerRegisterUserAgent:187 new user agent port: 27435 9/22/11 11:33:40.472 PM KeyRemap4MacBook: observer_IONotification 9/22/11 11:33:40.772 PM com.apple.dock.extra: Could not connect the action buttonPressed: to target of class NSApplication 9/22/11 11:33:40.772 PM com.apple.dock.extra: 2011-09-22 23:33:40.770 com.apple.dock.extra[2332:1707] Could not connect the action buttonPressed: to target of class NSApplication 9/22/11 11:33:40.773 PM com.apple.dock.extra: Could not connect the action buttonPressed: to target of class NSApplication 9/22/11 11:33:40.774 PM com.apple.dock.extra: 2011-09-22 23:33:40.772 com.apple.dock.extra[2332:1707] Could not connect the action buttonPressed: to target of class NSApplication 9/22/11 11:33:40.774 PM com.apple.dock.extra: Could not connect the action buttonPressed: to target of class NSApplication 9/22/11 11:33:40.775 PM com.apple.dock.extra: 2011-09-22 23:33:40.773 com.apple.dock.extra[2332:1707] Could not connect the action buttonPressed: to target of class NSApplication 9/22/11 11:33:40.775 PM com.apple.dock.extra: Could not connect the action buttonPressed: to target of class NSApplication 9/22/11 11:33:40.776 PM com.apple.dock.extra: 2011-09-22 23:33:40.774 com.apple.dock.extra[2332:1707] Could not connect the action buttonPressed: to target of class NSApplication 9/22/11 11:33:42.094 PM KeyRemap4MacBook: checkForUpdates http://pqrs.org/macosx/keyremap4macbook/files/appcast.xml 9/22/11 11:33:42.000 PM kernel: KeyRemap4MacBook --Info-- RemapClass::allocation_count_ 166656/2097152 (capacity 7%) /code/pre  <answer35222> Some next steps to isolate the issue:  ol liDoes a new account take the same 10 seconds to load. Be sure to discount the first log in as the system has to populate many preference and cache files the first log in. By logging out and back in to the test account you can see what your current mac has for speed on a thin user. Do turn off automatic log in and reboot the mac to re-test a log in to the test account when the files are not cached in RAM./li liTake your home folder to another mac and verify it's fine there, delete and migrate it back. This often fixes problem accounts where I can't just nuke it and have the user set it up again./li liErase the Mac after ensuring your Time Machine (or other) backup is properly updated./li /ol  <answer48253> It is clear that you are having emUSER/em file permission issues. What you need to do is run repair permissions on your user folder which you strongcannot/strong do with Disk Utility's "Repair Permissions" option. Using Disk Utility strongonly/strong repairs system files.  To repair user file permissions you would need to boot into Lion's built Repair Utilities.  ol liPower off your computer/li liPower on your computer and press and hold strongCommand + R/strong until you see the Apple Logo. This may take little longer than usual to load./li liOnce the Repair Utilities loads, click on strongUtilities/strong on the menu bar and select strongTerminal/strong/li liWithin Terminal, type emresetpassword/em and hit Return. This will open up a password reset utility/li liIn this window, select your hard drive (Macintosh HD) and then select your user account from the drop down menu located just underneath your hard drive's icon/li liWith your username selected, click on the strongReset/strong button at the bottom right of the window. This process may take a couple of minutes to complete. This will repair all file and folder permissions for all files and folders located within your User Folder./li liOnce completed, quit the Reset Password application then the Terminal application, and finally, the Utilities application which will reboot your computer./li /ol  Source: Repair User Permissions in Mac OS X Lion  strongIf your disk is encrypted/strong you have to unlock it first:  ul licodediskutil coreStorage list/code will give you the UUID./li licodediskutil coreStorage unlockVolume YOUR_UUID/code will unlock the disk (the passphrase is the password for your user account)/li /ul  <comment28830> I had problems a while back with Vbox slowing things down; If you have it auto-starting then that could explain it. Also, try looking in your System Preferences  Accounts  Login Items and see if there are any unneccessary items as well. <comment28892> Thanks but unfortunately that's not it - I have no login items and vbox does not autostart. <comment29036> In order to diagnose it someone would probably have to see your console log. <comment29192> I've added the output. Are there any other logs that might help? <comment29198> Try disabling the KeyRemap4MacBook, then re-install it or try and update it and see if you notice any difference. That's the only thing I can possibly see that might be slowing things down. It looks to be about 9 to 10 seconds difference between the two accounts at the end. <comment29205> "checked that there are no login items" — Where? System Preferences? What about ~/Library/LaunchAgents? Are there any items in there? <comment29329> Uninstalled KeyRemap4MacBook - no change in login time, it's still ~16 seconds. <comment29331> @TJLuoma there were 2 files in ~/Library/LaunchAgents. I removed both (addressbook & vbox) but login still takes ~16 secs. <comment29334> When I reboot I get a grey background on the login screen but when I log out there is a texture - is that normal? <comment53112> A new account logs on instantly - logging back to my primary account still has the delay. Thanks for 2 and 3 but I'd rather find the cause of the issue than do a lengthy workaround that might not help (my current workaround is to never log off or reboot). <comment53616> Does it still happen when you do fast-user switching? Also, the only difference in those logs between the slow and new account looks like a process called "SecurityAgent." Do you know what this is attached to? <comment55429> Thanks a lot, this solved it! I just had to unlock my disk first (I've added the steps to your answer). <comment55495> Glad to hear it help and thanks for adding the encryption footnote. <comment62557> @NickArvelo Why is it clear that this user is having USER file permission issues? Is there a specific line in his log that triggers this? <comment62847> @ProBackup What confirmed it being a USER file issue and not a SYSTEM file issue was the fact that upon the creation of a new user, the log in issue was no more. When troubleshooting any issues with OSX, the first step should always be to establish whether it is a User or System based problem. Creating a new user and trying to replicate the issue under that new user is always the best way to do so.