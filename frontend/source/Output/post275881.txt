Diagnosing a kernel panic caused by ADB <body> This issue is somewhere stuck between Android Enthusiasts and Ask Different, but seeing as the issue is with the computer itself, I decided it was a better fit here.  I'm a college student studying CS and learning the Android SDK, but for some reason, Google's ADB or Android Debug Bridge software is repeatedly causing kernel panics on my Macbook Pro 2015 running OS X 10.11.6. I could just uninstall it, but I need this program to work and I know that it works for thousands of people without issue.  The phone in question is a Motorola X 2013 Developers Edition running CyanogenMod 12. This issue began embefore/em I began using CyanogenMod.  What can I do to fix this? I've been to an Apple store but they could not find the cause of the panics. Things I do know so far include:  ul liIs it not caused by avast kext/li liIs is not caused by the splashlab kext/li liIt emonly/em happens when my phone has been plugged into the computer. If the phone has not been recently connected to the computer, no kernel panics ever occur. /li liIt only happens with my Motorola X, but even replacing the firmware did not stop the issue. However, it may be Moore's law and I just got lucky that it didn't occur./li liI've used different USB cables and different ports with the same result./li liBefore the panic, the computer freezes entirely for about 10 seconds, usually right after coming out of sleep./li /ul     Thu Dec 22 16:34:55 2016      strong* Panic Report */strong   panic(cpu 0 caller 0xffffff80181bf2fe): Preemption level underflow, possible cause unlocking an unlocked mutex or spinlock   Backtrace (CPU 0), Frame : Return Address   0xffffff8121f13c30 : 0xffffff80180d7b92    0xffffff8121f13cb0 : 0xffffff80181bf2fe    0xffffff8121f13cc0 : 0xffffff80181bf01f    0xffffff8121f13cd0 : 0xffffff801868869b    0xffffff8121f13d20 : 0xffffff8018692180    0xffffff8121f13d70 : 0xffffff80186dc149    0xffffff8121f13de0 : 0xffffff8018194b81    0xffffff8121f13e30 : 0xffffff80180dc303    0xffffff8121f13e60 : 0xffffff80180bf938    0xffffff8121f13ea0 : 0xffffff80180cf6e5    0xffffff8121f13f10 : 0xffffff80181b625a    0xffffff8121f13fb0 : 0xffffff80181ea3c6       BSD process name corresponding to current thread: adb      Mac OS version:   15G1212      Kernel version:   Darwin Kernel Version 15.6.0: Wed Nov  2 20:30:56 PDT 2016; root:xnu-3248.60.11.1.2~2/RELEASE_X86_64   Kernel UUID: 865631CA-FB7C-31CA-9B7F-5CBFF3C38E0C   Kernel slide:     0x0000000017e00000   Kernel text base: 0xffffff8018000000   __HIB  text base: 0xffffff8017f00000   System model name: MacBookPro12,1 (Mac-E43C1C25D4880AD6)      System uptime in nanoseconds: 13332124538053   last loaded kext at 12909090676875: com.apple.filesystems.smbfs 3.0.1 (addr 0xffffff7f9acd2000, size 409600)   last unloaded kext at 10644028449651: com.apple.driver.AppleXsanScheme  3 (addr 0xffffff7f9ac88000, size 32768)   loaded kexts:   com.avast.AvastFileShield   3.0.0   com.avast.PacketForwarder   2.1   com.splashtop.driver.SRXFrameBufferConnector    1.6   com.splashtop.driver.SRXDisplayCard 1.6   com.apple.filesystems.smbfs 3.0.1   com.apple.iokit.AppleBCM5701Ethernet    10.2.0   com.apple.filesystems.autofs    3.0   com.apple.driver.AudioAUUC  1.70   com.apple.iokit.IOBluetoothSerialManager    4.4.6f1   com.apple.driver.AGPM   110.22.0   com.apple.driver.ApplePlatformEnabler   2.6.0d0   com.apple.driver.X86PlatformShim    1.0.0   com.apple.driver.AppleOSXWatchdog   1   com.apple.driver.AppleGraphicsDevicePolicy  3.12.7   com.apple.driver.AppleHDA   274.12   com.apple.driver.AppleUpstreamUserClient    3.6.1   com.apple.driver.pmtelemetry    1   com.apple.iokit.IOUserEthernet  1.0.1   com.apple.driver.AppleLPC   3.1   com.apple.driver.AppleIntelBDWGraphics  10.1.4   com.apple.driver.AppleSMCLMU    208   com.apple.Dont_Steal_Mac_OS_X   7.0.0   com.apple.driver.AppleHV    1   com.apple.driver.AppleThunderboltIP 3.0.8   com.apple.driver.AppleBacklight 170.8.9   com.apple.iokit.BroadcomBluetoothHostControllerUSBTransport 4.4.6f1   com.apple.driver.AppleCameraInterface   5.46.0   com.apple.driver.AppleIntelSlowAdaptiveClocking 4.0.0   com.apple.driver.AppleMCCSControl   1.2.13   com.apple.driver.AppleIntelBDWGraphicsFramebuffer   10.1.4   com.apple.iokit.SCSITaskUserClient  3.7.7   com.apple.driver.AppleUSBStorageCoexistentDriver    3.7.1   com.apple.driver.AppleUSBCardReader 3.7.1   com.apple.AppleFSCompression.AppleFSCompressionTypeDataless 1.0.0d1   com.apple.AppleFSCompression.AppleFSCompressionTypeZlib 1.0.0   com.apple.BootCache 38   com.apple.iokit.IOAHCIBlockStorage  2.8.5   com.apple.driver.AppleAHCIPort  3.1.8   com.apple.driver.AppleTopCaseHIDEventDriver 86   com.apple.driver.AirPort.Brcm4360   1040.1.1a6   com.apple.driver.AppleSmartBatteryManager   161.0.0   com.apple.driver.AppleHPET  1.8   com.apple.driver.AppleRTC   2.0   com.apple.driver.AppleACPIButtons   4.0   com.apple.driver.AppleSMBIOS    2.1   com.apple.driver.AppleACPIEC    4.0   com.apple.driver.AppleAPIC  1.7   com.apple.nke.applicationfirewall   163   com.apple.security.quarantine   3   com.apple.security.TMSafetyNet  8   com.apple.iokit.IOEthernetAVBController 1.0.3b3   com.apple.driver.AppleThunderboltPCIUpAdapter   2.0.2   com.apple.driver.usb.AppleUSBHub    1.0.1   com.apple.kext.triggers 1.0   com.apple.driver.DspFuncLib 274.12   com.apple.kext.OSvKernDSPLib    525   com.apple.driver.AppleGraphicsControl   3.12.9   com.apple.iokit.IOSurface   108.2.3   com.apple.driver.AppleHDAController 274.12   com.apple.iokit.IOHDAFamily 274.12   com.apple.iokit.IOAudioFamily   204.4   com.apple.vecLib.kext   1.2.0   com.apple.driver.CoreCaptureResponder   1   com.apple.driver.AppleBacklightExpert   1.1.0   com.apple.iokit.IONDRVSupport   2.4.1   com.apple.iokit.IOBluetoothHostControllerUSBTransport   4.4.6f1   com.apple.iokit.IOBluetoothFamily   4.4.6f1   com.apple.driver.X86PlatformPlugin  1.0.0   com.apple.driver.IOPlatformPluginFamily 6.0.0d7   com.apple.iokit.IOSerialFamily  11   com.apple.iokit.IOSlowAdaptiveClockingFamily    1.0.0   com.apple.driver.AppleSMC   3.1.9   com.apple.driver.AppleSMBusController   1.0.14d1   com.apple.AppleGraphicsDeviceControl    3.12.9   com.apple.iokit.IOAcceleratorFamily2    205.11   com.apple.iokit.IOGraphicsFamily    2.4.1   com.apple.iokit.IOUSBMassStorageClass   4.0.2   com.apple.iokit.IOSCSIBlockCommandsDevice   3.7.7   com.apple.iokit.IOUSBMassStorageDriver  1.0.0   com.apple.iokit.IOSCSIArchitectureModelFamily   3.7.7   com.apple.driver.usb.IOUSBHostHIDDevice 1.0.1   com.apple.driver.usb.cdc    5.0.0   com.apple.driver.usb.networking 5.0.0   com.apple.driver.usb.AppleUSBHostCompositeDevice    1.0.1   com.apple.driver.CoreStorage    517.50.1   com.apple.driver.AppleThunderboltDPInAdapter    4.1.3   com.apple.driver.AppleThunderboltDPAdapterFamily    4.1.3   com.apple.driver.AppleThunderboltPCIDownAdapter 2.0.2   com.apple.iokit.IOAHCIFamily    2.8.1   com.apple.driver.AppleHIDKeyboard   181   com.apple.driver.AppleMultitouchDriver  304.12   com.apple.driver.AppleHIDTransport  5   com.apple.driver.AppleHSSPIHIDDriver    43   com.apple.driver.AppleThunderboltNHI    4.0.4   com.apple.iokit.IOThunderboltFamily 6.0.2   com.apple.iokit.IO80211Family   1110.26   com.apple.driver.mDNSOffloadUserClient  1.0.1b8   com.apple.iokit.IONetworkingFamily  3.2   com.apple.driver.corecapture    1.0.4   com.apple.driver.AppleHSSPISupport  43   com.apple.driver.AppleIntelLpssSpiController    2.0.60   com.apple.driver.AppleIntelLpssDmac 2.0.60   com.apple.driver.AppleIntelLpssGspi 2.0.60   com.apple.driver.usb.AppleUSBXHCIPCI    1.0.1   com.apple.driver.usb.AppleUSBXHCI   1.0.1   com.apple.iokit.IOUSBFamily 900.4.1   com.apple.iokit.IOUSBHostFamily 1.0.1   com.apple.driver.AppleUSBHostMergeProperties    1.0.1   com.apple.driver.AppleEFINVRAM  2.0   com.apple.iokit.IOHIDFamily 2.0.0   com.apple.driver.AppleEFIRuntime    2.0   com.apple.iokit.IOSMBusFamily   1.1   com.apple.security.sandbox  300.0   com.apple.kext.AppleMatch   1.0.0d1   com.apple.driver.AppleKeyStore  2   com.apple.driver.AppleMobileFileIntegrity   1.0.5   com.apple.driver.AppleCredentialManager 1.0   com.apple.driver.DiskImages 417.4   com.apple.iokit.IOStorageFamily 2.1   com.apple.iokit.IOReportFamily  31   com.apple.driver.AppleFDEKeyStore   28.30   com.apple.driver.AppleACPIPlatform  4.0   com.apple.iokit.IOPCIFamily 2.9   com.apple.iokit.IOACPIFamily    1.4   com.apple.kec.Libm  1   com.apple.kec.pthread   1   com.apple.kec.corecrypto    1.0   Model: MacBookPro12,1, BootROM MBP121.0167.B17, 2 processors, Intel Core i5, 2.7 GHz, 8 GB, SMC 2.28f7   Graphics: Intel Iris Graphics 6100, Intel Iris Graphics 6100, Built-In   Memory Module: BANK 0/DIMM0, 4 GB, DDR3, 1867 MHz, 0x02FE, 0x4544464132333241324D412D4A442D460000   Memory Module: BANK 1/DIMM0, 4 GB, DDR3, 1867 MHz, 0x02FE, 0x4544464132333241324D412D4A442D460000   AirPort: spairport_wireless_card_type_airport_extreme (0x14E4, 0x133), Broadcom BCM43xx 1.0 (7.21.95.175.1a6)   Bluetooth: Version 4.4.6f1 17910, 3 services, 27 devices, 1 incoming serial ports   Network Service: Wi-Fi, AirPort, en0   Serial ATA Device: APPLE SSD SM0256G, 251 GB   USB Device: USB 3.0 Bus   USB Device: Card Reader   USB Device: USB3.0 Hub   USB Device: My Passport 259D   USB Device: Bluetooth USB Host Controller   USB Device: USB2.0 Hub   USB Device: Fastboot ghost S   USB Device: USB Receiver   Thunderbolt Bus: MacBook Pro, Apple Inc., 27.1   I have several more panic logs if they would be helpful and can (kinda) create new ones on demand, but would rather not.  <comment347137> Did you try https://developer.android.com/support.html ? <comment347186> @patrix just looked through it. Most of the links posted there are outdated or unhelpful <comment347218> As a test, what happens if you set your MBP to _never_ go to sleep (on either power or battery)? Do you still experience the problem? And, if so, as often as before or less so? Also, just for clarification, are you saying that if you never plug your phone into the MBP that you wouldn't experience this problem? Can you also provide exact details of the model of your phone? And finally, have you tried connecting your phone to a different USB port and have you tried using different cables? <comment347244> @Monomeeth I added the information I know and will test for the rest today. <comment347713> @Monomeeth I tried with a different phone and could not cause a panic. <comment347720> Well, troubleshooting is often a process of elimination. It really seems to me you've identified the Motorola X as the culprit for some reason. To confirm this you could try testing it on another Mac with ADB installed to see what happens (in case it's some sort of software incompatibility issue with your Mac). <comment347721> **If it works** on the other Mac, you can start experimenting on yours to identify the cause. **If it doesn't work** on the other Mac, I'm not really sure where you go from here. If you want to persevere with that particular phone you could try doing a full reset etc and making sure the port is clear of any debris, etc - and trying again. But otherwise I think you'll have to move on. <comment347722> @Monomeeth I agree, if it happens on the other too it's definitely the phone, but I'm honestly amazed that it seems phone could be responsible. I never would have expected that. Connection issues I can understand, but to go as far as causing a kernel panic? I'll try the other phone on my MBP a little bit more when I get the chance and my old Mac too. I'll also test something else I just came up with. I shut down ADB first this time before disconnecting, and I don't do that normally. <comment347723> It's not actually that surprising. Any hardware can cause a kernel panic or other unexpected behaviour if there is some sort of fault or bug at play. That's not to say it's necessarily the fault of the hardware, sometimes it's a software bug interacting with the hardware that's the root cause. Just two days ago I saw a laptop that was connected to a dock undergo a panic and hard shutdown just because one of the displays connected to the dock was unplugged. Go figure.