How to detect number of lines in AppleScript <body> I want to use TextWrangler as an R-editor.  To make usage more handy I found a script online by Jean Thiolouse which I edited slightly:  precodetell application "TextWrangler"   set the_selection to (selection of front window as string)   set line_index to (endLine of selection)   if (the_selection) is "" then     set the_selection to line line_index of front window as string   end if   tell application "System Events" to tell process "TextWrangler"     key code 124 using {command down}     key code 124   end tell end tell tell application "R"   cmd the_selection end tell /code/pre  I let the script detect the current line number codeline_index/code and move the cursor to the start of the following line, but can I adjust the script such that strongif/strong the line number is the last line in the file it would add an empty line instead of codekey code 124 using {command down}/code and codekey code 124/code? 