Fixing Smart Mailboxes <body> I recently had to restore my code~/Library/Mail/code folder from a Time Machine backup, and upon opening Mail it imported the mailboxes seemingly successfully, however my Smart Mailboxes no longer function, despite appearing to be correct.  My smart mailboxes aren't anything fancy, they basically just group similar items; for example, if accounts A and B both have an IMAP folder named "Newsletters" then the corresponding smart mailbox simply combines messages that reside in either folder; it's a simple match any rule for each mailbox.  However, even though these smart mailboxes appear to be valid (pointing to the correct mailboxes), nothing is appearing within them at all. I've already tried rebuilding every mailbox, as well as closing Mail, clearing its entry under code~/Library/Containers/code (to force it to rebuild its cache) and relaunching. I've also tried creating new smart mailboxes, but these don't work either, so there must be an index somewhere that's not functioning correctly, but I've already tried deleting the envelope index files under code~/Library/Mail/V2/MailData/code.  Is there anything else I can do to solve this problem?  <answer174854> I'm going to assume you are using Mail 8.2.  Have you checked the permissions on the SmartMailBoxesLocalProperties.plist in ~/Library/Mail/V2/MailData? For reference my plist -rw-r--r@.  When you state new smart mailboxes are working, does this mean they aren't being saved also? The fact that new mailboxes aren't working either seems to point to a permissions problem, as seen in this previous question.  <comment204627> I have had to delete and recreate them in the past <comment204644> I've tried that as well, but they don't seem to be working at all. I seem to have run out of things I can delete and recreate at this point! I've even tried recreating my Spotlight index, though I'm not sure if Mail uses this for its smart mailbox searches or not. <comment205592> could we see a example of smart box set up you have that is not working. <comment206424> This answer seems semi-correct; it does appear to have been a permissions issue, but not on a Mail specific file. Instead the issue appears to have been with either my user folder, or my `~/Library` folder. When I restored the user account I didn't restore everything, so I re-created the user folder and library folder manually, so I could avoid restoring large files I wanted to handle later. The permissions appeared correct but there must have been something wrong. Quite why this broke Mail I can't begin to imagine though.