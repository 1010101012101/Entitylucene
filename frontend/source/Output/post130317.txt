Check FTP status using AppleScript <body> I have an AppleScript Automator application that, when double-clicked, opens FTP and displays an alert confirming the same. It is working perfectly as expected. However, I am looking to make it a tad more intuitive so that it opens FTP strongONLY/strong if FTP isn't already open. If FTP is already open on my system, the app should close it.  So, basically I want to use the app as a toggle switch which opens or closes FTP depending on its prevailing status. The code I am currently using to open FTP and display the alert is as follows:  precodeset ipaddr to IPv4 address of (get system info) set sun to short user name of (get system info) do shell script "sudo -s launchctl load -w /System/Library/LaunchDaemons/ftp.plist" with administrator privileges tell application "Finder" to display alert "FTP Launched and ready for file-transfer" &amp; character id 8233 &amp; character id 8233 &amp; "User Name: " &amp; sun &amp; character id 8233 &amp; "IP address: " &amp; ipaddr /code/pre  Can anyone please point me in the right direction? Is there any system variable that can be used to retrieve the FTP status? On Terminal, I could use this:  precodeftp localhost /code/pre  And the results would tell me if it's open or closed. But how can I let AppleScript know the same?  strongAdditional info: Output of "emftp localhost/em" on Terminal/strong  Here's the result of strongemftp localhost/em/strong when FTP is closed:  img src="https://i.stack.imgur.com/JN3Ud.png" alt="enter image description here"  And here's the result when FTP is open:  img src="https://i.stack.imgur.com/FLo4g.png" alt="enter image description here"  Here, I just hit return without any input and then it gives this:  img src="https://i.stack.imgur.com/9kuIx.png" alt="enter image description here"  <answer130322> This works as a shell test, if you replace  with your target.  precodeecho "QUIT" | telnet &lt;host&gt; ftp 2&gt;&amp;1 | grep  "Escape character is" &gt; /dev/null /code/pre  We're using hardly any complex tools, we just send a command to the server that makes it close our connection. If this works, the ftp-server is up and running. If we couldn't connect at all, this line returns code1/code, else it returns code0/code.  Digested to an AppleScript it's something like  precodeset hostn to &lt;host&gt; try     do shell script "echo \"QUIT\" | telnet " &amp; hostn &amp; " ftp 2&gt;&amp;1 | grep  \"Escape character is\" &gt; /dev/null"     display dialog "Online." on error     display dialog "Not online." end try /code/pre  <comment152713> Could you include what `ftp localhost` returns exactly if it's on/off in your question? <comment152714> "Open" means "FTP port is open/FTP server is running and accepting connections" I assume? <comment152715> @patrix: yes you got it right. <comment152716> @grgarside Please see the screenshots added to the question. <comment152719> OK, it goes into interactive mode. That's impractical if you want to script it. <comment152720> Exactly. Glad you see what I mean. Is there any other way its state could be retrieved via some variable or something? <comment152722> Try running `echo $?` afterwards. <comment152723> It is not supposed to produce output, it just sets the exit status to 0 or 1. You can use `echo $?` to display it <comment152724> I ran the AppleScript above and it throws this: "The action “Run AppleScript” encountered an error. Check the actionʼs properties and try running the workflow again." <comment152725> Try to run it in AppleScript Editor. Might be Automator quirk. <comment152726> Did you replace host? <comment152728> Tried it both ways and this is what happens: First time, it says "Syntax error. Expected expression but found “” with reference to the first line of the code. Then I tried running it without the "" and it said "the variable localhost not defined". Then I simply replaced the variable "hostn" with "localhost" and it says "not online" even when FTP is on. <comment152730> Does it work in shell? `echo "QUIT" | telnet 127.0.0.1 ftp 2&1 | grep  "Escape character is"  /dev/null` <comment152734> I ran it on the command line and then ran echo $? and it returned "0"...it's the same output in either cases, both when FTP is on as well as when it's off. <comment152735> Ok... I tested it only on remote servers. <comment152737> @MaxRied Ok, finally it worked in Automator! Thanks a ton for your patience. I just replaced localhost with the IP (127.0.0.1) and it went through. Not sure why though but it's all good. Thanks again. :) <comment153529> You could also use `netstat -a | grep .ftp | grep -q LISTEN` instead of `telnet`.