sourcing .bash_profile from .bashrc breaks macvim shell <body> I read Why doesn&#39;t .bashrc run automatically? about sourcing code.bash_profile/code from code.bashrc/code and adjusted my config to match this. I am using iTerm2 as my terminal.  Unfortunately, when I do this, my MacVim shell breaks - backspace doesn't work and I have strange characters all over the place. Note the characterscode?1034h/code before the prompt and the codeK/code that appears when hitting the backspace key.  img src="https://i.stack.imgur.com/zzpfg.png" alt="enter image description here"  My code.bash_profile/code:  precodesource ~/.bashrc /code/pre  My code.bashrc/code:  precodealias ll='ls -al' # Set CLICOLOR if you want Ansi Colors in iTerm2 export CLICOLOR=1  # Set colors to match iTerm2 Terminal Colors export TERM=xterm-256color /code/pre  If copy the settings from code.bashrc/code into code.bash_profile/code and delete code.bashrc/code then the shell in MacVim works fine.  Any idea why MacVim shell breaks sourcing code.bash_profile/code from code.bashrc/code?  <answer266770> According to https://stackoverflow.com/questions/11676026/macvim-shell-sh-only-displays-character-codes-escape-sequences the initial code?1034h/code characters are the colour codes I've set up in my code.bashrc/code.   When calling codeecho $TERM/code from codemacvim/code the result is codedumb/code. It looks like the terminal is unable to interpret certain escape sequences.   Details on how to adjust the code.bashrc/code to accommodate (taken from  https://stackoverflow.com/a/11676355/783836):     If you would like to use a color prompt on the command line, but not   in MacVim you can fix this in code~/.bashrc/code by setting PS1 differently   when inside vim (from [here][1])   precodeif [ $VIM ]; then         export PS1='\h:\w\$ ' fi /code/pre   <comment334441> They look like color codes. <comment334446> @mostruash I understand what the `.bashrc`/`.bash_profile` is doing, I just don't get why sourcing '`bashrc` from `bash_profile` breaks `macvim` <comment334448> before you start macvim what does `echo $TERM` show in both cases <comment334449> Also, what does `echo $TERM` show when called from within the shell spawned by macvim, again in both cases? <comment334450> I'm just giving a hint, are you sure that you put that `CLICOLOR` into your bash profile? If you copy bashrc content into bash profile without skipping anything, then I have no idea. Good luck. <comment334451> My suspicion currently is that the shell spawned by `macvim` only reads `.bashrc` (and not `.bash_profile`) because it is not a login shell. <comment334475> @patrix in both cases the output is `xterm-256color`