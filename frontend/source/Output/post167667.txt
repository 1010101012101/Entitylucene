Applescript not returning string <body> I have a list called num. I have converted it into a string. I want to return that string so that the next action called "New text file" in my automator workflow can get the string. This is my code -   precodeon run {input, parameters}     set num to {1,2}     set f to ""     repeat with x in num         set f to f &amp; x &amp; "\n"     end repeat     return f end run /code/pre  It doesn't return anything.  EDIT: As some of you have asked. I am going to elaborate on the question. My automator workflow, takes some parts of some text in an email, it retrieves all the phone numbers in the group which is specified in the text of the email, and stores them in a text file.  the variable 'cat' has the list of contact groups  This is the full code:   precodeon run     set cat to value of variable "cat" of front workflow (*I have already defined the variable elsewhere in the workflow*)     set num to {}     set f to ""     tell application "Contacts"         repeat with i in cat             set inGroup to group i             set phoneProps to value of phones of inGroup's people             set end of num to first item of first item of phoneProps         end repeat     end tell     repeat with x in num         set f to f &amp; x &amp; "\n"     end repeat     return f end run /code/pre  This code is supposed to be followed by a 'new text file' action which should take the output of the previous action ('run applescript') as input. That doesn't happen as for some reason, applescript refuses to return the value strongemeven when I am getting the desired value when using 'display dialog'./em/strong  UPDATE: I am now posting the entire workflow  Input- In mail app - An email with this content - "#a, #b Q: this is a question for all of you."  Workflow -   1) Run Applescript Code -   precode on run {input, parameters}      tell application "Mail" to set theMessageText to content of (get first message of inbox)     set topic to text ((offset of "#" in theMessageText) + 1) thru ((offset of "Q" in theMessageText) - 1) of theMessageText     set AppleScript's text item delimiters to ", "     set bowords to words of topic     set o to length of bowords     repeat with i from 1 to o         trim_line(bowords, "#", 0)     end repeat     bowords end run on trim_line(this_text, trim_chars, trim_indicator)     set x to the length of the trim_chars     -- TRIM BEGINNING     if the trim_indicator is in {0, 2} then         repeat while this_text begins with the trim_chars             try                 set this_text to characters (x + 1) thru -1 of this_text as string         on error                 -- the text contains nothing but the trim characters                 return ""             end try         end repeat     end if     -- TRIM ENDING     if the trim_indicator is in {1, 2} then         repeat while this_text ends with the trim_chars             try                 set this_text to characters 1 thru -(x + 1) of this_text as string             on error                 -- the text contains nothing but the trim characters                 return ""             end try         end repeat     end if     return this_text end trim_line /code/pre  2) Set Value of Variable  Sets the output of previous action to 'cat'  3) Run Applescript  precodeon run {input, parameters}     tell application "Mail" to set theMessageText to content of (get first message of inbox) end run /code/pre  4) New Mail Message  Appends the text from previous action to the bod of email  5) Run Applescript  The code that @Tetsujin gave in the answers  6) New Text File  7) Add attachments to front message  8) Send Outgoing Messages  9) Run Applescript (Deletes the email)  Code -   precodeon run {input, parameters}     delay (10)     tell application "Mail"         set theMessages to (get selection)         repeat with eachMessage in theMessages             set theAccount to account of (mailbox of eachMessage)             move eachMessage to mailbox "Trash" of theAccount         end repeat     end tell         return input end run /code/pre  <answer167776> precodeon run     set cat to value of variable "cat" of front workflow (*I have already defined the variable elsewhere in the workflow*)     set num to {}     set myString to ""     tell application "Contacts"         repeat with i in cat             set inGroup to group i             set phoneProps to value of phones of inGroup's people             repeat with i in phoneProps                 try                     set myString to myString &amp; "\n" &amp; first item of i (*gets first number only*)                 on error                     set myString to myString &amp; "\n" &amp; "blank field" (*covers for empty phone number, otherwise would halt on error*)                 end try             end repeat         end repeat         return myString     end tell   end run /code/pre  <comment196592> num is a list. you need to count num to be able to iterate it. also likely to need to ask for x as string [sorry, my brain is working in another language at the moment, so you may have to translate my terminology back to applescript] <comment196605> My guess is that either the input is never reaching the Applescript or that it's not in a format your script can use. If you remove the `{input, parameters}` and run the code in Applescript Editor, it spits out `1\n2`. You should say exactly what you're trying to automate and what you've done so we can fully understand the problem. <comment196633> Your code returns "1 2, In Automator if you run it there. (The 2 being on a newline, but cannot format in this comment) " Also @Tetsujin , I am pretty sure because f is declared as a string with "" and then proceeds the variable x the result will be a string. <comment196647> I have updated the question @JayThompson <comment196648> I have updated the question @markhunte <comment196684> I have updated the question @Tetsujin <comment196688> phoneProps contains the entire list of numbers for any given group. Setting the end of num in the loop will add just the first number for each group. So for 2 groups you will return 2 numbers on 2 lines. What are you actually after? <comment196689> I did not think of that. My test cases did not account for that. You are right. I do need all the numbers from the group. How do you think I should go about doing it? Also even if I have a proper list which I later convert into a string, my original problem still remains @Tetsujin <comment196691> best way to debug is to keep dropping 'return *function*' at the end of each line til you figure out what it is actually doing. <comment196692> What do you think I should do about getting all the numbers from a group instead of just the first number @Tetsujin <comment196693> phoneProps already contains every number of each group in turn, though with no way of knowing which belongs to whom, & with no care as to whether they have one number or 6. You would need to run another loop to extract the first number of each item in the list, though again, 'first' would not necessarily be 'best' <comment196698> This is my current code -      set cat to value of variable "cat" of front workflow     set num to {}     set phoneProps to " "     tell application "Contacts"      repeat with i in cat   set inGroup to group i         set phoneProps to ((value of phones of inGroup's people as string) & " " & phoneProps)      end repeat     end tell     return phoneProps  I tried it, it worked. It return the value. Then I added another action 'Send outgoing email' so that I can email the string which is stored in the text file. Then, it automatically stopped working. I removed, that action but it didn't work. <comment196724> In the 'run applescript' action, the result shows blank even for the above code. @Tetsujin <comment196725> if the result is empty, then your input is empty, or you're not carrying the result over to the next stage correctly. Works perfectly here. I changed set cat to {"oneGroup", "anotherGroup"} from my own contacts list. return myString shows all first-listed phone numbers & one 'blank field' <comment196727> When I use 'display dialog', I see the value of myString correctly. Only when I return it, it does not show anything in he result of the 'run applescript' action. For a couple of times, the result mysteriously shows correctly, other times it does not, even when I do no change to the workflow. @Tetsujin <comment196729> first time i've every tried automator - I wrote that just in Script Editor - I dropped a 'run applescript', pasted that in, added a 'new text file' after it & it works just fine, new file on my desktop with a list of phone numbers. I am not using any input in 'on run' i.e. no {} <comment196731> Like I said, it works sometimes, but then later, it doesn't. Even after, I have apparently changed nothing. Can you thing of any possible things I could be doing wrong? @Tetsujin <comment196732> not without knowing the entire workflow, at least - & bear in mind I've never used automator before ;) <comment196734> Ok, so I just found something interesting. When I run the workflow, the display dialog box shows the value of myString is empty but when the workflow is completed, the display dialog shows the value from myString that I expect. What can you make of this? If this piece of information doesn't lead to anything, I will definitely show the entire workflow (it is a small one), so maybe that can help you help me. @Tetsujin <comment196735> i can't find a 'display dialog' action. Try removing return myString. That may change whether the script continues to run. It will halt at that point in plain applescript <comment196736> Display dialog is not an action in Automator. It is a command in AppleScript that will show the value of a variable in the form of a dialog box. I tried removing the return myString which doesn't work. I am currently typing out the workflow which might give a clue to what I am doing wrong. @Tetsujin <comment196737> I have updated the question with the workflow @Tetsujin <comment196739> There's far too much for a 3rd party to debug. You need to hone it down to the part that fails. We know it's not 5 or 6, as with specifically dictated input for cat, i.e. typed contact group names, it works. <comment196833> Can the workflow be written in pure AppleScript? @Tetsujin <comment196889> silly question: Can you confirm: from the text "#a, #b Q: this is a question for all of you."  what are you expecting back as the result.