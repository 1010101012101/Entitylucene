Fish shell installation using homebrew - iconv libiconv error <body> I am trying to install strongFish/strong shell using stronghomebrew/strong using command:  precodebrew install fish /code/pre  But the installation fails with the following error:  precode==&gt; ./configure --prefix=/usr/local/Cellar/fish/2.1.1 SED=/usr/bin/sed checking for library containing setupterm... -lncurses checking for library containing nan... none required checking for library containing iconv_open... no checking for library containing libiconv_open... no configure: error: Could not find an iconv implementation, needed to build fish /code/pre  I tried searching around but no clear solution was found. System configuration:  precode$ brew --config HOMEBREW_VERSION: 0.9.5 ORIGIN: https://github.com/Homebrew/homebrew.git HEAD: f03104755df8cbfb720254bd88ac7594a3837d36 Last commit: 11 hours ago HOMEBREW_PREFIX: /usr/local HOMEBREW_CELLAR: /usr/local/Cellar CPU: quad-core 64-bit haswell OS X: 10.10.1-x86_64 CLT: 6.1.0.0.1.1413057044 Clang: 6.0 build 600 X11: N/A System Ruby: 2.0.0-481 Perl: /usr/bin/perl Python: /usr/bin/python Ruby: /usr/bin/ruby /code/pre  Could you please help to fix this? Thanks!  <answer158345> In the log that you posted above the following three lines suggest that you have MacPorts installed.  precodechecking for /opt/local/include include directory... yes checking for /opt/local/lib library directory... yes checking for /opt/local/bin command directory... yes /code/pre  It also appears that brew is checking there before checking in its regular file locations (code/usr/local/code, etc). Something under code/opt/code might be confusing brew and preventing it from compiling fish.   This can be mended by following MacPorts uninstall guide: guide.macports.org/#installing.macports.uninstalling  <comment184874> Can you add what the output from `brew doctor` is? This is usually a great first step to fixing build problems. <comment184899> brew doctor does not tell anything unfortunately. Have a look at full log: https://gist.github.com/kmisiunas/cd7496a8fdaedba3c9a5 <comment185064> Nothing there indeed.. I'm able to get it to build on my system, only difference being that I have XCode installed (`brew --config` shows `Xcode: 6.1` where yours does not), and i've got a newer version of Brew installed (commit ends in `37d36`, and I saw that the `fish` package got an update). Try doing a `brew update`, and if that fails, installing Xcode from the appstore.  Oddly enough, if I try to do a `brew install libiconv`', I get a message back saying `Apple distributes libiconv with OS X`. Smells like a pathing problem of some kind. <comment185105> Just installed XCode 6.1. The same problem. I suspect the problem is deeper. I agree with your pathing hypothesis - just not sure how to fix it. <comment186527> It seems to be already installed. Response was: "xcode-select: error: command line tools are already installed" <comment186544> Just realised. You have an `/opt` folder. Have you installed MacPorts? <comment186592> @AlistairMcMillan, I did not have MacPorts installed. But I might have had it ages ago so I went though full uninstall procedure (https://guide.macports.org/#installing.macports.uninstalling). Now installing Fish worked! Thank you! Do you know what happened? <comment186595> @karolis My guess is remnants of that MacPorts install that were confusing brew. From the log you posted above it seemed to be checking `/opt/local` (which MacPorts uses) before `/usr/local` (which brew uses). <comment186603> @AlistairMcMillan ok. Thanks for the insight! Would you like to post a quick answer? <comment186604> @Karolis Updated my previous answer. :)