Failed to expand to the maximum partition size <body> There are two partitions currently allocated on my 100 GiB hard disk. However, only  ~85GB is formatted and I cannot expand code/dev/disk0s2/code to the maximum size with various attempts such as codediskutil/code and codegpt/code. The last ~20 GB free space does exist, but it cannot be partitioned. codedisk0/code is a VMware vmdk resized from 85 GB to 107 GB with vmware-vdiskmanager.  What may cause this? And how should I achieve the goal?  img src="https://i.stack.imgur.com/pliqQ.png" alt="screenshot"  <answer288667> Since resizing the partition that is currently mounted for the operating system is impossible and the filesystem (FS) may be corrupted. One of the solutions is to use a live CD, especially GParted Live ISO which has installed many tools related to disk management such as partition.  However, GParted can check the integrity of the FS, but it is not able to resize the partition to the maximum size. Hence, codeparted/code, a command-line tool, is used. (Thanks for @klanomath 's hints.)  strongStep 1:/strong  Find out which partition has to be expanded.  precode$ sudo parted /dev/sd[x] (parted) unit s print free  # unit: sectors /code/pre  strongStep 2:/strong  Expand the selected partition to the designated sector.  precode(parted) resizepart &lt;partition&gt; &lt;end&gt;s /code/pre  strongStep 3:/strong Shutdown the Live system.  strongStep 4:/strong Restart the macOS VM, and repair the disk.  precode$ sudo diskutil repairDisk disk[y] /code/pre  <comment364441> You should have mentioned VMware (and macOS being a VM) previously ;-). Here I recommend to download a gparted-live iso, attach it to the VM, change the type of the VM temporarily to Linux, boot from the iso and expand disk0s2. You may also try to repair disk0 (`diskutil repairDisk disk0`) booted from a 2nd bootable macOS vmdk (which can be a renamed copy of the original) and try to expand it then. <comment364529> Please write an answer... ;-) <comment364535> @klanomath I answered my question below.