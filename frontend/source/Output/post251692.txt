Need help with bash script to delete El Capitan Installer <body> I've been given the below plist which points to a bash script.  The script is supposed to delete the installer (El capitan.app) after it has been downloaded to prevent people from upgrading to it.   It is not working and I am not sure what needs changing/tweaking, if anything, to the script. It fails to delete the downloaded installer.  I have placed the script in the location /usr/local/bin, filename blockelcapitan.sh and can also confirm that the launch dameon (stored in /Library/LaunchDaemons) is loaded as confirmed by using the command:  precodesudo launchctl list | grep net. /code/pre  which shows a result of:  precode-    78 net.ORG.blockelcapitan /code/pre  I need help with the script, I have no idea if it is correct or what needs adding/removing/changing.   precode#!/bin/bash Version=$(sw_vers | grep ProductVersion | tail -c 7 | cut -d . -f 2)     if [[ $Version -ge 11 ]] then     sudo launchctl unload /Library/LaunchDaemons/net.ORG.blockelcapitan.plist     sudo rm -rf /Library/LaunchDaemons/net.ORG.blockelcapitan.plist     sudo rm -rf /var/ORG/ElCapitan/     sudo rm -rf /var/db/receipts/net.ORG.pkg.BlockElCapitanLaunchDaemon.bom     sudo rm -rf /var/db/receipts/net.ORG.pkg.BlockElCapitanLaunchDaemon.plist     exit 0 fi rm -rf /Applications/Install\ OS\ X\ El\ Capitan.app/ osascript -e 'display dialog "OS X El Capitan is not allowed on ORG computers at this time." with title "ORG Technology Notice" buttons {"OK"}     default button "OK" giving up after 30'  Post-flight for installer PKG (youâ€™ll want to use something like Packages     for Mac to build a deployable .pkg):  #!/bin/bash  launchctl load -w /Library/LaunchDaemons/net.ORG.blockelcapitan.plist  Version=$(sw_vers | grep ProductVersion | tail -c 7 | cut -d . -f 2)   if [[ $Version -ge 11 ]] then     sudo launchctl unload /Library/LaunchDaemons/net.ORG.blockelcapitan.plist     sudo rm -rf /Library/LaunchDaemons/net.ORG.blockelcapitan.plist     sudo rm -rf /var/ORG/ElCapitan/     sudo rm -rf /var/db/receipts/net.ORG.pkg.BlockElCapitanLaunchDaemon.bom     sudo rm -rf /var/db/receipts/net.ORG.pkg.BlockElCapitanLaunchDaemon.plist     exit 0 fi /code/pre  Here is the actual launchdaemon itself:  precode&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com    /DTDs/PropertyList-1.0.dtd"&gt; &lt;plist version="1.0"&gt; &lt;dict&gt; &lt;key&gt;Label&lt;/key&gt; &lt;string&gt;net.ORG.blockelcapitan&lt;/string&gt; &lt;key&gt;ProgramArguments&lt;/key&gt; &lt;array&gt;     &lt;string&gt;/usr/local/bin/blockelcapitan.sh&lt;/string&gt; &lt;/array&gt; &lt;key&gt;KeepAlive&lt;/key&gt; &lt;dict&gt;     &lt;key&gt;PathState&lt;/key&gt;     &lt;dict&gt;         &lt;key&gt;/Applications/Install OS X El Capitan.app/&lt;/key&gt;         &lt;true/&gt;     &lt;/dict&gt; &lt;/dict&gt; &lt;key&gt;OnDemand&lt;/key&gt; &lt;true/&gt; &lt;/dict&gt; &lt;/plist&gt; /code/pre  <answer251725> If you didn't install any BlockElCapitanLaunchDaemon.pkg previously, but just got the content of the plist and the shell script you will get this working by removing some useless lines and bogus commands:  A working version is:  precode#!/bin/bash  Version=$(sw_vers | grep ProductVersion | tail -c 7 | cut -d . -f 2)      if [[ $Version -ge 11 ]] then     launchctl unload /Library/LaunchDaemons/net.company_name.blockelcapitan.plist     rm -f /Library/LaunchDaemons/net.company_name.blockelcapitan.plist     rm -f /usr/local/bin/blockelcapitan.sh     exit 0 else     rm -rf /Applications/Install\ OS\ X\ El\ Capitan.app/ fi /code/pre  The Variable emVersion/em can be simplified to:  precodeVersion=$(sw_vers -productVersion | cut -d . -f 2 ) /code/pre  The related launch daemon plist emnet.company_name.blockelcapitan.plist/em added to your question is properly formatted and working after changing the line      code&lt;string&gt;net.ORG.blockelcapitan&lt;/string&gt;/code to    code&lt;string&gt;net.company_name.blockelcapitan&lt;/string&gt;/code.  The files ought to have the following permissions:  ul liemblockelcapitan.sh/em: root:wheel 755/li liemnet.company_name.blockelcapitan.plist/em: root:wheel 644/li /ul  The script does the following:  ul licodeVersion=$(sw_vers | grep ProductVersion | tail -c 7 | cut -d . -f 2)/code or codeVersion=$(sw_vers -productVersion | cut -d . -f 2 )/code:br Get the major release number of the current system version (e.g. 9: Mavericks, 10: Yosemite, 11: El Capitan etc.)/li licodeif [[ $Version -ge 11 ]]/code:br if the major version of the booted system is equal or greater than 11/li licodethen.../code  (if El Capitan or newer is installed) unload and remove the launch daemon and the shell script/li licodeelse.../codebr (if Yosemite or older is installed) remove El Capitan installer app/li /ul  None of the preceding emsudo/ems is needed, because the shell script started by the launch daemon already runs as emroot/em. The -r option in the first coderm/code commands is not needed because none of the objects is a directory. The files and folder in /var don't exist if you haven't installed anything (except the plist and the shell script file).  As far as I can tell, the osascript doesn't work like that, so I ignored it. I'll try to find a solution.   <comment312905> What's the intended result of the shell script? What's the reason to use a double shebang and repeat parts of the "shell script" in your question? Please edit your question to clarify it! <comment312906> I have now done so. Sorry I do not know the reason for a double shebang. <comment312910> I have edited your question to show you the duplicates: the parts following the shebangs are almost identical except the `rm` and the `osascript` line after the first shebang! <comment312912> Why exactly do you need help with the script? Does it fail to delete a downloaded installer, or show any other unexpected behaviour? <comment312913> It is not working and I am not sure what needs changing/tweaking, if anything, to the script. Correct, it fails to delete the downloaded installer. <comment312940> If the script looks like the one you've pasted above, it seems to be duplicated somehome. You can delete everything from the second `#!/bin/bash` onwards. Then, does it work if you run it manually from Terminal (with a downloaded installer of course)? If not, does it give an error message? <comment312945> @patrix The top script looks like it is intended for the LaunchDaemon script and the bottom script looks like it is intended to be in an installer package. In any case, it is unclear how the LaunchDaemon is installed. <comment312955> Why not make the `Version` variable assignment cleaner with- `Version=$(sw_vers -productVersion |  cut -d . -f 2 )` ? <comment312956> @fd0 to remain as true to the original as possible, but I will add a mod <comment313082> klanomath - that works a treat, thanks. An osascript solution would be good too.