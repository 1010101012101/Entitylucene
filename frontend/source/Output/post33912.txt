MacPorts-installed packages not working after updating to Lion <body> I recently upgraded OS X from 10.6 to 10.7. Since doing this, certain command line tools I installed via MacPorts, such as ImageMagick, stopped working. For example when I run code$ convert Jobs.png -resample 72 Jobs.png/code I get:  precodedyld: Library not loaded: /System/Library/Frameworks/OpenCL.framework/Versions/A/Libraries/libclparser.dylib Referenced from: /opt/local/bin/convert Reason: image not found /code/pre  How can I fix this?  h2What I've tried:/h2  I've tried the following commands, to no avail:  precode$ sudo port selfupdate $ sudo port upgrade outdated $ sudo port upgrade imagemagick /code/pre  The last gives:  precode---&gt;  Activating perl5 @5.12.3_1+perl5_12 Error: Target org.macports.activate returned: Image error: /opt/local/share/man/man3p/App::Prove.3pm already exists and does not belong to a registered port.  Unable to activate port perl5. Use 'port -f activate perl5' to force the activation. Error: Failed to install perl5 Log for perl5 is at: /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_ports_lang_perl5/perl5/main.log Error: The following dependencies were not installed: perl5 Error: Problem while installing glib2 To report a bug, see &lt;http://guide.macports.org/#project.tickets&gt; /code/pre  Following the suggestion there I ran code$ sudo port -f activate perl5/code but this yielded:  precode---&gt;  The following versions of perl5 are currently installed: ---&gt;      perl5 @5.8.9_0 ---&gt;      perl5 @5.12.3_1+perl5_12 Error: port activate failed: Registry error: Please specify the full version as recorded in the port registry. /code/pre  At this point I'm at my wits' end, so any help is much appreciated!  <answer33944> Their migration page should cure all of your ills.  <comment38806> What does /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_ports_lang_perl5/perl5/main.log show as the error? <comment39071> Thanks, that worked! I had to run `sudo port -f activate perl5` after taking the steps there again, but this time it didn't yield the above errors, and after that ImageMagick installed fine.