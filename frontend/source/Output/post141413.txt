FTP server keeps stopping (Mavericks) <body> On a MacPro at remote office, I enabled FTP server with   precodesudo -s launchctl load -w /System/Library/LaunchDaemons/ftp.plist /code/pre  Now it works, but when downloading a large file, it will serve for a few seconds, then stop completely for a minute or more ... then resume (using codelftp/code with multiple connections.)  Like this:  img src="https://i.stack.imgur.com/Q9JXT.png" alt="enter image description here"  Is there any way to fix this? Or is there a more reliable FTP server service we could use?  codebrew search ftp/code shows me  precodebbftp-client   git-ftp        ncftp      pure-ftpd      vsftpd curlftpfs      lftp           proftpd    uberftp /code/pre  Are any of these FTP servers that could be set up as an always-on 'service'?  UPDATE: I installed pure-ftpd, got it up and running, and it's doing the same damn thing. 34mbps for 10 seconds, then 0 for 30 or so ... what is going on?  <answer141692> Could you test your end to end connection with this simple script based on codeping/code output:  pre #!/bin/sh # $Id: coupure.sh,v 1.1 2012/09/05 13:11:10 dan Exp dan $ _host_exist=`host $1` expr "${_host_exist}" : '.*address' /dev/null || {         echo ${_host_exist} &2         exit 1 }  ping $1 2/dev/null |         perl -e  '                 use strict ;                 use warnings ;                  my $started = 0 ;                 my $start = 0 ;                 my $end = 0 ;                 my $count = 0 ;                 my $was_down = -1 ;                 my $last_up = -1 ;                 my $last_hole = 0 ;                 my $now = 0 ;                 my $x = -1 ;                 my $hour = -1 ;                 my $min = -1 ;                 my $sec = -1 ;                 my $hole = 0 ;                 my $delta = 0 ;                 my $time_run = 0 ;                 my $sum_hole = 0 ;                 my $avg_hole = 0 ;                 my $sum_delta = 0 ;                 my $avg_delta = 0 ;                  sub catch_int {                         $end = time () ;                         $time_run = $end - $start ;                         printf ("\ntime run = %14d s,\tdrop count =  %8d", $time_run, $count) ;                         if ($time_run) {                                 printf (",\t %8.2f / d\n", $count * 86400 / $time_run) ;                         } else {                                 printf ("\n") ;                         }                         if ($count) {                                 $avg_hole = $sum_hole / $count ;                                 printf ("avg drop time =  %8.2f s\n", $avg_hole) ;                                 if ($count  1) {                                         $avg_delta = $sum_delta / ($count - 1);                                          printf ("avg int. time =  %8.2f s\n", $avg_delta) ;                                 }                         }                         exit ;                 }                  $start = time () ;                  $SIG{INT} = \&catch_int ;                  while () { #                       printf ("%s", $_) ;                          if (! $started) { #                               printf ("%s", $_) ;                                 if ($_ =~ /PING/ ) { next ; }                                 if ($_ =~ /bytes/) {                                         $was_down = 0 ;                                 } else {                                         $was_down = 1 ;                                 }                                 $started = 1 ;                         } else {                                 if ($_ =~ /bytes.*icmp_seq=/) { #-------+-------+-------+-------+-------+-------+-------+-------+ #                                       target is up #                                       printf ("!") ;                                         if ($was_down == 1) {                                                  $count ++ ;                                                 printf ("%4d\t", $count) ;                                                 ($sec, $min, $hour, $x, $x, $x, $x, $x, $x) = localtime ($last_up) ;                                                 printf ("%02d:%02d:%02d\t", $hour, $min, $sec) ;                                                 $now = time () - 1 ;                                                 ($sec, $min, $hour, $x, $x, $x, $x, $x, $x) = localtime ($now) ;                                                  printf ("-\t%02d:%02d:%02d\t", $hour, $min, $sec) ;                                                 $was_down = 0 ;                                                 $hole = $now - $last_up ;                                                 $sum_hole += $hole ;                                                 printf ("= %4d s", $hole) ;                                                  if ($last_hole) {                                                         $delta = $last_up - $last_hole ;                                                         $sum_delta += $delta ;                                                         printf (" + %6d s\n", $delta ) ;                                                 } else {                                                         printf ("\n") ;                                                 }                                                 $last_hole = $last_up ;                                         }                                         $last_up = time() ;                                 } else { #-------+-------+-------+-------+-------+-------+-------+-------+ #                                       target is down                                         if ($was_down == 0 ) {                                                 $was_down = 1 ;                                         }                                 }                         }                 }'  /pre  Just copy this in codecoupure.sh/code on your ftp client, type codemake coupure/code and run it:  precode./coupure target_ftp_server /code/pre  <comment166962> Might it be your connection that is failing, are you on WiFi? Have you tried to do this via AFP, SMB, or the webserver? <comment166964> You can go to 'System preferences' - 'Sharing' - 'File Sharing', that should start your FTP server. And there you can also activate SMB and AFP under options. No need for calling `launchctl` manually. <comment166965> AFAIK, Apple removed the FTP option in Mavericks. I don't see it. The only way I know to start it is via `launchctl`. AFP transfer maintains, but speeds are only 5-10mbps. Maybe going through LogMeIn Hamachi VPN is affecting it. I will have to test a direct connection. <comment166968> You might try  'System preferences' - 'Sharing' - 'Remote Login' for a SFTP server. <comment166972> → Ze'ev: is Wi-Fi involved there (CousinCocaine ®)? <comment166973> I tried `./coupure 25.14.33.139` and it said `Host 139.33.14.25.in-addr.arpa. not found: 3(NXDOMAIN)` ... seems to be reversing the IP addres?? <comment166974> @danielAzuelos no, no wifi, just gigE. <comment166975> @CousinCocaine I need FTP for my clients <comment166980> Also ... I tried testing with `iperf -c 25.1.203.32 -r -l 100M` and fastest I got was around 11mbps. Speedtest.net says our upstream is around 70mbps. Tried iperf with a public server, and got 52mbps <comment166981> Yes. That was my only way to check that a name was valid even when `ping` wasn't answering at first. You might remove the block starting at `expr` if you don't want to register your ftp server. <comment166983> This doesn't fit with GE. Run `mtr target_ftp_server` from your client and analyze your network bottleneck. <comment166986> @danielAzuelos Sorry, what is "GE"? And what is `mtr`? I don't have that installed. update: ok, i see it in brew, installing. <comment166988> @danielAzuelos Installed mtr ... now what? It's showing 0% loss. Can it show speed? <comment167014> @Ze'ev, I understand you want FTP, but I am trying to help you debugging, testing other protocols might give us a clue. I think your FTP server is fine but your connection is not. 'Speedtest.net' measures speed between your providers hub and a server and is not reliable in my opinion. <comment167016> GE == Gigabit Ethernet. <comment167017> → Ze'ev: from the information thus far, you don't have an `ftp` problem, but a basic `network` problem. You should edit this question to fix the subject. Then you'll get skilled colleagues to read your question and propose you different levels of answer suited to the *right* question. <comment167088> @danielAzuelos - I tested our connection using `iperf` to a public iperf server and got 50-70 mbps upload... doesn't that mean the network is fine, and that it's a software issue? <comment167117> Software issue is highly unlikely. Have you tried other protocols? (SMB, SFTP, AFP, etc) <comment167126> is this a duplicate post? http://apple.stackexchange.com/q/141713/55028 <comment167130> → Ze'ev: no this isn't a correct method for trouble shooting a network problem.