DIY Fusion Drive: Adding Recovery HD to a CoreStorage Volume Group <body> After creating a "DIY Fusion Drive" using the methods below in 10.8, I'm now wondering how to add a RecoveryHD partition to the internal drive.  Here's what I did to create a Logical Volume Group across two physical volumes (128G SSD/750GHD)  precode(make a clone / backup of all your data first) diskutil list (take note of the disk## of the two drives. In my case: disk0/disk1) diskutil corestorage create fusion_volume_group disk0 disk1 diskutil corestorage list (take note of the Logical Volume Group UUID) diskutil corestorage createVolume &lt;UUID&gt; jhfs+ FusionHD 749g restore the clone onto the FusionHD /code/pre  This worked great, but now my RecoveryHD is gone.  I'd like to add it back (it's on the external drive I cloned from my original HD)  Here's what the partition layout looks like right now:  precode$ diskutil list /dev/disk0    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                        *120.0 GB   disk0    1:                        EFI                         209.7 MB   disk0s1    2:          Apple_CoreStorage                         119.7 GB   disk0s2    3:                 Apple_Boot Boot OS X               134.2 MB   disk0s3 /dev/disk1    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                        *750.2 GB   disk1    1:                        EFI                         209.7 MB   disk1s1    2:          Apple_CoreStorage                         749.3 GB   disk1s2    3:                 Apple_Boot Boot OS X               650.0 MB   disk1s3 /dev/disk2    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                  Apple_HFS FusionHD               *744.5 GB   disk2 /code/pre  Does anyone know the diskUtil commands to add the recovery HD?  Ideally after the fact, which is where I'm at now?  <answer70477> You'll need to partition the drives first, putting the Recovery partition on one of your physical drives. It can't be part of the Fusion drive as its unlikely you can boot directly into a Core Storage logical volume (you need a boot loader separately).  Take note of the partition structure in this Ars Technica article about the Fusion drive.  The best way to do this is probably to start fresh by reinstalling Mountain Lion on either the SSD or HDD, then repeat the Fusion process with just the proper partition.  Once you've done a standard install, check your partitions by running codediskutil list/code, which should give output similar to this:  precode/dev/disk0    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                        *120.0 GB   disk0    1:                        EFI                         209.7 MB   disk0s1    2:                  Apple_HFS Macintosh HD            119.2 GB   disk0s2    3:                 Apple_Boot Recovery HD             650.0 MB   disk0s3 /code/pre  Make note of the identifier of the codeMacintosh HD/code partition (codedisk0s2/code in this case).  Then do the same steps you performed before, but change the codediskutil corestorage create fusion_volume_group/code command so to specify the codedisk0s2/code (or whatever the equivalent in your case is), and the identifier of the drive you emdidn't/em install OS X on. The resulting command should be similar to codediskutil corestorage create fusion_volume_group disk0s2 disk1/code strongbut make sure you've got the identifiers correct./strong The key is that we want to make a volume group out of just the Macintosh HD partition, not the whole drive (so that the EFI and Recovery partitions don't get wiped out). Then follow the rest of the procedure as you did before.  <answer70685> Here's a video outlining the process, plus some benchmarks : http://www.youtube.com/watch?v=I_odnNpv-FQ  Commands you'll need in order:  diskutil list  diskutil cs create Fusion diskx diskx  NOTE: You can replace Fusion with whatever you'd like to name your Logical Volume Group  diskutil cs list  diskutil coreStorage createVolume YOUR_DEVICE_ID_HERE jhfs+ "Macintosh Fusion" 100%  NOTE: You can replace "Macintosh Fusion" with whatver you want to name your drive. Remember to use ""'s if you want a space in your name like we did, otherwise you do not need them.  After installation is finished, open terminal and turn of indexing:  sudo mdutil -i off  If you would like to revert back to 2 separate drives, boot into the installer again, open Terminal and type:  diskutil cs delete YOUR_DEVICE_ID  You will then be able to format them however you'd like using Terminal or Disk Utility  <answer70993> Ok so I have solved the problem without re-formatting or re-installing. Hopefully most people won't wind up in this situation.  See @robmathers answer for tips on how to avoid deleting your Recovery HD in the first place.  strongWARNING/strong the following commands are fairly low-level and may cause you to loose data. Take proper precautions (backup, clone, etc).  But for anyone in my situation after the RecoveryHD is already gone, here is what I did:  ol liBackup all data / clone your drive/li liCreate a bootable USB (or use an existing HD) with 10.8/li liBoot into that alternate drive (so you're not modifying the HD you've currently mounted)/li liUnmount the Fusion HD/li liOpen terminal, switch to superuser and follow these instructions:/li /ol  List the current configuration, and make a note of which drives you'll be modifying. Your exact sizes and GUIDs will be different than mine. strongIt is crucial to use your numbers instead of mine/strong.  precodediskutil corestorage list /code/pre  Take note of the UUID of the physical drive you're adding the Recovery to.  precodediskutil list /code/pre  Take note of the exact size in bytes of the Recovery on the current startup disk (disk2s3 might be different for you).  precodediskutil info disk2s3 /code/pre  Resize the Physical Volume for the drive you want to add the Recovery partition to. To determine the size, look @ the existing Recovery partition on the USB. In my case it was just under 1GB.  For the following command, pvUUID is the UUID of the drive you're adding the Recovery to, size is 1GB less than the current size.    precodediskutil coreStorage resizeDisk &lt;pvUUID&gt; &lt;size&gt; JHFS+ Recovery 784220160B /code/pre  NOTE: you may need to unmount the volumes repeatedly in the following steps. OSX tends to aggressively re-mount the volumes.  Repartition the new "Recovery" partition from a jHFS+ to Apple_Boot. First, take note of the exact start/size of the partition.   precodegpt show disk0       start       size  index  contents         0          1         PMBR         1          1         Pri GPT header         2         32         Pri GPT table        34          6        40     409600      1  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B    409640  246725744      2  GPT part - 48465300-0000-11AA-AA11-00306543ECAC 247135384     262144 **247397528    1269528       3  GPT part - 48465300-0000-11AA-AA11-00306543ECAC** 248667056    1402591 250069647         32         Sec GPT table 250069679          1         Sec GPT header  /code/pre  Now remove the partition, and re-add it with a different UUID (the UUID is what determines the type of partition)  precodegpt remove -b 247397528 -s 1269528 -t 48465300-0000-11AA-AA11-00306543ECAC disk0 gpt add -b 247397528 -s 1269528 -t 426F6F74-0000-11AA-AA11-00306543ECAC disk0 /code/pre  Now copy the entire Recovery partition from the good one to this new one:  precodedd if=/dev/disk2s3 of=/dev/disk0s3 /code/pre  Many thanks to the following sites for reference.  Read up on them before diving in, if you don't understand any of these steps.  http://blog.fosketts.net/2011/08/05/undocumented-corestorage-commands/  http://www.dmitry-dulepov.com/2011/09/how-to-create-mac-os-x-lion-recovery.html  <answer75637> I find some good answers in this post. I have worked out a step-by-step guide on repartitioning the harddrive with a windows partition (for Windows 7/8 Bootcamp) within the first 2.2 TB space and rebuilding the fusion drive using three partitions.  You will find my guide usefull on http://jochem.ke-works.com/post/38498466700/bootcamp-on-3tb-fusion-drive-macosx  <answer97418> Jess Bowers posted a really nice solution but it worked well for me only until this one:  precodediskutil coreStorage resizeDisk &lt;pvUUID&gt; &lt;size&gt; JHFS+ Recovery 784220160B /code/pre  And the output was:  precodeError: -69720: There is not enough free space in the Core Storage Logical Volume Group for this operation /code/pre  The solution is to resize Logical Volume first. For the following command, codelvUUID/code is the UUID of the Logical Volume and codesize/code is equal to codecurrent size of the Logical Volume/code - codesize of the Recovery partition/code (or code1GB less than the current size/code if you follow Jess Bowers' solution word by word):  precodediskutil coreStorage resizeVolume &lt;lvUUID&gt; &lt;size&gt; /code/pre  And right after that coderesizeDisk.../code and the rest of his solution worked just like a charm.  PS. Just signed up so I can't comment directly, sorry.  <comment81800> Do you know what the diskutil commands would be to do that operation? <comment81801> I added some more info should work, but I don't have a set up I can actually test it on. The Fusion drive stuff is pretty undocumented at this point, and we're just working off what a few people have come up with by trial and error. Be sure to post any results you get here. <comment82039> I think you're right about specifying the disk0s2 rather than disk0. I cannot verify this today, as the weekend was my 'tear my machine apart and rebuild' time. Now I have to work! I'll try to test this soon. <comment82080> It's not clear what you are doing here to make the recovery HD. Could you edit out the unrelated items to keep this thread lean and mean? <comment82105> I just installed 10.8.2 onto a brand new empty CS volumes (120GB SSD + 640GB HDD) to see if the ML installer would add a new Recovery partition - it didn't.  So the instructions above should be correct, will try on next test deploy. <comment82751> SUCCESS! Late-2008 MacBook Pro, 2nd HD in optical drive slot: I replaced the main 320GB HD with a 256GB SSD. Following @robmather: I installed Mountain Lion on the SSD; booted the MBP from an external drive; studied the `diskutil list` output to get the disk IDENTIFIER for "Macintosh HD" on the SSD. Used that with diskutil's corestorage commands to create fusion volume. Booted from Recovery Volume, installed ML and migrated entire original disk to my new 560GB fusion volume. Everything works, even Ubuntu on VMWare. Ordered a slow/cheap 1TB HD; soon my 4-yr-old MBP powers on w 8GB, 1.25TB, SSD! <comment87812> Answers on Ask Different need to be more than just a link. It's okay to include a link, but please summarize or excerpt it in the answer. The idea is to make the answer stand alone. <comment114697> update: this setup has been running flawlessly for me since 11/12.