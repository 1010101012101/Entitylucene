OS X El Capitan port forwarding to Parallels VM using pfctl <body> I have Parallels Desktop 11, which does not have support port forwarding to VMs (just the Pro version supports it). So I am trying to use pfctl to forward ports to my Parallels VM.   I have followed this answer to setup the port forwarding. Forwarding is enabled with codesysctl net.inet.ip.forwarding=1/code  I have specified this rule.  precoderdr pass inet proto tcp from any to any port 51414 -&gt; 10.211.55.9 port 51414 /code/pre  10.211.55.9 is the static IP of the Parallels VM.  However the port forwarding does not work for VM. It can successfully forward port x to port y on 127.0.0.1 but can not forward port x from Mac to port x on Parallels VM.  What could be going wrong? Is it Parallels which is dropping packets etc?  <answer262954> There are two solutions for your problem with Parallels Desktop 11 (this doesn't apply to Parallels Desktop Pro/Enterprise 11, which both provide a convenient interface to configure port forwarding - nonetheless the solutions should work also in those enhanced versions):  Instead of attaching the VM's network interface to the "Shared Network" use a bridged interface (e.g. en0 or en1) and configure it with a IP/netmask in the respective network. Then you don't need NAT/port forwarding.  hr  If you insist on a NAT'ed network do the following:  In the example below I use codenc/code as server. To run a server enter codenc -l -4 port/code and to connect to this server use codenc server-IP port/code. You may also specify a source port: codenc -p source-port server-IP port/code.  Here I use codenc -l -4 11111/code on the VM. To connect to this server I would run codenc server-IP 11111/code from a host in the same network. After starting the server and connecting the client you can simply enter some text, which is sent to the other console. To connect from a third host in a different network to the VM nc-server I want to use codenc NAT-host-IP 22222/code. So I have to forward NAT-host-IP:22222 to VM-IP:11111. NAT-host in this case is the Mac hosting the Parallels VM.  ol liattach the VM guest's network interface to the "Host-only Network". Usually Parallels' host-only network has the following host configuration (check this by entering codeifconfig/code on the host machine):  precodevnic1: ... ... inet 10.37.129.2 netmask 255.255.255.0 broadcast 10.37.129.255 /code/pre  So configure the VM guest as following:  ul liIP: 10.37.129.x (with x â‰  0,1,2,255) - below I assume it's 10.37.129.10/li liNetmask: 255.255.255.0/li liGateway: 10.37.129.2 /li liDNS: a real DNS server like 8.8.8.8/li /ul/li liOn the NAT-host machine enable forwarding in /etc/sysctl.conf:  precodenet.inet.ip.forwarding=1 net.inet6.ip6.forwarding=1 /code/pre  and reboot the host./li liOn the NAT-host machine (with an example IP of en0: 192.168.0.2) create an anchor file org.user.forwarding in /private/etc/pf.anchors  precodesudo touch /private/etc/pf.anchors/org.user.forwarding /code/pre  with the following content and a trailing empty line:  precoderdr pass on en0 inet proto tcp from any to any port 22222 -&gt; 10.37.129.10 port 11111 /code/pre/li liOn the NAT-host machine modify the file /private/etc/pf.conf but keep a trailing empty line  original file:  precode... scrub-anchor "com.apple/*" nat-anchor "com.apple/*" rdr-anchor "com.apple/*" dummynet-anchor "com.apple/*" anchor "com.apple/*" load anchor "com.apple" from "/etc/pf.anchors/com.apple" /code/pre  to  precode... scrub-anchor "com.apple/*" nat-anchor "com.apple/*" rdr-anchor "com.apple/*" rdr-anchor "org.user.forwarding" nat on en0 proto {tcp, udp, icmp} from 10.37.129.0/24 to any -&gt; en0 pass from {lo0, 10.37.129.0/24} to any keep state dummynet-anchor "com.apple/*" anchor "com.apple/*" load anchor "com.apple" from "/etc/pf.anchors/com.apple" load anchor "org.user.forwarding" from "/etc/pf.anchors/org.user.forwarding" /code/pre/li liParse and test your anchor and your pf.conf file to make sure that there are no errors:  precodesudo pfctl -vnf /etc/pf.anchors/org.user.forwarding sudo pfctl -vnf /etc/pf.conf /code/pre/li liEnable pf with:  precodesudo pfctl -e -f /etc/pf.conf /code/pre/li liTo test this start the nc server on the VM with  codenc -l -4 11111/code. Now on a third host in your physical network enter codenc 192.168.0.2 22222/code./li /ol  hr  After a reboot you have to start pf again. If you want to enable pf permanently check my other pf related answers.  After a system update or upgrade some of the original files above may have been replaced and you have to reapply all changes.  <comment329096> Looked at this gist https://gist.github.com/kujohn/7209628 looks like lots of other ppl has problem forwarding ports to different ip <comment330256> Will try it out..