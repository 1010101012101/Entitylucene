Terminal and iTerm not working after upgrading to macOS Sierra <body> After I updated to macOS Sierra, Terminal.app and iTerm failed with the same error:  precodelogin: /usr/local/bin/bash: No such file or directory /code/pre  Now I can fix Terminal with this. But then in Terminal:  precodemkdir: /Users/username/.bash_sessions: Operation not permitted /code/pre  Also, this does not fix iTerm. So where does this code/usr/local/bin/bash/code come from, why is it missing, and if Sierra deleted it, why isn't the new Terminal updated?  There's a guy with the same problem as mine. So I'm not alone.  <answer259682> ul liOpen System Preferences  Users &amp; Groups./li liUnlock the padlock at the bottom of the preference pane/li liHold down the option key and click your account then click the Advanced Options... menu/li liChange your shell to code/bin/bash/code/li liClick the codeOK/code button and close the preference pane./li liLogout then log back in/li /ul  <answer259803> code/usr/local/bin/bash/code was from codebrew install bash/code. I had code/usr/local/bin/bash/code in code/etc/shells/code. Somehow Sierra update deleted code/usr/local/bin/bash/code and both Terminal and iTerm stopped working. I had to revert back to code/bin/bash/code, reinstall codebrew/code and bash 4.4 from brew, and now all is fine.  <comment325077> Thanks, now I know where the default shell for a user is.