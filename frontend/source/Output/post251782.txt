Shell string manipulation not working in Applescript <body> I'm trying to make a service to translate things which Chrome doesn't translate automatically. The following script works when run from my shell  precode#!/bin/bash  input='это тест)))' # translates to - this is a test))) if [[ $(echo "$input") =~ ')' ]]; then      input="$(echo "${input//)/}")" fi export PATH="/usr/local/bin:$PATH"; /usr/local/bin/trans -e yandex -b :en "$input"  /code/pre  the result: codethis is a test/code  However when I put this into an Applescript:  precodeset input to "это тест)))" set output to (do shell script "if [[ $(echo " &amp; quoted form of input &amp; ") =~ ')' ]]; then " &amp; quoted form of input &amp; "=\"$(echo \"${" &amp; quoted form of input &amp; "//)/}\")\"; fi; export PATH=\"/usr/local/bin:$PATH\"; /usr/local/bin/trans -e google -b :en " &amp; quoted form of input &amp; "")  display dialog output as string /code/pre  The result is still codethis is a test)))/code  It still runs and translates the input string. But it doesn't remove the code)))/code. I don't understand why the codeif/code statement is not working in my applescript version. Am I quoting something wrong?   This script uses a program called strongTranslate-Shell/strong which can be found on GitHub or at the program author's website here.  <answer251833> It doesn't work because, the shell try to change a 'string', not to set a variable.  The command as example:  precodedo shell script "if [[ $(echo " &amp; quoted form of input &amp; ") =~ ')' ]]; then " &amp; quoted form of input &amp; "=\"$(echo \"${" &amp; quoted form of input &amp; "//)/}\")\"; fi; " /code/pre  After the concatenation (Look at the strongEvents/strong in the script editor), the command is:     do shell script "if [[ $(echo 'это тест)))') =~ ')' ]]; then 'это   тест)))'=\"$(echo \"${'это тест)))'//)/}\")\"; fi; "   hr  So, put the content of the strongAppleScript/strong's variable into a variable in the shell (I remove the strongecho/strong commands, because it's useless), like this:  precodeset input to "это тест)))" set output to do shell script "input=" &amp; (quoted form of input) &amp; "; if [[  \"$input\" =~ ')' ]]; then input=${input//)/}; fi; export PATH=\"/usr/local/bin:$PATH\"; /usr/local/bin/trans -e google -b :en \"$input\"" display dialog output /code/pre  <comment313116> Where did `trans` come from as it's not a native OS X app included in the OS X installation, so I'm unable to reproduce your command line for testing. Is there a native OS X binary available from somewhere or the source code so I can compile it directly as I don't use the typical package managers, e.g Homebrew? <comment313176> My apologies. I completely overlooked that. `trans` is  **translate-shell** which can be found on [GitHub](https://github.com/soimort/translate-shell) or at the authors own website [here](https://www.soimort.org/translate-shell/).