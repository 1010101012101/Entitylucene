How to create a greylist domain exclusion on 10.7 Lion Mail server? <body> Having a Mail server running on Mac OS X 10.7.5 (Lion) and having "Junk Mail Filtering" enabled, causes stronggreylisting/strong to kick in on every received message. An example:  precodeDec 23 22:05:45 servername /usr/libexec/postfix/greylist.pl[89032]: Temporary message rejection to: &lt;user@host.tld&gt; from: &lt;nobody@linux3.s12.com.br&gt; sent from: [50.23.172.250] for: 60 seconds due to greylisting /code/pre  That is nice for spam prevention, but not so nice for customers submitting orders through a PHP formmail at our web site. This causes a delay before order messages are being delivered to our mailbox. Our web site is being hosted by a third party web hosting firm.  How to exclude the messages sent via our web hosting firm from greylisting?  <answer114821> As this is 10.7 Server, the 10.8 command:  precode$ sudo serveradmin settings mail:postfix:add_whitelist_domain = "yahoo.com" /code/pre  can't be used in this case.  hr  h31. Create an exception file/h3  precode$ sudo touch /etc/postfix/sender_access /code/pre  h32. Fill this file with domains that are OK to be excluded from the (greylist) policy/h3  precode$ echo 'mail-out.ovh.net OK' | sudo tee -a /etc/postfix/sender_access /code/pre  h33. Create database from text file/h3  precode$ sudo postmap hash:/etc/postfix/sender_access /code/pre  h34. Modify the Mac OS Lion SMTP server configuration/h3  This configuration change allows the domains configured in the exception file to bypass running the greylist check. Therefore open up the main.cf, for example using the codenano/code editor:  precode$ sudo nano /etc/postfix/main.cf /code/pre  Search for the line that starts with codesmtpd_recipient_restrictions =/code, for example using the key combination kbdCtrl/kbd + kbdW/kbd  The line might look like:  precodesmtpd_recipient_restrictions = permit_sasl_authenticated permit_mynetworks reject_unauth_destination check_policy_service unix:private/policy permit /code/pre  For readability I am writing this one line now as multiple lines:  precodesmtpd_recipient_restrictions =      permit_sasl_authenticated      permit_mynetworks      reject_unauth_destination      check_policy_service unix:private/policy      permit /code/pre  After codereject_unauth_destination/code and before codecheck_policy_service unix:private/policy/code some new text has to be inserted. The new text tells the mail server to look in the newly created file. The magic words to insert are: codecheck_sender_access hash:/etc/postfix/sender_access/code.  Now the codesmtpd_recipient_restrictions/code looks like:  precodesmtpd_recipient_restrictions =      permit_sasl_authenticated      permit_mynetworks      reject_unauth_destination      check_sender_access hash:/etc/postfix/sender_access      check_policy_service unix:private/policy      permit /code/pre  Or written as a single line, it looks like:  precodesmtpd_recipient_restrictions = permit_sasl_authenticated permit_mynetworks reject_unauth_destination check_sender_access hash:/etc/postfix/sender_access check_policy_service unix:private/policy permit /code/pre  To save the change press kbdCtrl/kbd + kbdO/kbd, and to exit the nano editor press kbdCtrl/kbd + kbdX/kbd.  h35. Make the configuration changed become effective/h3  precode$  sudo postfix reload /code/pre  And presto, now the web form mail messages arrive without greylisting delay.  hr  PS You can also use the sender_access file to reject users, by adding lines like: codeuser@abadboy.com REJECT/code 