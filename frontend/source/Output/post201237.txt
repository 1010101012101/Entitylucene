MacPorts not working after power outage during build (sqlite disk I/O error) <body> I was building packages in MacPorts on a Mac Mini when the power went out. Now anything I try to do in MacPorts (codeinstall/code, codeclean/code, codeselfupdate/code) results in the following error:  precodesqlite error: disk I/O error (3850) while executing query: ATTACH DATABASE '/opt/local/var/macports/registry/registry.db' AS registry     while executing "registry::open $db_path"     (procedure "mportinit" line 610)     invoked from within "mportinit ui_options global_options global_variations" Error: /opt/local/bin/port: Failed to initialize MacPorts, sqlite error: disk I/O error (3850) while executing query: ATTACH DATABASE '/opt/local/var/macports/registry/registry.db' AS registry /code/pre  How can I fix this?  <answer201255> The fix for this is actually quite simple, and is mentioned in this MacPorts issue. From a comment on the issue by "pixilla@…":  precode$ cd /opt/local/var/macports/registry $ ls registry.db-journal                                                                                                                                                                              $ sudo sqlite3 registry.db sqlite&gt; .tables sqlite&gt; SELECT id FROM ports; sqlite&gt; .quit /code/pre  Based on another comment by "ecronin@…", I conclude that, had I run any codeport/code command as root, it would have been fixed automatically and saved me all this trouble. But I always forget to use codesudo/code...  strongEDIT/strong Wait, I did run a codeport/code command with codesudo/code. Weird. Oh, well, at least it works now.  <comment242550> I would restore from backup as a fie is corrupt and that file depends on the pros you have installed and can't be reproduced from a new install <comment242551> @Mark I don't have any backups for this particular machine. Any other ideas? <comment242563> The way to reinstall macports is to have a list of the ports you installed and then redo - to get the list of pros you need that db. So no - just take this as a learning moment and realise you need backups. You can reinstall macports from scratch if you know which ones you need <comment242573> @Mark Both `port list installed` and `port -qv installed` result in the same error. Is there a way to get a list of installed ports outside of macports? <comment242576> No as that list is held in the database that is corrupted. <comment242582> @Mark Hmm... it looks like `/opt/local/var/macports/registry/portfiles/` has a directory for each of my ports, maybe I could use that...