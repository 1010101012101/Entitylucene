Mail.app crashes constantly, even after deleting mail profile and cache <body> Apple Mail crashes for me nonstop. Sometimes immediately after opening, and sometimes everything is fine until I add an attachment to an email or something. Somedays it's totally useless and sometimes I can go a week without crashing.  Today is totally useless. I've gone through the mail profile deletion and reinstall, deleting the cache, uninstalling and reinstalling OS etc. Can someone help me diagnose based on this reporting?  precodeProcess:               Mail [37569] Path:                  /Applications/Mail.app/Contents/MacOS/Mail Identifier:            com.apple.mail Version:               8.2 (2070.6) Build Info:            Mail-2070006000000000~1 Code Type:             X86-64 (Native) Parent Process:        ??? [1] Responsible:           Mail [37569] User ID:               501  Date/Time:             2015-02-27 15:15:52.372 -0500 OS Version:            Mac OS X 10.10.2 (14C109) Report Version:        11 Anonymous UUID:        5F211EFC-A127-975F-0858-39FB88B8FCD4  Sleep/Wake UUID:       BE152FB7-9B09-4078-AD97-B04ABE20B881  Time Awake Since Boot: 450000 seconds Time Since Wake:       17000 seconds  Crashed Thread:        4  Dispatch queue: NSOperationQueue 0x6180002448c0 :: NSOperation 0x61800005d8b0 (QOS: UTILITY)  Exception Type:        EXC_CRASH (SIGABRT) Exception Codes:       0x0000000000000000, 0x0000000000000000  Application Specific Information: *** Terminating app due to exception while holding database lock 'NSInternalInconsistencyException', reason: '&lt;MFEWSStore: 0x7fe269519050 (mailbox=&lt;MFMailbox:0x7fe26961eff0 (relative path=Deleted Items/Asana, attributes=0, displayName=Asana uuid=003BDFC4-B500-4FBD-920B-3987C3AAE2A4)&gt;)&gt; is not a Library IMAP store' abort() called  Application Specific Backtrace 1: 0   CoreFoundation                      0x00007fff9b0f766c __exceptionPreprocess + 172 1   libobjc.A.dylib                     0x00007fff9629976e objc_exception_throw + 43 2   CoreFoundation                      0x00007fff9b0f744a +[NSException raise:format:arguments:] + 106 3   Foundation                          0x00007fff947e13a9 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 195 4   Mail                                0x00007fff9aa40120 -[MFLibraryIMAPMessage setDataSource:] + 206 5   Mail                                0x00007fff9aa1ece3 +[MFLibrary setStoreForMessage:fromMailbox:knownStores:] + 293 6   Mail                                0x00007fff9aa1365f __230+[MFLibrary insertOrUpdateMessages:withMailbox:fetchBodies:isInitialImport:oldMessagesByNewMessage:remoteIDs:newDocumentIDs:setFlags:clearFlags:messageFlagsForMessages:copyFiles:progressDelegate:updateRowIDs:missedMessages:error:]_block_invoke1070 + 23360 7   Mail                                0x00007fff9aa373cd +[MFLibrary executeBlock:isWriter:useTransaction:isPrivileged:] + 2366 8   Mail                                0x00007fff9aa0cd6c +[MFLibrary insertOrUpdateMessages:withMailbox:fetchBodies:isInitialImport:oldMessagesByNewMessage:remoteIDs:newDocumentIDs:setFlags:clearFlags:messageFlagsForMessages:copyFiles:progressDelegate:updateRowIDs:missedMessages:error:] + 5837 9   Mail                                0x00007fff9aa164e1 +[MFLibrary duplicateMessages:newRemoteIDs:newDocumentIDs:forMailbox:setFlags:clearFlags:createNewCacheFiles:error:] + 232 10  Mail                                0x00007fff9a9cabe8 __47-[MFEWSStore _appendToServerWithContext:error:]_block_invoke + 1430 11  CoreFoundation                      0x00007fff9b02c536 __53-[__NSArrayI enumerateObjectsWithOptions:usingBlock:]_block_invoke + 70 12  CoreFoundation                      0x00007fff9b02c469 -[__NSArrayI enumerateObjectsWithOptions:usingBlock:] + 297 13  Mail                                0x00007fff9a9ca513 -[MFEWSStore _appendToServerWithContext:error:] + 922 14  Mail                                0x00007fff9ab2493b -[MFRemoteStore _doAppend:fromStore:error:] + 755 15  Mail                                0x00007fff9ab2455b -[MFRemoteStore appendMessages:unsuccessfulOnes:newMessageIDs:newMessages:newDocumentIDsByOld:flagsToSet:forMove:error:] + 1811 16  Mail                                0x00007fff9aae36ab -[MFMessageStore appendMessages:unsuccessfulOnes:newMessageIDs:newMessages:flagsToSet:forMove:error:] + 142 17  Mail                                0x00007fff9aae3765 -[MFMessageStore appendMessages:unsuccessfulOnes:newMessageIDs:newMessages:flagsToSet:forMove:] + 133 18  Mail                                0x00007fff9aae3816 -[MFMessageStore appendMessages:unsuccessfulOnes:newMessageIDs:newMessages:flagsToSet:] + 124 19  Mail                                0x00007fff9aae394f -[MFMessageStore appendMessages:unsuccessfulOnes:newMessageIDs:newMessages:] + 103 20  Mail                                0x00007fff9aae39c7 -[MFMessageStore appendMessages:unsuccessfulOnes:newMessageIDs:] + 74 21  Mail                                0x00007fff9aae3a24 -[MFMessageStore appendMessages:unsuccessfulOnes:] + 53 22  Mail                                0x00007fff9aad35ba -[MFMessageRule _appendMessages:fromSourceMailbox:toDestinationMailbox:destinationStores:rejectedMessages:messagesToBeDeleted:] + 880 23  Mail                                0x00007fff9aad3fa3 -[MFMessageRule performActionsOnMessages:sourceStores:destinationStores:transferredOrDeleted:rejectedMessages:messagesToBeDeleted:] + 2256 24  Mail                                0x00007fff9aacaf82 routeMessagesAccordingToRule + 307 25  Mail                                0x00007fff9aacbf0b -[MFMessageRouter routeMessages:fromStores:fetchingBodies:messagesNeedingBodies:] + 1738 26  Mail                                0x00007fff9aae244a -[MFMessageStore routeMessages:isUserAction:fetchingBodies:messagesNeedingBodies:] + 187 27  Mail                                0x00007fff9aae1f85 -[MFMessageStore routeMessages:fetchingBodies:messagesNeedingBodies:] + 246 28  IMAP                                0x00007fff8e47b54c -[IMAPMailboxSyncEngine _processResponsesWithMonitor:] + 3110 29  IMAP                                0x00007fff8e479f84 -[IMAPMailboxSyncEngine _goWithMessages:] + 1605 30  Mail                                0x00007fff9aa417fb -[MFLibraryIMAPStore _fetchForCheckingNewMail:] + 352 31  Mail                                0x00007fff9a9e0f62 -[MFIMAPAccount fetchSynchronouslyIsAuto:] + 655 32  CoreFoundation                      0x00007fff9afd03cc __invoking___ + 140 33  CoreFoundation                      0x00007fff9afd0222 -[NSInvocation invoke] + 290 34  MailCore                            0x00007fff95d89e1a -[MCMonitoredInvocation invoke] + 242 35  MailCore                            0x00007fff95db4014 -[MCThrowingInvocationOperation main] + 48 36  MailCore                            0x00007fff95d3c36d -[_MCInvocationOperation main] + 426 37  Foundation                          0x00007fff946f632c -[__NSOperationInternal _start:] + 653 38  Foundation                          0x00007fff946f5f33 __NSOQSchedule_f + 184 39  libdispatch.dylib                   0x00007fff923a5c13 _dispatch_client_callout + 8 40  libdispatch.dylib                   0x00007fff923a9365 _dispatch_queue_drain + 1100 41  libdispatch.dylib                   0x00007fff923aaecc _dispatch_queue_invoke + 202 42  libdispatch.dylib                   0x00007fff923a86b7 _dispatch_root_queue_drain + 463 43  libdispatch.dylib                   0x00007fff923b6fe4 _dispatch_worker_thread3 + 91 44  libsystem_pthread.dylib             0x00007fff93a4c637 _pthread_wqthread + 729 45  libsystem_pthread.dylib             0x00007fff93a4a40d start_wqthread + 13  Thread 0:: Dispatch queue: com.apple.main-thread 0   libsystem_kernel.dylib          0x00007fff9c2f14de mach_msg_trap + 10 1   libsystem_kernel.dylib          0x00007fff9c2f064f mach_msg + 55 2   com.apple.CoreFoundation        0x00007fff9b007b34 __CFRunLoopServiceMachPort + 212 3   com.apple.CoreFoundation        0x00007fff9b006ffb __CFRunLoopRun + 1371 4   com.apple.CoreFoundation        0x00007fff9b006858 CFRunLoopRunSpecific + 296 5   com.apple.HIToolbox             0x00007fff8fe6faef RunCurrentEventLoopInMode + 235 6   com.apple.HIToolbox             0x00007fff8fe6f86a ReceiveNextEventCommon + 431 7   com.apple.HIToolbox             0x00007fff8fe6f6ab _BlockUntilNextEventMatchingListInModeWithFilter + 71 8   com.apple.AppKit                0x00007fff97307f81 _DPSNextEvent + 964 9   com.apple.AppKit                0x00007fff97307730 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 194 10  com.apple.AppKit                0x00007fff972fb593 -[NSApplication run] + 594 11  com.apple.AppKit                0x00007fff972e6a14 NSApplicationMain + 1832 12  libdyld.dylib                   0x00007fff992035c9 start + 1  Thread 1:: Dispatch queue: com.apple.libdispatch-manager 0   libsystem_kernel.dylib          0x00007fff9c2f7232 kevent64 + 10 1   libdispatch.dylib               0x00007fff923a8a6a _dispatch_mgr_thread + 52  Thread 2: 0   libsystem_kernel.dylib          0x00007fff9c2f694a __workq_kernreturn + 10 1   libsystem_pthread.dylib         0x00007fff93a4a40d start_wqthread + 13  Thread 3: 0   libsystem_kernel.dylib          0x00007fff9c2f694a __workq_kernreturn + 10 1   libsystem_pthread.dylib         0x00007fff93a4a40d start_wqthread + 13  Thread 4 Crashed:: Dispatch queue: NSOperationQueue 0x6180002448c0 :: NSOperation 0x61800005d8b0 (QOS: UTILITY) 0   libsystem_kernel.dylib          0x00007fff9c2f6286 __pthread_kill + 10 1   libsystem_c.dylib               0x00007fff8dfc3b53 abort + 129 2   com.apple.Mail.framework        0x00007fff9aa38037 +[MFLibrary executeBlock:isWriter:useTransaction:isPrivileged:] + 5544 3   com.apple.Mail.framework        0x00007fff9aa0cd6c +[MFLibrary insertOrUpdateMessages:withMailbox:fetchBodies:isInitialImport:oldMessagesByNewMessage:remoteIDs:newDocumentIDs:setFlags:clearFlags:messageFlagsForMessages:copyFiles:progressDelegate:updateRowIDs:missedMessages:error:] + 5837 4   com.apple.Mail.framework        0x00007fff9aa164e1 +[MFLibrary duplicateMessages:newRemoteIDs:newDocumentIDs:forMailbox:setFlags:clearFlags:createNewCacheFiles:error:] + 232 5   com.apple.Mail.framework        0x00007fff9a9cabe8 __47-[MFEWSStore _appendToServerWithContext:error:]_block_invoke + 1430 6   com.apple.CoreFoundation        0x00007fff9b02c536 __53-[__NSArrayI enumerateObjectsWithOptions:usingBlock:]_block_invoke + 70 7   com.apple.CoreFoundation        0x00007fff9b02c469 -[__NSArrayI enumerateObjectsWithOptions:usingBlock:] + 297 8   com.apple.Mail.framework        0x00007fff9a9ca513 -[MFEWSStore _appendToServerWithContext:error:] + 922 9   com.apple.Mail.framework        0x00007fff9ab2493b -[MFRemoteStore _doAppend:fromStore:error:] + 755 10  com.apple.Mail.framework        0x00007fff9ab2455b -[MFRemoteStore appendMessages:unsuccessfulOnes:newMessageIDs:newMessages:newDocumentIDsByOld:flagsToSet:forMove:error:] + 1811 11  com.apple.Mail.framework        0x00007fff9aae36ab -[MFMessageStore appendMessages:unsuccessfulOnes:newMessageIDs:newMessages:flagsToSet:forMove:error:] + 142 12  com.apple.Mail.framework        0x00007fff9aae3765 -[MFMessageStore appendMessages:unsuccessfulOnes:newMessageIDs:newMessages:flagsToSet:forMove:] + 133 13  com.apple.Mail.framework        0x00007fff9aae3816 -[MFMessageStore appendMessages:unsuccessfulOnes:newMessageIDs:newMessages:flagsToSet:] + 124 14  com.apple.Mail.framework        0x00007fff9aae394f -[MFMessageStore appendMessages:unsuccessfulOnes:newMessageIDs:newMessages:] + 103 15  com.apple.Mail.framework        0x00007fff9aae39c7 -[MFMessageStore appendMessages:unsuccessfulOnes:newMessageIDs:] + 74 16  com.apple.Mail.framework        0x00007fff9aae3a24 -[MFMessageStore appendMessages:unsuccessfulOnes:] + 53 17  com.apple.Mail.framework        0x00007fff9aad35ba -[MFMessageRule _appendMessages:fromSourceMailbox:toDestinationMailbox:destinationStores:rejectedMessages:messagesToBeDeleted:] + 880 18  com.apple.Mail.framework        0x00007fff9aad3fa3 -[MFMessageRule performActionsOnMessages:sourceStores:destinationStores:transferredOrDeleted:rejectedMessages:messagesToBeDeleted:] + 2256 19  com.apple.Mail.framework        0x00007fff9aacaf82 routeMessagesAccordingToRule + 307 20  com.apple.Mail.framework        0x00007fff9aacbf0b -[MFMessageRouter routeMessages:fromStores:fetchingBodies:messagesNeedingBodies:] + 1738 21  com.apple.Mail.framework        0x00007fff9aae244a -[MFMessageStore routeMessages:isUserAction:fetchingBodies:messagesNeedingBodies:] + 187 22  com.apple.Mail.framework        0x00007fff9aae1f85 -[MFMessageStore routeMessages:fetchingBodies:messagesNeedingBodies:] + 246 23  com.apple.IMAP                  0x00007fff8e47b54c -[IMAPMailboxSyncEngine _processResponsesWithMonitor:] + 3110 24  com.apple.IMAP                  0x00007fff8e479f84 -[IMAPMailboxSyncEngine _goWithMessages:] + 1605 25  com.apple.Mail.framework        0x00007fff9aa417fb -[MFLibraryIMAPStore _fetchForCheckingNewMail:] + 352 26  com.apple.Mail.framework        0x00007fff9a9e0f62 -[MFIMAPAccount fetchSynchronouslyIsAuto:] + 655 27  com.apple.CoreFoundation        0x00007fff9afd03cc __invoking___ + 140 28  com.apple.CoreFoundation        0x00007fff9afd0222 -[NSInvocation invoke] + 290 29  com.apple.MailCore              0x00007fff95d89e1a -[MCMonitoredInvocation invoke] + 242 30  com.apple.MailCore              0x00007fff95db4014 -[MCThrowingInvocationOperation main] + 48 31  com.apple.MailCore              0x00007fff95d3c36d -[_MCInvocationOperation main] + 426 32  com.apple.Foundation            0x00007fff946f632c -[__NSOperationInternal _start:] + 653 33  com.apple.Foundation            0x00007fff946f5f33 __NSOQSchedule_f + 184 34  libdispatch.dylib               0x00007fff923a5c13 _dispatch_client_callout + 8 35  libdispatch.dylib               0x00007fff923a9365 _dispatch_queue_drain + 1100 36  libdispatch.dylib               0x00007fff923aaecc _dispatch_queue_invoke + 202 37  libdispatch.dylib               0x00007fff923a86b7 _dispatch_root_queue_drain + 463 38  libdispatch.dylib               0x00007fff923b6fe4 _dispatch_worker_thread3 + 91 39  libsystem_pthread.dylib         0x00007fff93a4c637 _pthread_wqthread + 729 40  libsystem_pthread.dylib         0x00007fff93a4a40d start_wqthread + 13 /code/pre  It was working pretty well until last night and began crashing again. This time it looks like a different crash altogether, but doesn't look like it's pointing to a folder etc.  precodeProcess:               Mail [2190] Path:                  /Applications/Mail.app/Contents/MacOS/Mail Identifier:            com.apple.mail Version:               8.2 (2087) Build Info:            Mail-2087000000000000~3 Code Type:             X86-64 (Native) Parent Process:        ??? [1] Responsible:           Mail [2190] User ID:               501 Date/Time:             2015-03-04 10:17:45.694 -0500 OS Version:            Mac OS X 10.10.3 (14D87p) Report Version:        11 Anonymous UUID:        5F211EFC-A127-975F-0858-39FB88B8FCD4 Sleep/Wake UUID:       D9684A19-0E4E-4C32-9803-314566898654 Time Awake Since Boot: 15000 seconds Time Since Wake:       1900 seconds Crashed Thread:        22  Dispatch queue: NSOperationQueue 0x600000035720 :: NSOperation 0x6080004954a0 (QOS: UTILITY) Exception Type:        EXC_CRASH (SIGABRT) Exception Codes:       0x0000000000000000, 0x0000000000000000 Application Specific Information: *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Destination store does not have a folder ID' abort() called terminating with uncaught exception of type NSException Thread 22 Crashed:: Dispatch queue: NSOperationQueue 0x600000035720 :: NSOperation 0x6080004954a0 (QOS: UTILITY) 0   libsystem_kernel.dylib          0x00007fff9c17a286 __pthread_kill + 10 1   libsystem_c.dylib               0x00007fff99c5db53 abort + 129 2   libc++abi.dylib                 0x00007fff9b503a21 abort_message + 257 3   libc++abi.dylib                 0x00007fff9b52b9d1 default_terminate_handler() + 267 4   libobjc.A.dylib                 0x00007fff8e3637d6 _objc_terminate() + 103 5   libc++abi.dylib                 0x00007fff9b5290a1 std::__terminate(void (*)()) + 8 6   libc++abi.dylib                 0x00007fff9b529113 std::terminate() + 51 7   libobjc.A.dylib                 0x00007fff8e3635ff objc_terminate + 9 8   libdispatch.dylib               0x00007fff91999c27 _dispatch_client_callout + 28 9   libdispatch.dylib               0x00007fff9199d365 _dispatch_queue_drain + 1100 10  libdispatch.dylib               0x00007fff9199eecc _dispatch_queue_invoke + 202 11  libdispatch.dylib               0x00007fff9199c6b7 _dispatch_root_queue_drain + 463 12  libdispatch.dylib               0x00007fff919aafe4 _dispatch_worker_thread3 + 91 13  libsystem_pthread.dylib         0x00007fff8fee2637 _pthread_wqthread + 729 14  libsystem_pthread.dylib         0x00007fff8fee040d start_wqthread + 13 /code/pre  <answer174732> One big change since El Capitan - strongMail is now in V3/strongbr All the rest will be the same.  Try clearing the saved state, rebuilding &amp; reindexing the database...  strongClear Saved State/strong     ul liSwitch to Finder, kbd Cmd ⌘ /kbd kbd N /kbd for a new window, then kbd Cmd ⌘ /kbd kbd Shift ⇧ /kbd kbd G /kbd for Go To.../li licopy/paste code~/Library/Saved Application State/com.apple.mail.savedState/code then kbd Enter ⌅ /kbd  /li liThis is an alias to the real location, so Right-click &amp; Show Original  /li liDelete the entire codecom.apple.mail.savedState/code folder./li /ul  strongRebuild; Re-index/strong  Source: How to fix Apple Mail by rebuilding and reindexing the Mailbox     strongStep 1: Rebuild/strongbr   Rebuilding a Mailbox in Mail sounds daunting but it really isn't.        ul   liLaunch Mail, select one of your mailboxes and click on the Mailbox menu. At the bottom of the pane choose the Rebuild option. If you have a large mailbox, you can expect the process to take a few hours./li   liYou must repeat this step for each one of your Mailboxes./li   liWhile the process takes place, you may experience system performance lag, as it can consume a lot of system resources and memory./li   /ul      Another caveat, if you use IMAP or Exchange with any of the accounts, the process will redownload every message from the server, so you'll use a lot of bandwidth.      Now that you've completed these steps, work with Mail a little longer. If you are still having issues, or Mail fails to launch, you should try a manual reindex.      strongStep 2: Re-index/strong      Manual reindexing of Mail messages is the only way to go if the  application has become so unresponsive it barely works at all, search is not functioning correctly or the app won't launch.      Mail will automatically attempt to reindex your messages if it detects problems with the mailboxes, but sometimes a manual reindex is the best option. If you are still having problems with Mail after following step one, try manual reindexing.      ul   liQuit Mail if it’s open.br   To get to your home Library folder, hold down the Option key, then in the Finder choose Go  Library.  /li   liIn code~/Library/Mail/V2/MailData/code, delete any file that begins with “Envelope Index,” such as Envelope Index or Envelope Index-shm. (Before you actually delete the files, it makes sense to copy them to a folder on your desktop.)/li   liLaunch Mail and the app will build new Envelope Index files -- this can take a long time if there are numerous messages to go through./li   liIf everything seems to be working correctly, you can now delete the copies of the "Envelope Index" files from your desktop./li   /ul      In most cases, these two tips should solve most Mail problems   <answer236336> My was crashing when I added Google Accounts, and the reason was, in one of the Google Accounts, I had created Mail Labels with slashes in their names i.e "/label_name/" and this was confusing the the Mail App to think it is a file path on the file system. I renamed my email labels, removing the slashes, and it stopped crashing!  <answer272504> I know this is an old thread but it helped me.  Here is the cure.  I started getting repeated Mail crashes when we changed from the old style Exchange email server to the Office365 service.  I found that if I open the Mac address book app, and before it has a chance to crash, you open the preferences and delete the Exchange account it fixes the problems.  <answer281963> The re-index worked for me, but the difference from the original post is on my MacOS version (Sierra 10.12.3), I had to go to the library located in V4 not V2.  strong~/Library/Mail/V4/MailData/strong  <comment206021> that is all good and valid advice, however I should have been a little more clear in saying that I had already tried rebuilding and reindexing. Is there any chance you can look at the error log to see what type of problem is indicated? <comment206085> well… the exception itself seems to be concerned with something in deleted items… "relative path=Deleted Items/Asana" If that name means anything to you, or you can find it & dig it out, empty the trash etc… or indeed see if it's the same cause on more than one occasion, that may help. <comment206368> Thanks for pointing that out. I'm terrible at reading those reports. I went in and cleared the trash of that folder (which didn't exist when I looked at the trash in other clients. Fingers crossed that it'll work! I have a good feeling about it though, so thanks! <comment227885> (!) Please note that (notable on Yosemite) a process called XPC (com.apple.internetaccounts.xpc) typically locks the Envelop index files. You notice blocking services if you try to remove them from Trash. Until even file move will not affect running file pointers in a *nix System. Unfortunatly this service is not in launchctl so you have to: "delete" them, log out (no restart needed), login back, empty trash. <comment308186> Worked for me. I did have trouble finding the library because it was hidden.