Automator won't execute my bash shell script <body> I have a strongbash script/strong that works like a thread. Now I'd like to turn it into a service with Automator.  Input is set to strongImage Files/strong in Automator and the shell script action is set to strongcodePass input as arguments/code/strong.  h2The problem:/h2  Automator takes issue with two things:  ol liThe function/li liThe if condition/li /ol  However, no error shows up in the log and the shell script result is empty:  precode(   "" ) /code/pre  h2What the script does:/h2  The strongfunction/strong codecreateDatePath/code checks if the passed image is formated like code2020-08-10-demo_image.jpg/code and creates a folder codeYEAR/MONTH//code in the target directory. The strongif condition/strong performs actions on the input depending on whether it's an JPEG or an PNG, and whether the date string is followed by a code-qq-/code string. This is a trimmed down version of the script (I have some of more if conditions, but we don't need them here I guess).  h2The script:/h2  precodebackup=/Users/me/Desktop/A/backup/ targetPath=/Users/me/Desktop/A/output/  function createDatePath {     [[ "$i" =~ ^([0-9]{4})-([0-9]{2}) ]] &amp;&amp; \     mkdir -p "$targetPath${BASH_REMATCH[1]}/${BASH_REMATCH[2]}"; } for i in "$@"; do     cp "$i" "$backup"     if [[ "$i" =~ ^([0-9]{4})-([0-9]{2})-([0-9]{2})-([^q]{2}).+\.((jpg)|(jpeg))$ ]]; then         createDatePath;     else         exit 0;     fi done /code/pre  strongScreen shot:/strong  img src="https://i.stack.imgur.com/1o4Bi.png" alt="Demo Mode"  strongLink to complete shell script:/strong https://gist.github.com/pattulus/a89be63478174853d667  If anyone could explain to me why this doesn't work and how to make it work that'd be great.  emPS: In the non-Automator script the first thing I did was codecd/code into the source path, but I since this will end up as a service which takes files as input my guess was that I can omit this (adding codecd "$@"/code didn't do any good)./em  <answer98783> The arguments Automator passes to the script are absolute paths. You can convert them to basenames with something like codei=${i##*/}/code.  <comment116053> Can you add a screenshot of the Automator workflow (or a link to a screenshot at least)? <comment116055> @patrix I added a screen shot and a link to a Gist of the complete script. When this works I'll delete the "Get Finder selection" action and set input to receive images. <comment116072> You really deserve my hand-crafted badge of honor for being in the right place at the right time.