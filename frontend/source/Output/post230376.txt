trim Mac files to move to Windows <body> I have a large number of Mac files that I need to remove illegal characters that Windows will not like and to shorten the file names while preserving the extension.  I have found a Bash script that someone else wrote in Automator that does a great job of stripping the illegal characters.   However, my main problem is finding the right code to added to the script to truncate the file name down to 30 characters while preserving the extension. This is the script that I have so far.  precodefor f in "$1"/*; do   dir=$(dirname "$f")   file=$(basename "$f")   mv "$f" "${dir}/${file//[^0-9A-Za-z]}"   mv "$f" "${dir}/${file:0:30}" /code/pre  Because the files are going to Windows I really need the script to preserve the file extension if there is one.br The current script in automator allows the user to select the folder and the processes is completed on the files within.  This will work but would also be better if there is a way to have it do files in subfolders automatically as well.  Thank you for any help.  I am a noob to Bash and the Automator application in Yosemite. 