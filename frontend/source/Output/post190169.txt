How to upgrade bash with brew (permission error)? <body> I work with Yosemite (10.10.3) and would like to upgrade codebash/code (to version 4.x) and found this post. After codebrew update/code, I did codebrew install bash/code, but obtained:  precode==&gt; Downloading https://homebrew.bintray.com/bottles/bash-4.3.33.yosemite.bottle.tar.gz ######################################################################## 100.0% ==&gt; Pouring bash-4.3.33.yosemite.bottle.tar.gz ==&gt; Caveats In order to use this build of bash as your login shell, it must be added to /etc/shells. Error: An unexpected error occurred during the `brew link` step The formula built, but is not symlinked into /usr/local Permission denied - /usr/local/share/locale/af Error: Permission denied - /usr/local/share/locale/af /code/pre  How can I fix this? I codecd/codeed into code/usr/local/share/locale/code but the directory codeaf/code doesn't exist. Why does brew try to access this?  strongUpdate/strong  I forgot to say, if I use codesudo brew install bash/code, I receive:  precodeError: Cowardly refusing to `sudo brew install` You can use brew with sudo, but only if the brew executable is owned by root. However, this is both not recommended and completely unsupported so do so at your own risk. /code/pre  <answer190204> You must be sure that the group of code/usr/local/code and all inside it is codeadmin/code (I'm supposing your username belongs to codeadmin/code group too). If this isn't the case, fix it with:  precodesudo chown -R $USER:admin /usr/local /code/pre  You will probably have to do the same on code/Library/Caches/Homebrew/code:  precodesudo chown -R $USER:admin /Library/Caches/Homebrew /code/pre  <answer284496> This line:    codesudo chown -R $USER:admin /usr/local/code  Worked for me.  <comment225678> Open a terminal window and sudo chown -R yourusername /usr/local ? <comment225680> Do not do this. You're opening up a major security vulnerability if you do. <comment225727> Hi, thanks for helping. I did that (yes, my username belongs to the admin group). After that, `brew install bash` gave `Warning: bash-4.3.33 already installed, it's just not linked`. But `brew link bash` gave `Linking /usr/local/Cellar/bash/4.3.33... Error: Permission denied - /usr/local/share/locale/af`. As I said in my post, the subfolder `af` of `/usr/local/share/locale` does not exist. Shall I create it? Why does brew want to install/link in there? <comment225728> Reinstall it. `brew uninstall bash` and then `brew install bash`. <comment225729> ... that's exactly what I tried, too. And ended up with the same result (obtaining `Error: An unexpected error occurred during the 'brew link' step`  because of the permission denied error). I installed a lot of things with brew and it always worked. But the subdirectory `af` was never created it seems. <comment225730> Can you create a file on `/usr/local` to test that you have perms there? <comment225731> I created a directory and a file, both worked. <comment225732> Weird. Last thing to try is to force reinstall (`brew install bash --force`). This should replace every single files copied before. <comment225733> I get again `Warning: bash-4.3.33 already installed, it's just not linked` and when I do `brew link bash` the permission denied error appears again. I then created `af` by hand. brew was looking for LC_MESSAGES, so I simply copied that from the subdirectory `de`. Had to give it write permissions, but then I obtained the same permission denied warning, now for `/usr/local/share/locale/bg`... hmmm.. it seems these are country codes... I wonder how many I am missing... <comment225734> I ran `brew doctor` and the first entry said that `Warning: Some directories in /usr/local/share/locale aren't writable. This can happen if you "sudo make install" software that isn't managed by Homebrew. If a brew tries to add locale information to one of these directories, then the install will fail during the link step. You should probably 'chown' them`... but @Froggard suggested not to do that... <comment225735> Ok, I see. Try this: `cd /usr/local/; sudo chown -R your-username *`. Then reinstall bash again. <comment225736> Hi, that worked, thanks. I had to register bash via `sudo bash -c "echo /usr/local/bin/bash  /private/etc/shells"` (for all those who are interested in this) <comment358785> Welcome to Ask Different.  We like answers to be more than just a single line.  Ideally, you want to explain why your answer is *right."  It also helps to provide links, citations, and/or screen shots.  Please review our help section [How to Answer](http://apple.stackexchange.com/help/how-to-answer) on writing good answers to questions