Mavericks: How to ADD Input Source via plists/defaults? <body> I'm trying to automate my OS X setup but I'm stuck trying to programmatically add a new Input Source or keyboard layout.  I usually use two layouts: regular US and US International, so what I'm trying to do is just add the US International layout.  Here's what I noticed so far. When I manually add the layout, I see this entry being added to my codeAppleEnabledInputSources/code key on the codecom.apple.HIToolbox/code plist:  precode--- a/def0.txt +++ b/def1.txt @@ -17,6 +17,11 @@                  {              "Bundle ID" = "com.apple.PressAndHold";              InputSourceKind = "Non Keyboard Input Method"; +        }, +                { +            InputSourceKind = "Keyboard Layout"; +            "KeyboardLayout ID" = 15000; +            "KeyboardLayout Name" = "USInternational-PC";          }      );      AppleInputSourceHistory =     ( /code/pre  I got this output by doing codedefaults read com.apple.HIToolbox/code. I can confirm the same addition by directly opening code~/Library/Preferences/com.apple.HIToolbox.plist/code.  So I decided that probably all I had to do was just add the same entry and it would all work. So I reverted the manual addition (and confirmed the entry from the plist was gone) and now tried:  precode$ defaults write com.apple.HIToolbox AppleEnabledInputSources -array-add '{InputSourceKind="Keyboard Layout"; "KeyboardLayout Name"="USInternational-PC"; "KeyboardLayout ID"=15000;}' /code/pre  I confirm again via codedefaults read/code diffs that it adds the same entry to the plist, but it doesn't work!  I tried killing codecfprefsd/code and codeSystemUIServer/code and even rebooting but none of these seem to work.  Does anyone have a clue about what might be happening here?  <answer127250> Turns out that the format I used for the codeAppleEnabledInputSources/code entry was bad because it considers everything as type codestring/code, but codeKeyboardLayout ID/code must be of type codeinteger/code!  So the correct way of doing this would be via XML:  precodedefaults write com.apple.HIToolbox AppleEnabledInputSources -array-add '&lt;dict&gt;&lt;key&gt;InputSourceKind&lt;/key&gt;&lt;string&gt;Keyboard Layout&lt;/string&gt;&lt;key&gt;KeyboardLayout ID&lt;/key&gt;&lt;integer&gt;15000&lt;/integer&gt;&lt;key&gt;KeyboardLayout Name&lt;/key&gt;&lt;string&gt;USInternational-PC&lt;/string&gt;&lt;/dict&gt;' /code/pre  After running that command and doing a logout/login, looks like things work fine. 