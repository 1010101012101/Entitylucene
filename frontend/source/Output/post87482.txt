Converting Audio to AC-3 using afconvert? <body> I'm trying to use codeafconvert/code to convert an audio file to AC-3 format. It's 5.1 audio, having already been converted from DTS to WAV (using codeffmpeg/code, since codeafconvert/code doesn't seem to deal with DTS).  As you can see, I've tried various parameter incantations, including trying to use a different container formats, but with no success:  precode$ afconvert -f ac-3 test.wav  Error: ExtAudioFileCreateWithURL failed ('typ?') $ afconvert -f ac-3 -d ac-3 test.wav  Error: ExtAudioFileCreateWithURL failed ('typ?') $ afconvert -f caff -d AC-3 test.wav  Error: ExtAudioFileSetProperty ('cfmt') failed ('fmt?') /code/pre  I have been able to encode it to an AAC file successfully, so it's presumably something with the AC-3 encoding, but Googling those errors yields no results. Does anyone know how to properly convert to AC-3 with codeafconvert/code?  If you want to do some testing yourself, I found some free 5.1 DTS sample files here. Note that while the file extension is code.wav/code, they're actually DTS files, not WAV. To replicate my desired workflow, decode to a WAV file with ffmpeg: codeffmpeg -i input.wav -acodec pcm_s16le -f wav output.wav/code, then you'll have a proper 5.1 WAV file codeafconvert/code should be able to work with.  <answer87494> Can't you use ffmpeg? This seemed to work for the DTS WAV files here:  precodeffmpeg -i test.wav -ab 640k test.ac3 /code/pre  <answer88341> EDIT: Deleted original answer as it did not pertain.  Did an alternate test on my box, mainly to generate a file that would allow me to test afconvert, but came up with another solution to generate an AC3 file, which does not use ffmpeg:  So, starting with a mono 44100 wav file, I used 'sox' to merge multiple wav files into a multiple channel wav: surround.wav which I then used 'aften' to convert to an AC3 encoded file:  precode$ file surround.wav  surround.wav: RIFF (little-endian) data, WAVE audio, 5 channels 44100 Hz  $ aften -b 448 -cmix 0 -smix 0 -dsur 2 -acmod 7 surround.wav surround.ac3   $ file surround.ac3  surround.ac3: ATSC A/52 aka AC-3 aka Dolby Digital stream, 44.1 kHz,, complete main (CM) 3 front/2 rear, LFE on,, 448 kbit/s not Dolby Surround encoded /code/pre  (src: http://parumi.wordpress.com/2007/12/12/how-to-create-multichannel-51-ac3-audio-and-video-in-linux/ )  Still working on why afconvert won't honor or work with the ac-3 format.   <comment102247> Yeah, that's my fallback. In the past the ffmpeg AC3 encoders haven't had a great reputation for quality, which is why I was hoping to avoid it. <comment103393> Thanks, but not really helpful. That's for converting to AAC, which as I noted in the question already works, but is not my desired output. It seems to be an issue specific to the AC3 conversion. I'll try to find a decent sample file and link to it later if you want to test some things out. <comment103394> Sure thing. Like Lauri, I've been doing my audio conversion via ffmpeg and the like. :)  I'll update my answer if I get the file to encode. <comment103405> Thanks. I've used `aften` before on my Linux box, but for some reason I didn't think it was available for OS X. Just discovered there's a Homebrew formula, so that's a good option. Still hoping out for an `afconvert` solution, but this was helpful, thanks! <comment103406> No prob. Homebrew has been a great way to access many tools on Mac OS X. Answering your question pointed me to aften, so it's win-win. :) <comment103410> Did some more digging and ran into an interesting problem:  "afinfo output.ac3"  this resulted in the error: "Fail: AudioFileOpenURL failed"  I suspect that the AC-3 codec as accessed via the af* binaries might be a bit wonky. The afinfo worked fine on the 5.1 channel wave file, however. <comment103839> Aften is also easy to compile with CMake and should do what you're looking to accomplish. I downloaded the samples you mentioned, converted them to .wav, then used Aften to output to AC-3 format with no issues at all.