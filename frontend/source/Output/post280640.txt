2011 MBA occasionally drains battery and powers down even when powered <body> Sometimes I leave my MacBook running (connected to the charger) and when I return it has drained the battery to 0% and powered off.  This has been happening sporadically for over a year, but seems to be getting more frequent.  (Under power settings I've set it to never sleep when connected to power outlet).  Sometimes I have to turn it back on several times and each time it will power itself down within seconds to minutes.  Looking at my process list to see what is consuming CPU, there will always be some culprit.  Today it was codemds/code (indexing Spotlight) but one other time it was the core kernel process (codePID 0/code).  Googling suggests that occasionally the machine demands more power than the outlet can provide and borrows from the battery. If this is the case I think it is great failing that this technique does not disable itself once the battery goes into the red.   Is there anything I can do?  <answer280688> First of all let me address the following:     Googling suggests that occasionally the machine demands more power   than the outlet can provide and borrows from the battery.   This is plain and simply false. Ignore this altogether.  Now, what almost certainly must be happening is that for some reason the MacBook is not receiving power from the charger and therefore is forced to rely on the battery instead. To clarify, what I mean is that the MacBook is drawing its power from the battery just like it would if there was a blackout, the charger was unplugged, and so on.  This indicates that you emmay/em have a faulty charger or charging cable, a faulty I/O board, or in the worst case scenario a faulty logic board.  The first thing I would try is to reset the System Management Controller (SMC).  strongReset the SMC/strong  To reset the SMC in a MacBook Air, follow these steps:  ol liShut down your Mac/li liKeep the MagSafe adapter (power cable) strongplugged in/strong./li liPress at the same time kbdshift/kbdkbdoption/kbdkbdcontrol/kbd (on the strongleft/strong side of the strongbuilt-in/strong keyboard) strongemand/em/strong the kbdpower button/kbd/li liLet go/li liTurn your Mac back on with the power button./li /ol  Now use your MBA as normal and see if the problem returns. If so, I would be regularly keeping an eye on the charging indicator (it should always show either a green or amber light). No light means it's not delivering any power whatsoever which, assuming the mains is on and there's no blackout, indicates a hardware problem. A constant amber light (i.e. one that never goes green) also indicates a problem, usually with the battery but not always.  strongRun Apple Hardware Test/strong  You can also test you Mac's main hardware components. To do this your model MBP uses Apple Hardware Test. Follow these steps:  ol liShut down your MacBook Pro /li liRestart your MacBook Pro/li liPress and hold the kbdD/kbd key before the gray startup screen appears./li liAfter a while, Apple Hardware Test (AHT) will start./li liWhen prompted, select your language and click the right arrow. /li liWhen the AHT console appears, you can choose to run Basic tests by clicking the Test button. However, I suggest you select the "Perform extended testing" checkbox before you click the Test button./li liYour test results will appear in the window in the bottom-right of the console./li /ol  strongNote 1:/strong that the extended test will take some time. Take a note of the results and report back.   strongNote 2:/strong If pressing and holding the kbdD/kbd key at Step 3 doesn't work, start again at Step 1 and, at Step 3 press and hold both the kbdOption/kbdkbdD/kbd keys instead. This will try and run diagnostics from the internet instead, so you will need to allow more time for it to complete.  <comment353202> IIRC the charger light is always Amber. Please note that every time I have encountered this issue, `activity monitor` reports some process(es) drawing extra high power. So I'm still considering the idea that the machine is consuming power at a higher rate than the adapter provides it. <comment353214> Ok, let me clarify what I'm saying. What you've found via Google can occur for hardware devices that are powered directly from the MBP. For example, a USB powered hard drive may require more power than a single USB port can give it, that sort of thing. In your scenario you're suggesting that the MBP needs more power than what the AC outlet is giving it, and is therefore draining the battery rather than charging / maintaining it. The __only__ way that _could_ happen is if your charger, charging cable, I/O board, or logic board is faulty, and yes, this could fit as per my answer above. <comment353215> Now, if your light is always amber, then that indicates a problem. It shouldn't _always_ be amber. If resetting the SMC doesn't help, you can also test your main Mac hardware. See my updated answer for instructions on how to do that.