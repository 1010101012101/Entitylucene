nslookup works with /etc/resolv.conf, ping and ssh don't <body> In our local university network, I have (obtained by DHCP) the following setup in /etc/resolv.conf:  precodesearch a.domain.com b.domain.com domain.com nameserver x.x.x.x nameserver y.y.y.y /code/pre  The settings are the same in System Preferences as well. The following problem occurs:  precodenslookup server /code/pre  works, and is using one of the nameservers to correctly ask for server.a.domain.com. If I try to ping however,  precodeping server /code/pre  fails with unreachable host.  precodeping server.a.domain.com /code/pre  works. Manually adding server with the ip address obtained by nslookup to /etc/hosts makes ping work too, but this "solution" circumvents the nameservers and is thus not ideal (and I would have to add about 20 other entries as well). Any idea what is causing this? Why does ping not use the results of nslookup/the searchdomains?  precodessh server /code/pre  also fails, which is the real problem/inconvenience.  I already added AlwaysUseSearchDomains to mDNSResponder, but this fix only helps the problem when using server.foo.  I'm using OS X Lion 10.7.3.  <answer50566> Well, did you read the comments at the top of code/etc/resolv.conf/code?  precode# Mac OS X Notice # # This file is not used by the host name and address resolution # or the DNS query routing mechanisms used by most processes on # this Mac OS X system. /code/pre  The correct solution is to add the search domains via the Network panel in System Preferences as described here.  <answer50717> strikeI believe, the problem lies within the searchdomains configuration: ping/ssh are trying to use codegethostbyname2()/code which fails because emnamed/em is not running anymore (in Lion at least) and code/etc/resolv.conf/code with the configured searchdomains is thus ignored. code/etc/hosts/code is the last resort for codegethostbyname2()/code and thus ssh works again with proper entries in code/etc/hosts/code. Should be fixed by Apple imho./strike  Manually adding the searchdomains one by one fixed it, see solution above.  <answer50766> I had the same problem.  The solution I used was to create an /etc/resolver directory.  Inside that directory, create a file named for each domain you wish to resolve for.  Inside each file there should be two lines  precodenameserver 10.0.100.2 domain  home.cainmanor.com /code/pre  The file above would be named /etc/resolver/home.  It may need to be named home.cainmanor.com, but I can't test it right now.  Good luck!   <answer164615> I get this issue every so often, when my Mac Book Pro (OS X version 10.10.1) has been asleep. Wake it up &amp; I can't ssh using hostname of machines on my network (and ping doesn't work either). nslookup works fine. Can't see any relevant messages in /var/log. Just leave it a few minutes &amp; hey presto it works again .....  <comment58009> I did. The search domains are automatically entered in the Network panel in System Preferences per DHCP configuration (and are thus greyed out and not changeable). The exact same values/configuration are/is found in `/etc/resolv.conf`. <comment58100> I don't know what to tell you, then.  I get both my Ethernet and WiFi settings via DHCP and can change my search domains via the System Preferences panel. <comment58126> The searchdomains are correct in System Preferences and /etc/resolv.conf - the problem is, that ping and ssh aren't using it. If they would use the output of nslookup, everything would work fine, but somehow, they don't. They lookup /etc/hosts, though. <comment58142> When I add a search domain to my WiFi connection (which is configured via DNS) in OS 10.7.3 via the System Preferences - Network panel, it is used by ping and ssh just as I would expect.  I do not touch /etc/resolv.conf or /etc/hosts manually/directly, but the changes from System Preferences are reflected in /etc/resolv.conf automatically.  OS X does a lot of things differently than other Unix systems and this is one of them. <comment58222> Thanks, this got it working by adding the searchdomains manually one by one, see my comment on your suggested solution above. <comment58223> I manually added the searchdomains (although they were greyed out) one by one via System Preferences and now it works. Thanks! <comment58224> I got it working by setting the searchdomains via System Preferences one by one, overriding the DHCP settings which OS X failed to parse correctly obviously. I couldn't try your solution, but thanks! <comment92070> Ping packets may be blocked by network equipment.  Same thing with ssh packets - they may not want you to do what you do. <comment92071> Adding search domains did not fix the issues... Any one else got another solution? <comment92180> How did you add them? <comment92181> See solution below, that was not the issue. <comment113411> This approach works nicely for when your corporate VPN client does the wrong thing with respect to transient system preferences. <comment168793> "Unreachable host" means a network connectivity problem (or ICMP blocked), not DNS resolution problem