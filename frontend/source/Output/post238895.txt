My Mac prompts to shut down randomly <body> Somewhere between every one and ten minutes, my MacBook Pro prompts the shut down dialog box or even starts to sleep.   img src="https://i.stack.imgur.com/bDIBf.png" alt="enter image description here"  This is what I get in the console. It really looks as if I've pressed the hardware "off" button:  precode19/05/16 21:14:43.345 networkd[194]: -[NETProxyLookup pacLookupComplete:proxies:error:] PAC evaluation error: Error Domain=kCFErrorDomainCFNetwork Code=2 "(null)" UserInfo={kCFGetAddrInfoFailureKey=8} 19/05/16 21:14:44.736 networkd[194]: -[NETProxyLookup pacLookupComplete:proxies:error:] PAC evaluation error: Error Domain=kCFErrorDomainCFNetwork Code=2 "(null)" UserInfo={kCFGetAddrInfoFailureKey=8} 19/05/16 21:14:45.670 networkd[194]: -[NETProxyLookup pacLookupComplete:proxies:error:] PAC evaluation error: Error Domain=kCFErrorDomainCFNetwork Code=2 "(null)" UserInfo={kCFGetAddrInfoFailureKey=8} 19/05/16 21:14:55.473 AirPlayUIAgent[324]: 2016-05-19 09:14:55.472717 PM [AirPlayUIAgent] BecomingInactive: NSWorkspaceWillSleepNotification 19/05/16 21:14:57.075 locationd[87]: Location icon should now be in state 'Inactive' 19/05/16 21:14:57.000 kernel[0]: PM response took 112 ms (56, powerd) 19/05/16 21:14:57.829 sharingd[321]: 21:14:57.828 : Starting AirDrop server for user 501 on wake 19/05/16 21:14:57.924 WindowServer[211]: device_generate_desktop_screenshot: authw 0x0(0), shield 0x0(0) 19/05/16 21:14:57.939 WindowServer[211]: device_generate_lock_screen_screenshot: authw 0x0(0)[inf, inf, 0, 0] shield 0x0(0), dev [1440,900] 19/05/16 21:14:57.940 WindowServer[211]: CGXDisplayDidWakeNotification [876819909845]: posting kCGSDisplayDidWake 19/05/16 21:14:57.941 WindowServer[211]: handle_will_sleep_auth_and_shield_windows: Deferring. 19/05/16 21:14:57.000 kernel[0]: en1: BSSID changed to 34:31:c4:8a:fd:2d 19/05/16 21:14:57.000 kernel[0]: en1: channel changed to 13 19/05/16 21:14:58.837 networkd[194]: -[NETProxyLookup url] invalid URL scheme '5223' /code/pre  If I use this Mac in Target Disk Mode with another computer it works just fine. So it's certainly not an hard drive problem or a software problem.  <answer239551> strongThe most likely cause is your keyboard is failing;/strong specifically there is an issue with your power button where it intermittently causes it to stick.  The shutdown dialog box you are seeing is a result of the empower management daemon/em intercepting the momentary press of the power butting thinking you want to sleep, restart, or shutdown.     First I also taught it was the power off button but in this case It   should also shutdown when I'm on target mode but it doesn't    The reason you are not seeing the power button have an effect is because power management strongmust/strong be loaded to intercept the signal.  Not only is power management not loaded, nothing of OS X is being loaded either.    strongTarget Disk Mode is a firmware feature, not a feature of OS X./strong  What your Mac is doing is allowing the the Firewire/Thunderbolt port to pass an external connection through to the internal drive so what you have is in fact, the most expensive Firewire or Thunderbolt external drive ever made.  Because it hasn't loaded any systems management services, a simple press of the power button isn't going to do anything; try it yourself.  However, to turn off your computer in TDM, you have to hold down the power button for 5 seconds - exactly the same way you would if your fully booted OS X Mac would if it stopped responding.  strongHow to Verify.../strong  This is a simple procedure to validate whether or not your power button is failing.  Since it's part of the keyboard assembly this requires disconnecting the keyboard and shorting the power pads to power on your logic board.  I recommend getting an external mouse/keyboard (USB) because when you disconnect your MBP keyboard, you will need something on which to type.  Once you remove the back cover and disconnect they keyboard/trackpad assembly from the logic board, you will need to turn on the MBP by "shorting" the two power pad connections.  Don't worry, this is exactly what a switch does - it shorts the connection.  You can use a paperclip, but my preference is to use a flat blade screwdriver wide enough to touch both contacts.   (The images below are from a 2010 MBP, if you give me your specific model, I will update the shots)  img src="https://i.stack.imgur.com/4VUUI.png" alt="2010 Macbook Pro Power Pad Far shot" img src="https://i.stack.imgur.com/oqX0I.png" alt="2010 Macbook Pro Power Pad close up"  You won't be able to power on your MBP unless you open the lid, so you will have to strongemgently/em/strong have it upside down on your desk with the lid open as you perform this procedure. I helps if you put a towel of some sort of padding to protect it. Once it's powered on, just flip it back to it's normal position (off the towel); you won't need to put the bottom cover back on.  Make sure you mouse and keyboard are connected.  If the problem goes away once you do this, then the problem is your keyboard - it's time for a replacement.  <comment293073> How about turning off AirDrop as a trial fix. Then maybe choose new channel <comment293116> For me it seem than AirpPlayUIAgent and Airdrop message are comming after the shutdown sequence. I updated the question with that in mind. <comment293329> Make sure it is not actually a problem with your keyboard's power off key itself. Try holding it up and see if the messages continue. Also try Safe Mode, maybe? <comment293356> I tried safe mode without success. First I also taught it was the power off button but in this case It should also shutdown when I'm on target mode but it doesn't <comment293375> Suggestions here http://apple.stackexchange.com/questions/51113/macbook-air-attempting-to-shutdown-after-a-couple-of-seconds-of-inactivity include wedging down escape key and bringing to Apple. See if that can help you.