How do I repartition my Mac to get rid of my dual boot setup? <body> I setup dual boot on my Mac (with Ubuntu) and want to get rid of it. The Disk Util GUI shows me:  img src="https://i.stack.imgur.com/gw18Zm.png" alt="Partition Table"  However attempting to remove the disk0s4 or disk0s5 partitions results in:  precodeCould not unmount partition to be deleted. /code/pre  From the terminal, running diskutil list, I get:  precode/dev/disk0    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                        *251.0 GB   disk0    1:                        EFI EFI                     209.7 MB   disk0s1    2:          Apple_CoreStorage                         149.4 GB   disk0s2    3:                 Apple_Boot Recovery HD             650.0 MB   disk0s3    4:                 Linux Swap                         8.6 GB     disk0s4    5: 11111111-1111-1111-1111-111111111111               92.1 GB    disk0s5 /dev/disk1    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                  Apple_HFS Macintosh HD           *149.1 GB   disk1                                  Logical Volume on disk0s2                                  22222222-2222-2222-2222-222222222222                                  Unencrypted /code/pre  Essentially how do I go about reclaiming the space from those two partitions (the swap and my linux partition) without damaging anything Mac related?  And additionally, I think, but I'm not sure if the EFI partition was something to do with the Linux bootloader - do I need it (I've already reset the boot device to Mac).  hr  strongUpdate 1/strong, This is the state of /dev/disk0 after a failed attempt to remove the disk0s4 partition. The partition has definitely decreased in size, but I want it gone entirely:  precode$ gpt -r show /dev/disk0  gpt show: /dev/disk0: Suspicious MBR at sector 0         size index   contents            1        MBR            1        Pri GPT header           32        Pri GPT table       409600    1   GPT part - 11111111-1111-1111-1111-111111111111    291884360    2   GPT part - 22222222-2222-2222-2222-222222222222      1269536    3   GPT part - 33333333-3333-3333-3333-333333333333          880         16777216    4   MBR part 130    179893087               32        Sec GPT table            1        Sec GPT header /code/pre  hr  strongUpdate 2/strong, after failure of codediskutil cs resizeStack xxx 0g/code  precodediskutil corestorage resizeStack 265D8E12-2452-4D7F-BF56-2075FBA9773A 0g 265D8E12-2452-4D7F-BF56-2075FBA9773A does not appear to be a valid Core Storage Logical Volume UUID or disk /code/pre  The output of codediskutil cs list/code:  precodeCoreStorage logical volume groups (1 found) | +-- Logical Volume Group 265D8E12-2452-4D7F-BF56-2075FBA9773A     =========================================================     Name:         Macintosh HD     Status:       Online     Size:         149444792320 B (149.4 GB)     Free Space:   0 B (0 B)     |     +-&lt; Physical Volume 8E81C240-7CE6-4688-A61C-66CFFBCF37F8     |   ----------------------------------------------------     |   Index:    0     |   Disk:     disk0s2     |   Status:   Online     |   Size:     149444792320 B (149.4 GB)     |     +-&gt; Logical Volume Family 09B78781-FCBC-4FFD-9430-2126A9FF24A1         ----------------------------------------------------------         Encryption Status:       Unlocked         Encryption Type:         None         Conversion Status:       NoConversion         Conversion Direction:    -none-         Has Encrypted Extents:   No         Fully Secure:            No         Passphrase Required:     No         |         +-&gt; Logical Volume 2AB8ABA4-9A16-48C2-A085-D3FE3251E41F             ---------------------------------------------------             Disk:                  disk1             Status:                Online             Size (Total):          149082341376 B (149.1 GB)             Conversion Progress:   -none-             Revertible:            Yes (no decryption required)             LV Name:               Macintosh HD             Volume Name:           Macintosh HD             Content Hint:          Apple_HFS /code/pre  Sorry, I posted the wrong error, I also get:  precodediskutil corestorage resizeStack 2AB8ABA4-9A16-48C2-A085-D3FE3251E41F 0g The Core Storage Logical Volume UUID is 2AB8ABA4-9A16-48C2-A085-D3FE3251E41F Started CoreStorage operation Error: -69722: You can't perform this resize unless it has a booter (target partition is probably too small) /code/pre  hr  As prompted by David Anderson, the output from codesudo fdisk /dev/disk0/code is:  precodeDisk: /dev/disk0    geometry: 30515/255/63 [490234752 sectors] Signature: 0xAA55          Starting       Ending  #: id  cyl  hd sec -  cyl  hd sec [     start -       size] ------------------------------------------------------------------------  1: EE    0   0   1 - 1023 254  63 [         1 -     409639] &lt;Unknown ID&gt; *2: AF 1023 254  63 - 1023 254  63 [    409640 -  291884360] HFS+          3: AF 1023 254  63 - 1023 254  63 [ 292294000 -    1269536] HFS+          4: 82 1023 254  63 - 1023 254  63 [ 293564416 -   16777216] Linux swap /code/pre  hr  strongUpdate/strong, attempts to delete the deep partition from internet recovery mode.  img src="https://i.stack.imgur.com/ywmt1.jpg" alt="enter image description here"  hr  strongUpdate/strong: The current results of codesudo got -r show /dev/disk0/code and codesudo fdisk /dev/disk0/code:  precodePeters-MBP:~ peter$ sudo gpt -r show /dev/disk0 Password: gpt show: /dev/disk0: Suspicious MBR at sector 0       start       size  index  contents           0          1         MBR           1          1         Pri GPT header           2         32         Pri GPT table          34          6                   40     409600      1  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B      409640  291884360      2  GPT part - 53746F72-6167-11AA-AA11-00306543ECAC   292294000    1269536      3  GPT part - 426F6F74-0000-11AA-AA11-00306543ECAC   293563536        880            293564416   16777216      4  MBR part 130   310341632  179893087            490234719         32         Sec GPT table   490234751          1         Sec GPT header Peters-MBP:~ peter$ sudo fdisk /dev/disk0 Disk: /dev/disk0    geometry: 30515/255/63 [490234752 sectors] Signature: 0xAA55          Starting       Ending  #: id  cyl  hd sec -  cyl  hd sec [     start -       size] ------------------------------------------------------------------------  1: EE    0   0   1 - 1023 254  63 [         1 -     409639] &lt;Unknown ID&gt; *2: AF 1023 254  63 - 1023 254  63 [    409640 -  291884360] HFS+          3: AF 1023 254  63 - 1023 254  63 [ 292294000 -    1269536] HFS+          4: 82 1023 254  63 - 1023 254  63 [ 293564416 -   16777216] Linux swap  /code/pre  <answer192437> h2Update 3/h2  A simpler way, to accomplish the same results as Update 1, would be to use the following commands.  precodeINPUT=$(printf "f 4\ne 4\n0\ne 3\n0\ne 2\n0\ne 1\nee\n\n1\n\nq\ny") sudo fdisk -e /dev/disk2 &lt;&lt;&lt;"$INPUT";echo /code/pre  h2Update 2/h2  Based on the current state of your MBR and GUID partition tables, I recommend the following steps to finish fixing your computer.  I do strongemnot/em/strong think it is necessary to boot to Internet Recovery Mode before entering these commands.  ol liMake a Time Machine or other form of backup. (Just in case.)/li liExecute my Update 1 on code/dev/disk0/code. Upon completion, the output of codesudo fdisk /dev/disk0/code should appear as shown below.  precodePeters-MBP:~ peter$ sudo fdisk /dev/disk0 Disk: /dev/disk0    geometry: 30515/255/63 [490234752 sectors] Signature: 0xAA55          Starting       Ending  #: id  cyl  hd sec -  cyl  hd sec [     start -       size] ------------------------------------------------------------------------  1: EE    0   0   2 - 1023 254  63 [         1 -  490234751] &lt;Unknown ID&gt;  2: 00    0   0   0 -    0   0   0 [         0 -          0] unused        3: 00    0   0   0 -    0   0   0 [         0 -          0] unused        4: 00    0   0   0 -    0   0   0 [         0 -          0] unused   /code/pre/li liExecute the command given below.  precodediskutil cs resizeStack 2AB8ABA4-9A16-48C2-A085-D3FE3251E41F 0g  /code/pre/li /ol  h2Update 1/h2  For anyone's information, a hybrid GPT drive can be changed back to a normal GPT drive by using the codefdisk/code command in interactive mode. The interactive commands are universal. These commands are as follows.  precodef 4 e 4 0 e 3 0 e 2 0 e 1 ee n 1 [number of blocks] #You just have to hit the enter key to choose the given default q y /code/pre  For example, say I have a flash drive on /dev/disk2 and the output of codesudo fdisk /dev/disk2/code was the following.  precodeSteelhead:~ davidanderson$ sudo fdisk /dev/disk2 Password: Disk: /dev/disk2    geometry: 978/128/63 [7892087 sectors] Signature: 0xAA55          Starting       Ending  #: id  cyl  hd sec -  cyl  hd sec [     start -       size] ------------------------------------------------------------------------  1: EE 1023 254  63 - 1023 254  63 [         1 -     409639] &lt;Unknown ID&gt;  2: AC 1023 254  63 - 1023 254  63 [    409640 -    6915528] &lt;Unknown ID&gt;  3: AB 1023 254  63 - 1023 254  63 [   7325168 -     262144] Darwin Boot  *4: 0B 1023 254  63 - 1023 254  63 [   7587840 -     303104] Win95 FAT-32 /code/pre  Entering the command codesudo fdisk -e /dev/disk2/code followed by the above interactive commands would result in the following output.  precodeSteelhead:~ davidanderson$ sudo fdisk -e /dev/disk2 fdisk: could not open MBR file /usr/standalone/i386/boot0: No such file or directory Enter 'help' for information fdisk: 1&gt; f 4 Partition 4 marked active. fdisk: 1&gt; e 4          Starting       Ending  #: id  cyl  hd sec -  cyl  hd sec [     start -       size] ------------------------------------------------------------------------ *4: 0B 1023 254  63 - 1023 254  63 [   7587840 -     303104] Win95 FAT-32 Partition id ('0' to disable)  [0 - FF]: [B] (? for help) 0 Partition 4 is disabled. fdisk:*1&gt; e 3          Starting       Ending  #: id  cyl  hd sec -  cyl  hd sec [     start -       size] ------------------------------------------------------------------------  3: AB 1023 254  63 - 1023 254  63 [   7325168 -     262144] Darwin Boot  Partition id ('0' to disable)  [0 - FF]: [AB] (? for help) 0 Partition 3 is disabled. fdisk:*1&gt; e 2          Starting       Ending  #: id  cyl  hd sec -  cyl  hd sec [     start -       size] ------------------------------------------------------------------------  2: AC 1023 254  63 - 1023 254  63 [    409640 -    6915528] &lt;Unknown ID&gt; Partition id ('0' to disable)  [0 - FF]: [AC] (? for help) 0 Partition 2 is disabled. fdisk:*1&gt; e 1          Starting       Ending  #: id  cyl  hd sec -  cyl  hd sec [     start -       size] ------------------------------------------------------------------------  1: EE 1023 254  63 - 1023 254  63 [         1 -     409639] &lt;Unknown ID&gt; Partition id ('0' to disable)  [0 - FF]: [EE] (? for help) ee Do you wish to edit in CHS mode? [n]  Partition offset [0 - 7892087]: [63] 1 Partition size [1 - 7892086]: [7892086]  fdisk:*1&gt; q Writing current MBR to disk. Device could not be accessed exclusively. A reboot will be needed for changes to take effect. OK? [n] y Steelhead:~ davidanderson$  /code/pre  Now when entering 'sudo fdisk /dev/disk2' the result is  precodeSteelhead:~ davidanderson$ sudo fdisk /dev/disk2 Password: Disk: /dev/disk2    geometry: 978/128/63 [7892087 sectors] Signature: 0xAA55          Starting       Ending  #: id  cyl  hd sec -  cyl  hd sec [     start -       size] ------------------------------------------------------------------------  1: EE    0   0   2 - 1023 254  63 [         1 -    7892086] &lt;Unknown ID&gt;  2: 00    0   0   0 -    0   0   0 [         0 -          0] unused        3: 00    0   0   0 -    0   0   0 [         0 -          0] unused        4: 00    0   0   0 -    0   0   0 [         0 -          0] unused   /code/pre  I do recognize the UEFI specification requires the codeEnding hd/code entry for partition 1 to be a value of 255. In the table above, the value is 254. In the case of OS X, I do not think this discrepancy matters.     hr  h2Original Answer:/h2  I tested my answer using a flash drive. This is not the same a core storage on disk0. Even though klanomath's answer seems more complex than mine, he does have far more experience with core storage than I have. I would not hesitate to use his answer over mine.   The EFI partition (disk0s1) existed before you installed Ubuntu. The installation of Ubuntu probably added the GRUB boot loader to this partition. You could mount this partition (using the Disk Utility application) and delete EFI/ubuntu folder containing these files, but it would be easier to just leave them where they are.  To remove Ubuntu, you do need to delete disk0s4 and disk0s5. You should be able to do this from the Disk Utility application. Remove disk0s4 first, followed by disk0s5. Both operations may take quite a long time to complete. Be patient.  <answer192439> Basically you have to delete the linux partitions (disk0s4 and disk0s5) and then expand your CoreStorage volume (Macintosh HD) to the full size.  ol liBoot to Internet Recovery Mode by pressing kbdalt/kbdkbdcmd/kbdkbdR/kbd while booting/li liOpen Terminal in the menubar - Utilities/li lienter codediskutil list/code and codediskutil cs list/code to get the partition and the CoreStorage listing./li liNow unmount all disks except the OS X Base System (~1.3 GB) and its accompanying volumes (eleven really small sized volumes). First the CoreStorage disk (probably disk2, check the size: ~149.1 GB!) and then the physical disk:  precodediskutil unmountdisk /dev/disk2 diskutil unmountdisk /dev/disk0 /code/pre/li liEnter codegpt -r show /dev/disk0/code to get the partition table/li liRemove the two linux partitions (choose the proper index numbers of the two linux partitions):    precodegpt remove -i 5 /dev/disk0 gpt remove -i 4 /dev/disk0 /code/pre  If the deletion of the Linux swap volume fails try to reformat it with codediskutil eraseVolume JHFS+ Blank /dev/disk0s4/code and continue with step 4./li liReenter codegpt -r show /dev/disk0/code to check if all Linux partitions are deleted/li liRemount any previously unmounted volume in the reverse order with  precodediskutil mountdisk /dev/disk0 diskutil mount LVUUID #LVUUID=UUID of the logical volume found previously /code/pre/li liEnter codediskutil cs resizeStack LVUUID size/code  with LVUUID: UUID of the logical volume (usually the stronglast/strong UUID found in the codediskutil cs list/code listing you got previously) and size: the final size of your CoreStorage volume.  Example:  precodediskutil cs resizeStack 2AB8ABA4-9A16-48C2-A085-D3FE3251E41F 0g  /code/pre  to expand it to the full available size (0g is a magic number here)./li liFinally you might delete the GRUB loader if it was installed on disk0s1./li /ol  <comment228862> Have you tried doing it from the recovery partition? <comment228865> No! Do not try to delete disk0s1 or disk0s2. You do want to delete disk0s4 and disk0s5. <comment228874> @DavidAnderson - Sorry, I got the numbers mixed up, I'd meant 4 and 5. <comment228886> When I try to remove '-i 4 /dev/disk0' I get 'unable to open device /dev/disk0: resource busy' . It worked fine with '-i 5' I've tried unmounting and remounting <comment228891> You should rewrite your text and change the picture with disk0s4 and disk0s5. Otherwise, it only brings to confusion instead of focusing on the real question and possible answers... <comment228897> Getting there! Now on step 9 I'm getting: `Error: -69722: You can't perform this resize unless it has a booter (target partition is probably too small)` <comment228970> You appear to have a hybrid GPT. Could you post the output from the command `sudo  fdisk  /dev/disk0`. This will confirm if I am right. If I am, then extra steps need to added to klanomath's procedure. Note: the command will not change you computer. <comment229027> @klanomath no, fdisk and gpt both show the 4th partition, diskutil doesn't. I've updated my answer to show attempts at deletion. <comment229029> Yes, it's in the second to last line of the last image - the error message was just that one line <comment229031> After remounting /dev/disk0, I got the same error (`Unable to find disk for /dev/disk0`) <comment229032> @Peter How did you exactly set up Ubuntu? Which version? rEFInd? Where did you install GRUB? Did you follow any instructions (and may post a link to it)? I may set up another dual-boot VM and try to reproduce your problem. <comment229033> Would it be easier to just backup my files, wipe the hardrive and reinstall Mac? <comment229041> @Peter That's one easy solution yes! But there has to be a way to kill the swap partition. <comment229157> Did you give up and reinstall or are you still working on the problem? <comment229161> @David Anderson I've not reinstalled - I couldn't find the instructions I followed to install ubuntu so just decided to give it a break for a bit! Everything is the same as my last update. <comment229180> I asked because I am currently helping someone at "Ask Ubuntu" with a install of OS X, Windows and Ubuntu on a Mac with 2 internal disks. Every once in a while I check back to see how you are doing. In your Update, you  posted an image. The computer behaved exactly as it should in response to the commands you entered. You are entering commands to alter the GUID Partition Table (GPT) and the current problems are with the Master Boot Record (MBR) Partition Table. The second table is for legacy proposes. You were trying to delete a partition that I assume has already deleted from the GPT table. <comment229182> To be sure I know the current status of these 2 tables, could you update your answer and post their contents. The commands to do this are `sudo  gpt  -r  show  /dev/disk0` and `sudo  fdisk  /dev/disk0`. You can blank the UUID's if you want.  But if they are any of the following, don't bother, they are public knowledge. `C12A7328-F81F-11D2-BA4B-00A0C93EC93B`, `53746F72-6167-11AA-AA11-00306543ECAC`, `426F6F74-0000-11AA-AA11-00306543ECAC`, `0657FD6D-A4AB-43C4-84E5-0933C84B4F4F` or `0FC63DAF-8483-4772-8E79-3D69D8477DE4` <comment229324> Unless you object, I will post Peter to try my Update 2. If you think it is wrong, let me know. If you copy it to your answer, let be know. Note: currently the ID's for partitions 2 and 3 in his MBR table are wrong. <comment229330> @DavidAnderson  I think it should be ok with some small changes: Add an 'n' after the 'ee' to explicitly deny editing of the CHS mode and 'f 1' to mark the 1st partition active. Add a Time Machine backup to your answer! But I think Peter already made one. <comment229331> @DavidAnderson Why do think that the ID of  2 & 3 are wrong? <comment229357> I added your changes. The UEFI specification basically states no MBR partition should be marked active. I believe the moving 'f 4' to the first interactive command accomplishes this. I verified by using `sudo dd if=/dev/disk2 count=1 | xxd` to view a hex dump of the MBR. <comment229360> I believe klanomath and I have the final steps to fix your drive. See my posted Update 2. Let us know what happens. <comment229517> Your answer was very helpful and was the one that solved my eventual problem. I marked the other answer as accepted because it seems more complete for other people. <comment229546> MBR ID to GPT conversions: Apple_HFS=ID AF=GUID 48465300-0000-11AA-AA11-00306543ECAC, Apple_CoreStorage=ID AC=GUID 53746F72-6167-11AA-AA11-00306543ECAC, Apple_Boot=ID AB=GUID 426F6F74-0000-11AA-AA11-00306543ECAC, Microsoft Basic Data=ID's 07 and 0B=GUID EBD0A0A2-B9E5-4433-87C0-68B6B72699C7. You can verify by creating a hybrid GPT flash drive with EE, AF and 0B partitions. Converting AF partition to core storage results in EE, AC, AB and 0B partitions. Peter has two AF partitions. They should be AC and AB.