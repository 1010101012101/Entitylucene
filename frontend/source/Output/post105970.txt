MacBook Pro wakes immediately after sleeping <body> When I put my MacBook Pro to sleep, it will immediately wake up again after ~5 seconds, then go to sleep again and keep on sleeping and waking. This happens no matter if I close the lid or use the code -&gt; Sleep/code menu item.  The wake reason specified in the syslog, is codeXHC1/code, which I read was related to Bluetooth. I have Bluetooth disabled on my Mac and I also have "Allow Bluetooth devices to this computer" disabled and all the sharing services in System Preferences are disabled.  The only thing I have physically connected to my Mac is the charger, even though the syslog mentions the awakening might be caused by an USB device. If my USB plugs are damaged, can I disable wake for USB activity?  Here is the codesyslog/code for one sleep/wake cycle:  precodeOct 21 01:18:26 Tyilos-MBP kernel[0] &lt;Debug&gt;: sleep Oct 21 01:18:26 Tyilos-MBP kernel[0] &lt;Debug&gt;: Wake reason: XHC1 Oct 21 01:18:30 Tyilos-MBP kernel[0] &lt;Debug&gt;: AirPort_Brcm43xx::powerChange: System Wake - Full Wake/ Dark Wake / Maintenance wake Oct 21 01:18:30 Tyilos-MBP kernel[0] &lt;Debug&gt;: Previous Sleep Cause: 5 Oct 21 01:18:30 Tyilos-MBP kernel[0] &lt;Debug&gt;: USB (XHCI Root Hub USB 2.0 Simulation):Port 6 on bus 0xa connected or disconnected: portSC(0xf0202e0) Oct 21 01:18:30 Tyilos-MBP.local configd[18] &lt;Notice&gt;: network changed: v4(en1-:192.168.1.101) DNS- Proxy- SMB Oct 21 01:18:30 Tyilos-MBP.local mDNSResponder[39] &lt;Error&gt;: DeregisterInterface: Frequent transitions for interface en1 (192.168.1.101) Oct 21 01:18:30 Tyilos-MBP kernel[0] &lt;Debug&gt;: An Unknown USB Device (Port 2 of Hub at 0x15000000), may have caused a wake by being connected Oct 21 01:18:30 Tyilos-MBP kernel[0] &lt;Debug&gt;: TBT W (1): 0 [x] Oct 21 01:18:31 Tyilos-MBP kernel[0] &lt;Debug&gt;: MacAuthEvent en1   Auth result for: 84:1b:5e:dd:67:ec  MAC AUTH succeeded Oct 21 01:18:31 Tyilos-MBP kernel[0] &lt;Debug&gt;: wlEvent: en1 en1 Link UP virtIf = 0 Oct 21 01:18:31 Tyilos-MBP kernel[0] &lt;Debug&gt;: AirPort: Link Up on en1 Oct 21 01:18:31 Tyilos-MBP kernel[0] &lt;Debug&gt;: en1: BSSID changed to 84:1b:5e:dd:67:ec Oct 21 01:18:31 Tyilos-MBP kernel[0] &lt;Debug&gt;: en1::IO80211Interface::postMessage bssid changed Oct 21 01:18:31 Tyilos-MBP kernel[0] &lt;Debug&gt;: AirPort: RSN handshake complete on en1 Oct 21 01:18:32 Tyilos-MBP kernel[0] &lt;Debug&gt;: Graphics suppressed 2580 ms Oct 21 01:18:32 Tyilos-MBP.local configd[18] &lt;Notice&gt;: network changed: v4(en1+:192.168.1.101) DNS+ Proxy+ SMB Oct 21 01:18:32 Tyilos-MBP.local mDNSResponder[39] &lt;Error&gt;: mDNS_RegisterInterface: Frequent transitions for interface en1 (FE80:0000:0000:0000:5E96:9DFF:FE70:8BCB) Oct 21 01:18:32 Tyilos-MBP.local mDNSResponder[39] &lt;Error&gt;: mDNS_RegisterInterface: Frequent transitions for interface en1 (192.168.1.101) Oct 21 01:18:32 Tyilos-MBP.local UserEventAgent[11] &lt;Notice&gt;: Captive: en1: Not probing 'AAA' (protected network) Oct 21 01:18:32 Tyilos-MBP.local configd[18] &lt;Notice&gt;: network changed: v4(en1!:192.168.1.101) DNS Proxy SMB Oct 21 01:18:34 Tyilos-MBP.local airportd[19062] &lt;Error&gt;: _doAutoJoin: Already associated to “AAA”. Bailing on auto-join. Oct 21 01:18:35 Tyilos-MBP kernel[0] &lt;Debug&gt;: HID tickle 5265 ms Oct 21 01:18:35 Tyilos-MBP.local loginwindow[42] &lt;Error&gt;: ERROR | -[LWScreenLock(Private) screenIsLockedTimeExpired:] | No lock state found, use built in check Oct 21 01:18:35 Tyilos-MBP.local WindowServer[94] &lt;Warning&gt;: handle_will_sleep_auth_and_shield_windows: no lock state data Oct 21 01:18:35 Tyilos-MBP.local WindowServer[94] &lt;Warning&gt;: Created shield window 0x9be for display 0x003f003d Oct 21 01:18:35 Tyilos-MBP.local WindowServer[94] &lt;Warning&gt;: handle_will_sleep_auth_and_shield_windows: no lock state data Oct 21 01:18:35 Tyilos-MBP.local WindowServer[94] &lt;Warning&gt;: Created shield window 0x9bf for display 0x003f003e Oct 21 01:18:35 Tyilos-MBP.local WindowServer[94] &lt;Warning&gt;: handle_will_sleep_auth_and_shield_windows: no lock state data Oct 21 01:18:35 Tyilos-MBP.local KeyRemap4MacBook[371] &lt;Warning&gt;: observer_NSWorkspaceScreensDidWakeNotification Oct 21 01:18:35 Tyilos-MBP.local WindowServer[94] &lt;Warning&gt;: Created shield window 0x9c0 for display 0x003f003f Oct 21 01:18:35 Tyilos-MBP.local WindowServer[94] &lt;Warning&gt;: handle_will_sleep_auth_and_shield_windows: no lock state data Oct 21 01:18:35 Tyilos-MBP.local WindowServer[94] &lt;Error&gt;: CGXGetWindowOwner: Invalid window 2494 Oct 21 01:18:35 Tyilos-MBP.local HyperDock Helper[18694] &lt;Error&gt;: CGSGetWindowOwner Oct 21 01:18:35 Tyilos-MBP.local WindowServer[94] &lt;Error&gt;: CGXGetWindowOwner: Invalid window 2494 Oct 21 01:18:35 Tyilos-MBP.local HyperDock Helper[18694] &lt;Error&gt;: CGSGetWindowOwner Oct 21 01:18:35 Tyilos-MBP.local WindowServer[94] &lt;Error&gt;: CGXGetWindowOwner: Invalid window 2495 Oct 21 01:18:35 Tyilos-MBP.local HyperDock Helper[18694] &lt;Error&gt;: CGSGetWindowOwner Oct 21 01:18:35 Tyilos-MBP.local WindowServer[94] &lt;Error&gt;: CGXGetWindowOwner: Invalid window 2495 Oct 21 01:18:35 Tyilos-MBP.local HyperDock Helper[18694] &lt;Error&gt;: CGSGetWindowOwner Oct 21 01:18:35 Tyilos-MBP.local WindowServer[94] &lt;Error&gt;: CGXGetWindowOwner: Invalid window 2496 Oct 21 01:18:35 Tyilos-MBP.local HyperDock Helper[18694] &lt;Error&gt;: CGSGetWindowOwner Oct 21 01:18:35 Tyilos-MBP.local WindowServer[94] &lt;Error&gt;: CGXGetWindowOwner: Invalid window 2496 Oct 21 01:18:35 Tyilos-MBP.local HyperDock Helper[18694] &lt;Error&gt;: CGSGetWindowOwner Oct 21 01:18:35 Tyilos-MBP.local loginwindow[42] &lt;Error&gt;: resume called when there was already a timer Oct 21 01:18:35 Tyilos-MBP.local KeyRemap4MacBook[371] &lt;Warning&gt;: observer_NSWorkspaceDidWakeNotification Oct 21 01:18:35 Tyilos-MBP.local airportd[19062] &lt;Error&gt;: _doAutoJoin: Already associated to “AAA”. Bailing on auto-join. Oct 21 01:18:35 Tyilos-MBP kernel[0] &lt;Debug&gt;: en1: BSSID changed to 84:1b:5e:dd:67:ec Oct 21 01:18:37 Tyilos-MBP.local SIMBL Enabler for Sandboxed Apps[19066] &lt;Warning&gt;: Will terminate until reinvoked again by launchd. Oct 21 01:18:40 Tyilos-MBP.local SIMBL Enabler for Sandboxed Apps[19109] &lt;Warning&gt;: Set up watching for containers directory at URL file://localhost/Users/Tyilo/Library/Containers/ Oct 21 01:18:55 Tyilos-MBP.local SIMBL Enabler for Sandboxed Apps[19109] &lt;Warning&gt;: Will terminate until reinvoked again by launchd. Oct 21 01:19:00 Tyilos-MBP.local coreaudiod[308] &lt;Notice&gt;: Disabled automatic stack shots because audio IO is active Oct 21 01:19:00 Tyilos-MBP.local coreaudiod[308] &lt;Notice&gt;: Enabled automatic stack shots because audio IO is inactive Oct 21 01:19:03 Tyilos-MBP.local activitymonitord[19118] &lt;Notice&gt;: sending signal: 9 to pid: 60 Oct 21 01:19:03 Tyilos-MBP com.apple.launchd[1] (org.macports.ddclient[60]) &lt;Notice&gt;: Exited: Killed: 9 Oct 21 01:19:08 Tyilos-MBP.local SIMBL Enabler for Sandboxed Apps[19126] &lt;Warning&gt;: Set up watching for containers directory at URL file://localhost/Users/Tyilo/Library/Containers/ Oct 21 01:19:16 Tyilos-MBP.local coreaudiod[308] &lt;Notice&gt;: Disabled automatic stack shots because audio IO is active Oct 21 01:19:17 Tyilos-MBP.local coreaudiod[308] &lt;Notice&gt;: Enabled automatic stack shots because audio IO is inactive Oct 21 01:19:17 Tyilos-MBP.local coreaudiod[308] &lt;Notice&gt;: Disabled automatic stack shots because audio IO is active Oct 21 01:19:17 Tyilos-MBP.local coreaudiod[308] &lt;Notice&gt;: Enabled automatic stack shots because audio IO is inactive Oct 21 01:19:23 Tyilos-MBP.local SIMBL Enabler for Sandboxed Apps[19126] &lt;Warning&gt;: Will terminate until reinvoked again by launchd. Oct 21 01:19:25 Tyilos-MBP.local SIMBL Enabler for Sandboxed Apps[19127] &lt;Warning&gt;: Set up watching for containers directory at URL file://localhost/Users/Tyilo/Library/Containers/ Oct 21 01:19:35 Tyilos-MBP.local Airmail[297] &lt;Warning&gt;: [***ERROR***] ERROR IDLE asgerdrewsen@gmail.com Error Domain=MCOErrorDomain Code=1 "A stable connection to the server could not be established." UserInfo=0x7ff133b23e50 {NSLocalizedDescription=A stable connection to the server could not be established.} Oct 21 01:19:40 Tyilos-MBP.local SIMBL Enabler for Sandboxed Apps[19127] &lt;Warning&gt;: Will terminate until reinvoked again by launchd. Oct 21 01:20:08 Tyilos-MBP.local SIMBL Enabler for Sandboxed Apps[19131] &lt;Warning&gt;: Set up watching for containers directory at URL file://localhost/Users/Tyilo/Library/Containers/ Oct 21 01:20:16 Tyilos-MBP.local WindowServer[94] &lt;Error&gt;: CGXSetWindowBackgroundBlurRadius: Invalid window 0xffffffff Oct 21 01:20:16 Tyilos-MBP.local loginwindow[42] &lt;Error&gt;: find_shared_window: WID -1 Oct 21 01:20:16 Tyilos-MBP.local loginwindow[42] &lt;Error&gt;: CGSGetWindowTags: Invalid window 0xffffffff Oct 21 01:20:16 Tyilos-MBP.local loginwindow[42] &lt;Error&gt;: find_shared_window: WID -1 Oct 21 01:20:16 Tyilos-MBP.local loginwindow[42] &lt;Error&gt;: CGSSetWindowTags: Invalid window 0xffffffff Oct 21 01:20:16 Tyilos-MBP.local WindowServer[94] &lt;Warning&gt;: Created shield window 0x9d5 for display 0x04273140 Oct 21 01:20:16 Tyilos-MBP.local WindowServer[94] &lt;Warning&gt;: device_generate_desktop_screenshot: authw 0x7ff05a470d30(2000), shield 0x7ff05b125480(2001) Oct 21 01:20:16 Tyilos-MBP.local WindowServer[94] &lt;Warning&gt;: device_generate_lock_screen_screenshot: authw 0x7ff05a470d30(2000), shield 0x7ff05b125480(2001) Oct 21 01:20:16 Tyilos-MBP kernel[0] &lt;Debug&gt;: hibernate image path: /var/vm/sleepimage Oct 21 01:20:16 Tyilos-MBP kernel[0] &lt;Debug&gt;: AirPort_Brcm43xx::powerChange: System Sleep  Oct 21 01:20:16 Tyilos-MBP kernel[0] &lt;Debug&gt;: hibernate_alloc_pages act 624795, inact 515514, anon 6492, throt 0, spec 415907, wire 446254, wireinit 153624 Oct 21 01:20:16 Tyilos-MBP kernel[0] &lt;Debug&gt;: hibernate_setup(0) took 0 ms Oct 21 01:20:16 Tyilos-MBP kernel[0] &lt;Debug&gt;: sizeof(IOHibernateImageHeader) == 512 Oct 21 01:20:16 Tyilos-MBP kernel[0] &lt;Debug&gt;: kern_open_file_for_direct_io(0) took 4 ms Oct 21 01:20:16 Tyilos-MBP kernel[0] &lt;Debug&gt;: Opened file /var/vm/sleepimage, size 17179869184, partition base 0x0, maxio 2000000 ssd 0 Oct 21 01:20:16 Tyilos-MBP kernel[0] &lt;Debug&gt;: hibernate image major 1, minor 0, blocksize 512, pollers 5 Oct 21 01:20:18 Tyilos-MBP kernel[0] &lt;Debug&gt;: en1: BSSID changed to 84:1b:5e:dd:67:ec Oct 21 01:20:18 Tyilos-MBP kernel[0] &lt;Debug&gt;: wlEvent: en1 en1 Link DOWN virtIf = 0 Oct 21 01:20:18 Tyilos-MBP kernel[0] &lt;Debug&gt;: AirPort: Link Down on en1. Reason 8 (Disassociated because station leaving). Oct 21 01:20:18 Tyilos-MBP kernel[0] &lt;Debug&gt;: en1::IO80211Interface::postMessage bssid changed Oct 21 01:20:18 Tyilos-MBP kernel[0] &lt;Debug&gt;: hibernate_page_list_setall(preflight 0) start 0xffffff820dfdd000, 0xffffff820e05d000 Oct 21 01:20:20 Tyilos-MBP kernel[0] &lt;Debug&gt;: hibernate_page_list_setall time: 941 ms Oct 21 01:20:20 Tyilos-MBP kernel[0] &lt;Debug&gt;: pages 1975335, wire 412665, act 435370, inact 4559, cleaned 0 spec 285, zf 6424, throt 0, could discard act 176868 inact 504499 purgeable 19042 spec 415623 cleaned 0 Oct 21 01:20:20 Tyilos-MBP kernel[0] &lt;Debug&gt;: hibernate_page_list_setall found pageCount 859303 Oct 21 01:20:20 Tyilos-MBP kernel[0] &lt;Debug&gt;: IOHibernatePollerOpen, ml_get_interrupts_enabled 0 Oct 21 01:20:20 Tyilos-MBP kernel[0] &lt;Debug&gt;: IOHibernatePollerOpen(0) Oct 21 01:20:20 Tyilos-MBP kernel[0] &lt;Debug&gt;: encryptStart 13320 Oct 21 01:20:20 Tyilos-MBP kernel[0] &lt;Debug&gt;: IOPolledInterface::checkForWork[5] 0xe00002eb Oct 21 01:20:20 Tyilos-MBP kernel[0] &lt;Debug&gt;: PMStats: Hibernate write took 2 ms Oct 21 01:20:20 Tyilos-MBP kernel[0] &lt;Debug&gt;: all time: 2 ms, comp bytes: 0 time: 0 ms 0 Mb/s, crypt bytes: 184032 time: 0 ms 405 Mb/s,  Oct 21 01:20:20 Tyilos-MBP kernel[0] &lt;Debug&gt;: image 0 (0%), uncompressed 0 (0), compressed 0 (0%), sum1 8c6cac84, sum2 0 Oct 21 01:20:20 Tyilos-MBP kernel[0] &lt;Debug&gt;: wired_pages_encrypted 0, wired_pages_clear 0, dirty_pages_encrypted 0 Oct 21 01:20:20 Tyilos-MBP kernel[0] &lt;Debug&gt;: hibernate_write_image done(e00002eb) Oct 21 01:20:20 Tyilos-MBP kernel[0] &lt;Debug&gt;: sleep Oct 21 01:20:20 Tyilos-MBP kernel[0] &lt;Debug&gt;: Wake reason: XHC1 /code/pre  h2Update/h2  It also happens when booting to the Recovery HD and when booting in safe mode, so it seems like it must be a hardware problem. It also doesn't matter if the two USB ports on my Mac have something connected to them or not.  h2Update 2/h2  codeXHC1/code and port code0xa/code means "USB 3.0 Hi-Speed/SuperSpeed Bus" as seen in the screenshots below:  img src="https://i.stack.imgur.com/JM1WM.png" alt="enter image description here" img src="https://i.stack.imgur.com/xXnEO.png" alt="enter image description here"  h2Update 3/h2  It only happens when the power adapter is plugged in, so unplugging the adapter before sleeping works perfectly.  <answer106699> It appears this has to do with a Bluetooth Device connecting and waking up your computer.  Source: https://discussions.apple.com/thread/4405043?start=0&amp;tstart=0  <answer157530> I had the same problem with Linux on Mac, turned out that USB is waking up the system. I disabled the possibility for USB waking up the laptop on Linux. This does not affect the power button or the lid, they still work.  <answer174627> Try unplugging all USB and other devices. Also try with turning off Bluetooth in the menu bar. It seams like it is some device connecting and disconnecting which is preventing your Mac from staying in sleep mode.  <answer214818> Same problem here. MBP Retina (13-inch, early 2015) still running Yosemite.  When I am at my desk, I have an Apple Extended Keyboard plugged into the left side USB port. This has been my writing keyboard (I am a professional writer) for many years, and many laptops. Never have I had this spontaneous wake-from-sleep problem.  This week, I was forced to install Microsoft Office to work with a specific client. I had avoided installing any MS software until now.  This is the ONLY change that has happened to my machine this week, and this is the week that my computer has started waking randomly in the middle of the night, or waking immediately after putting it to sleep.  I believe MS Office may be the problem here.  I have disabled "Allow Bluetooth devices to wake this computer" in Bluetooth advanced preferences.  I have disabled "Wake for network access" and "Enable Power Nap" in the Energy Saver prefs.  None of this has helped the problem. I think MS Office is probing the USB port, or something, and causing my external keyboard to respond. I know. It sounds weird. But NOTHING else on my computer has changed, and this problem only started after installing Office.  <comment125252> Can you provide more information on how to resolve this problem? <comment357094> Could you please provide instructions on how to disable this? Thanks.