How to repair HFS+ partition? <body> So somehow my 2013 Retina MacBook Pro's internal SSD went and got its partition map messed up. I was using it, put it to sleep, and when I woke it back up about an hour later I was presented with a black screen. Forced a shutdown and on reboot it gives me a blank black screen and that's it.   The hard drive shows up when I hold down option on boot, but obviously does not work.  Disk Utility shows the disk as 251 GB unformatted with a child count of 3. Running diskutil list shows me the children, and they look correctish.  precode/dev/disk0    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                        *251.0 GB   disk0    1:                        EFI EFI                     209.7 MB   disk0s1    2:          Apple_CoreStorage Macintosh HD            250.0 GB   disk0s2    3:                 Apple_Boot Recovery HD             650.0 MB   disk0s3 /code/pre  output of codegpt -r show /dev/disk0/code:  precode    start       size  index  contents         0          1         PMBR         1          1         Pri GPT header         2         32         Pri GPT table        34          6                 40     409600      1  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B    409640  488555536      2  GPT part - 53746F72-6167-11AA-AA11-00306543ECAC 488965176    1269536      3  GPT part - 426F6F74-0000-11AA-AA11-00306543ECAC 490234712          7          490234719         32         Sec GPT table 490234751          1         Sec GPT header /code/pre  output of codediskutil cs list/code  precodeCoreStorage logical volume groups (1 found) | +-- Logical Volume Group 97EFE039-8BB4-4907-8739-2D9636F68947 ========================================================= Name:         Macintosh HD Status:       Offline Size:         250140434432 B (250.1 GB) Free Space:   249804886016 B (249.8 GB) | +-&lt; Physical Volume 13CEA9C7-10ED-438D-A4C0-6F4C18FC0335     ----------------------------------------------------     Index:    0     Disk:     disk0s2     Status:   Online     Size:     250140434432 B (250.1 GB) /code/pre  fsck output:  precode   Executing fsck_cs (version 517.20.1) ** Checking volume ** disk0s2: Scan for Volume Headers ** disk0s2: Scan for Disk Labels ** Logical Volume Group 97EFE039-8BB4-4907-8739-2D9636F68947 on 1 device ** disk0s2: Scan for Metadata Volume ** Logical Volume Group has a 16 MB Metadata Volume with double redundancy ** Start scanning metadata for a valid checkpoint ** Load and verify Segment Headers ** Load and verify Checkpoint Payload ** Load and verify Transaction Segment ** Load and verify Transaction Segment ** Incorporate 1 newer non-checkpoint transaction ** Load and verify Virtual Address Table ** Load and verify Segment Usage Table ** Load and verify Metadata Superblock ** Load and verify Logical Volumes B-Trees    Unable to bootstrap transaction group 2815: cksum mismatch ** Continue scanning metadata for an older checkpoint ** Load and verify Segment Headers ** Load and verify Checkpoint Payload ** Load and verify Transaction Segment ** Incorporate 0 newer non-checkpoint transactions ** Load and verify Virtual Address Table ** Load and verify Segment Usage Table ** Load and verify Metadata Superblock    In-progress volume maintenance ** Load and verify Logical Volumes B-Trees    Unable to bootstrap transaction group 2814: cksum mismatch ** Continue scanning metadata for an older checkpoint ** Load and verify Segment Headers    Unable to bootstrap transaction group 2813: cksum mismatch ** Continue scanning metadata for an older checkpoint ** Load and verify Segment Headers    Unable to bootstrap transaction group 2812: cksum mismatch    No valid commit checkpoint found ** The volume 97EFE039-8BB4-4907-8739-2D9636F68947 was found corrupt and can not be repaired /code/pre  I have tried this: Repair a Mac OS X HFS+ Partition table â€“ with no success. I also tried codediskutil repairDisk /dev/disk0/code and it failed because it couldn't create the EFI partition.  On Monday, Time Machine told me I needed to start a new backup, so of course I do not have a intact backup at the ready or I would've wiped it and restored.   Any ideas?  <answer242871> The partition map is completely valid - the CoreStorage stack is messed up though.  After creating a CoreStorage stack (e.g by enabling FileVault) the CoreStorage emlogical volume group/em should contain at least one emphysical volume/em, one emlogical volume family/em and a emlogical volume/em.  In your case the last two are missing due to CS stack corruption. The output of codediskutil cs list/code in your question should also show a emlogical volume family/em and a emlogical volume/em.  In rare cases this may be repaired by booting to (Internet) Recovery Mode and opening Terminal in the menubar  Utilites:  Check the CS stack:  precodefsck_cs /dev/rdisk0s2 /code/pre  Repair it:  precodediskutil repairDisk /dev/disk0 /code/pre  hr  If the latter fails restore your main volume using a current Time Machine backup. If you don't have a backup codedd/code disk0 to a raw image and hope that someone comes up with a solution to repair or recover filevaulted data. I learned a lot about FileVault here - check the links (e.g. Infiltrate the Vault: Security Analysis and Decryption of Lion Full Disk Encryption) there also!  <comment298849> output added, thanks! <comment298858> output added, thanks again <comment298862> Yes I did, forgot to mention that... I have the passphrase still, but at this point I'm expecting the worst. <comment298864> I did not use TestDisk to do any repairs, only analyze <comment298868> Any possible way to recover any data at all from it? <comment298869> Try to boot to internet recovery mode and open Terminal.app from the menubar  Utilities. Enter `fsck_cs /dev/rdisk0s2` to check the stack. Please post any errors afterwards (you probably have to take a pic with an iPhone or similar and post it here). <comment298874> output added. doesn't look good... also I've been piping the outputs over SSH <comment298878> Thanks for all of your input. Should I just cut my losses and wipe it? <comment298881> I did a dd on /dev/disk0 and it seems to be alright, but the partitions aren't there anymore. Would I be better off doing a dd on /dev/disk0s2 and trying to recover that in the future? <comment298883> No, you have to include disk0s3 because it contains an important key file - it's easier to dd the complete disk disk0 <comment359262> How do I `dd` disk0 to a raw image? <comment359265> Aha, I save it to an image to figure out how to save the data. I'm not interested in the data. I just want to wipe it and reinstall macOS, but it won't let me do that.