chsh doesn't change $SHELL <body> I'm having some difficulties in changing the value of code$SHELL/code in OSX's iTerm app. iTerm is starting in code/bin/zsh/code, but the value of code$SHELL/code doesn't seem to change.   h3What I've done:/h3  ol liChanged "command" as code/bin/zsh/code in iTerm's configuration window./li liExecuted codechsh/code to change the shell to code/bin/zsh/code./li liConfirmed iTerm is started in code/bin/zsh/code/li /ol  h3NOTE #1: In OSX's stock terminal app, "Terminal.app":/h3  precodeecho $SHELL /bin/zsh /code/pre  h3NOTE #2: In OSX's popular terminal app, "iTerm.app":/h3  precode$ echo $SHELL /bin/bash  $ echo $USER $ melvkim  $ chsh -s /bin/zsh Changing shell for melvkim. Password for melvkim: chsh: no changes made /code/pre  <answer131943> The code-s/code flag for codechsh/code only attempts to change the shell, and probably fails due to Open Directory:  The usual UNIX system 'chsh' would modify the code/etc/passwd/code entry.   However, I was able to run codechsh/code with no arguments, which gave me an editor, and the following information:  precode# Changing user information for nevin. # Use "passwd" to change the password. ## # Open Directory: /Local/Default ## Shell: /bin/tcsh Full Name: Nevin Williams Office Location: Office Phone: Home Phone: /code/pre  I was able to edit the "Shell:" entry to code/bin/zsh/code, and subsequent Terminal windows opened with a Z-shell prompt.  <answer131944> The problem was the "iTerm" app's conflicting settings with the shell. To resolve, I've reset "login shell" command in iTerm preference window:     iTerm.app - Preferences - Profiles - General - Command - Click on "Login shell"   Then, I executed codechsh/code to modify it as code/bin/zsh/code.   To reproduce the problem (having $SHELL set as code/bin/bash//code, even though the login shell is code/bin/zsh/code), I just had to change "iTerm" setting back to "Command: /bin/zsh/".  <answer163921> Look here for the excellent explanation and solution posted by @mklement0 [in relation to a codebash/code upgrade problem.  I had a similar problem in doing the opposite on my system (OS X 10.10.1): making codebash/code the default login shell again after I had installed codeoh-my-zsh/code, which made codezsh/code the default, and then upgrading codebash/code from 3.2.53 to 4.3.30 using Homebrew (why is Apple shipping Yosemite with an old codebash/code version?).  I think the codeSHELL/code environment variable reflects but does emnot/em control the actual default login shell for the user.  For example, if, say, codebash/code was your default and you open a new codebash/code shell window from terminal then code$ export SHELL="/bin/zsh"; echo "$SHELL"/code would show code/bin/zsh/code but no actual change will occur because if you open a new shell window from terminal and do code$ echo $0/code then you would see code-bash/code (code$0/code contains the name and path of the command that started the shell window, in this case codebash/code, and the code-/code next to it indicates that it is a login shell).  As @mklement0 pointed out the actual default login shell for the user is controlled by the codeUserShell/code property in the user's record in the system's internal database - this can be queried and updated using the command line utility codedscl/code.  This information will passed to your terminal app when you open a shell window.  What codechsh -s /bin/zsh/code does is change this codeUserShell/code property to set it to codezsh/code - you can check this by doing codedscl . -read /Users/$USER/ UserShell/code immediately afterwards, and you will see codeUserShell: /bin/zsh/code.  But the change is emnot/em effected in the current window, until you do something like codeexec su - $USER/code as suggested by @mklement0, or until you close and open a shell window.  <answer272081> Try executing the command: codechsh -s /bin/zsh/code from the default Mac terminal.  <comment155036> I tried `chsh` with no args. Still no luck. The variable doesn't change. In fact, when the editor was loaded, it showed `/bin/zsh`. <comment155037> Try changing the shell with the editor.   I made a screen capture of me changing from /bin/tcsh to /bin/zsh and back.  http://bonmot.ca/~nevin/chsh.mov <comment155038> Thank you very much for taking your time recording posting your screencast! Your solution is supposed to be working on other terminal emulators, but I wasn't abel to change `$SHELL` on iTerm. Please refer to my answer for details.. Thanks! <comment155079> Have you looked in `/etc/shells` ? The manual states that if the shell you specify is not in that file, it isn't considered a standard shell. <comment341982> What does this do differently from the OP? <comment342429> @JMY1000 If you try to execute that command from iTerm, the changes aren't reflected. You should be able to get it working by executing it from Mac's default terminal.