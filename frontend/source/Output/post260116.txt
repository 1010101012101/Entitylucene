Trouble creating directory from script run by launchd <body> I have a simple script that creates a new directory based on the date then copies a set of files to that directory.  It runs fine from Terminal.  When I set it up to run as a UserAgent it fails.  The error log shows that has changed to paths from code/Users/Study/xxx/code to code/var/root/xxx/code. I've tried running it as coderoot/code from Terminal and it still works.  I've ensured coderoot/code is not the owner of the script file.  I've changed my original path of code~/xxx/code to the code/Users/Study/xxx/code  but for some reason when run from launchd it changes the path.  Any ideas?  script:  precode!/bin/bash  MO=$(date +%d%B%Y) mkdir /Users/Study/Dropbox/SPID_backups/$MO cp -r /Users/Study/WebDevelopment/SPID/*.* /Users/Study/Dropbox/SPID_backups/$MO /code/pre  launchctl plist:  precode&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt; &lt;plist version="1.0"&gt; &lt;dict&gt;     &lt;key&gt;Label&lt;/key&gt;     &lt;string&gt;com.spidbackup&lt;/string&gt;     &lt;key&gt;Program&lt;/key&gt;     &lt;string&gt;/Users/Study/Library/Scripts/spidbackup.sh&lt;/string&gt;     &lt;key&gt;StandardErrorPath&lt;/key&gt;     &lt;string&gt;/tmp/com.spidbackup.err&lt;/string&gt;     &lt;key&gt;StandardOutPath&lt;/key&gt;     &lt;string&gt;/tmp/com.spidbackup.out&lt;/string&gt;     &lt;key&gt;StartCalendarInterval&lt;/key&gt;     &lt;array&gt;         &lt;dict&gt;             &lt;key&gt;Hour&lt;/key&gt;             &lt;integer&gt;17&lt;/integer&gt;             &lt;key&gt;Minute&lt;/key&gt;             &lt;integer&gt;11&lt;/integer&gt;         &lt;/dict&gt;     &lt;/array&gt;     &lt;key&gt;WorkingDirectory&lt;/key&gt;     &lt;string&gt;/Users/Study&lt;/string&gt; &lt;/dict&gt; &lt;/plist&gt; /code/pre  <answer260120> You backup task is (very) user-specific and no system service, so the proper location for the launch agent is ~/Library/LaunchAgents/. If you put the plist in /Library/LaunchAgents it will run on behalf of every user logged in at ~ 5.11pm - which will fail for most users because they probably can't access some or most of your user folders/files.  hr  Use a proper shebang in the script code#!/bin/bash../code and make the script executable: codechmod +x /Users/Study/Library/Scripts/spidbackup.sh/code.  Completely remove the plist from the launchctl db with codesudo launchctl remove com.spidbackup/code and codelaunchctl remove com.spidbackup/code. Move the plist to /Users/Study/Library/LaunchAgents/, chown/chmod it to your user and remove the key emWorkingDirectory/em and the associated string.  Finally reload the agent with:  precodelaunchctl load /Users/Study/Library/LaunchAgents/com.spidbackup.plist  /code/pre  hr  The proper permissions/ownerships for the files are finally:  precodels -l /Users/Study/Library/Scripts/spidbackup.sh -rwxr-xr-x  1 study  staff  ... spidbackup.sh /code/pre  or  precode-rwx------  1 study  staff  ... spidbackup.sh /code/pre  and  precodels -l /Users/Study/Library/LaunchAgents/com.spidbackup.plist  -rw-r--r--  1 study  staff  ... com.spidbackup.plist /code/pre  assuming emStudy/em is your user name.  Please also check capitalization (e.g. study vs. Study).  <answer260186> I don't actually have the answer but it was clearly something to do with permissions and ownership.  I started over with a new file and a new plist.  Everything works as expected.  Thanks for all the comments.  <comment325540> First, it sounds like this is running as a launch daemon (as root), rather than as a launch agent (under the logged-in user). How exactly did you install and activate it? Also, are you sure you're running the right version of the script (i.e. the updated version with /Users/Study/xxx instead of ~/xxx)? <comment325545> Gordon, yes, I've run cat on the file listed in the plist.  It is the correct version.  It runs fine from the command line.  I originally added it as root in /Library/LaunchAgents/.  I've tried moving it to ~/Library/LaunchAgents and ensuring root is not the owner. <comment325546> klanomoath, that was a copy/paste error on the shebang.  The # is actually there. I tried copying the text from each file and pasting into a new file, renaming each one and putting them into their respective directories: ~/Library/LaunchAgents/spidbak.sh, ~/Library/Scripts/spidbak.sh.  I did the copy/paste in TextWrangler, saved to my docs folder and used cp in Terminal to move them.  I made spidbak.sh executable.  Still the same problem.  I'm quite confused. <comment325549> I just tried moving the script to a new directory which wasn't owned by root.  No change. <comment325553> @Mike The proper name is /Users/Study/Library/LaunchAgents/com.spidbackup.plist" <comment325563> Quick questions...how do you want this file to run, only when the user is logged in or when the computer is on? Do you only want it for one user or for all users <comment325643> @Allan, I want it to run once a month if the computer is on.  But I'm the only user and the computer is always on.  I realize now that LauncgAgents is the best place for it.