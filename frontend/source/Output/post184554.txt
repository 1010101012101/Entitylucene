What does AirPlay need from wifi and router? <body> I have been using AirPlay to an Airport Express connected to my HiFi very successfully for years. My router and main wifi access point were Apple AirPort Extreme - so it was all Apple to Apple and it worked.  Now I have just installed a new Virgin Broadband Super Hub 2ac (it's a customised Netgear cable modem router with built-in wifi) and for reasons of local layout I have set it up as router and as a wifi access point. It works very well. I have put the old AirPort Extreme into bridge mode so it just serves as a switch, and have reset the Airport Express to join the new wireless network.  Everything works well except AirPlay. Even AirPlay sometimes works - but mostly it fails. The Airport Express AirPlay service is always visible from my iPhone, but trying to play music through it just usually fails.  The Virgin media forums have several stories of "AirPlay doesn't work with my Virgin Super hub" - and the consensus response seems to be "don't use the Super hub as a router". This seems to me to be defeatist.  There must be some requirement of AirPlay that the router or wifi service isn't satisfying. What is it? What does AirPlay need? Some particular protocol? Some special wifi setting?  <answer184592> AirPlay uses the following ports:  ul liTCP 80 - http/li liTCP 443 - https/li liTCP/UDP 554 - rstp/li liTCP 3689 - daap/li liUDB 5353 - mDNS/li /ul  Data from https://support.apple.com/en-us/HT202944 - TCP and UDP ports used by Apple software products and TCP and UDP ports and protocols used by Apple TV  Here's how to test ports and also an AirPort centric setup guide   <comment218813> Not that it's an answer to your question, but I just finished typing this up for another, slightly different issue, over on SuperUserâ€¦ http://superuser.com/a/909159/347380 <comment218873> Thanks Tetsujin - I had read that discussion over on SuperUser and would really prefer to try to understand what AirPlay needs and why the Virgin so-called super-hub will not support it properly.  The Virgin SH is configurable with advanced settings and does seem to work well for everything else. <comment218879> More info: AirPlay DOES work for playing ITunes on my iMac, which is connected by ethernet to the Virgin router, with the Airport Express picking up the wifi signal and feeding the music to my HiFi.  So when I say "AirPlay doesn't work" I mean that iPhone or iPad will not transmit AirPlay over wifi. <comment218907> Are the ethernet ports and Wi-Fi connections on the same subnet? That is a requirement of AirPlay, and would explain why Ethernet works but Wi-Fi does not. <comment219056> Thanks but yes of course these connections are on the same subnet. <comment219063> Thank you very much, bmike, for this very helpful information. However the port-testing with Apple's network utility does not seem to work with the Airport Express as a target. Also it's not easy to test ports from iOS devices.   I did find an app. It gave me a negative result but I wasn't sure whether to believe it. I have since got AirPlay to work intermittently from the iPhone - by disabling the firewall on the superhub!  I know that the firewall shouldn't be relevant to purely local lan connectivity issues - but suspect that the firmware on this kit may be a bit buggy? <comment278728> Does the AP have anything like "traffic separation" in its settings? Some APs can prevent one wireless device from seeing/talking to other wireless devices with this setting (that would be for security reasons in public network situations).