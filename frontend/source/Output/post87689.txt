Updating and migrating a Mac OSX 10.6.8 server to a new Mac OSX 10.7 server <body> There is no good instruction on the internet on how to upgrade and migrate a Mac OSX 10.6.8 server to a new Mac OSX 10.7 server (not just updating the 10.6.8, but also migrating). For my employer, I had to do this (it took my days of trial and error!) and finally, was successful. I hope this will help someone in the future (and save a lot of time)!  hr  Note: This text was translated from my German source text, written for my university. Some stuff might be labelled differently in an English Mac environment.  strongRequirements/strong:  •   Mac OS X 10.7 (not 10.8!) Client version installedbr •   Mac Server 10.7 App (Server.app, not installed, only available)br •   Test calendar entry on the old 10.6.8 serverbr •   Recent (!) backup of the 10.6.8 serverbr •   Recent (!) DMG-backup (use Carbon Copy Cloner) of the 10.6.8 Serverbr strongIMPORTANT/strong: If you use DHCP – set IP to manual. Only images with manual IPs can be copied in a later step! Additionally, use a new IP so you can configure your new server remotely (so IPs don’t get mixed up!)br •   USB Stick with enough space for your server dmg-image (this can be a problem)br •   A server clone on the usb stick (use Carbon Copy Cloner)br •   Patience &amp; a lot of time!  brbr strongLet’s start! Step by Step/strong  ol liAll requirements should be fulfilled (double check them!)/li liStart your 10.7 Client/li liStart the new server (IMPORTANT: DO NOT install anything. Just start the machine. A installation screen will be shown, however, do not click anything)/li /ol  If everything is correct, you’ll see in the Finder (on the left, “share”) your new Server (e.g. MacMini-xxxxxxxxx)  ol liCopy the Server.app on your 10.7 client and copy it in your Application-directory. DO NOT START IT YET. The app is called something like lion-server-10.7.4.dmg and is approx.. 20MB/li liStart the App, but do not click Next or anything else (you’ll see a welcome screen)./li liOn the top bar, click “Manage” and go to “Connect with server” (or cmd-N)/li liA windows opens where you should see your new server. a.  IF you don’t see the server, try to assign a new IP address and/or DNS name/li liUnder your server, you should see “Configure this server”. Should you see this text, you did everything correct so far. Congrats to that!/li liThere’ll be a screen, prompting for the serial number of the device (normally right under the device, ask Google if you do not know where to look). Enter this serial number (e.g. C07J1234567). Important: Case-sensitive entry! a.  If you don’t enter a correct serial number, you’ll here a error sound (empflomp/em) and no error message will be returned!/li liIf you entered the serial number correctly, a screen where you can adjust your setting will be shown to you (e.g. region, country etc.)/li liClick next, adjust your settings according to your preferences. At one point you’ll come to a screen named “Transfer Mac-Server”/li liOn this screen, you’ll chose the transfer mode “Transfer information from a existing server”. DO NOT CLICK NEXT!/li liPlug in the usb stick with the copy of your old server (the 10.6.8, see requirements) and click next./li liOur usb stick should be seen in the selection from the sources (generally a whitish symbol). The correct server version 10.6.8 should be recognized/li liChose the stick as source and click “transfer”/li liFollow the onscreen steps. This might take a couple of minutes./li liAfter all the data was transferred, the server will configure its services by itself a.  Note: Should the original server (the one we copied to the usb stick) still be online, a error message will be displayed (on the new and old server). The transfer will fail and you will have to redo all the steps. You did not meet all the requirements! I told you, it’s important!/li liAfter some minutes the configuration should be finished and the Server.app shows you a friendly “Thanks you”. Don't panic, the new server will restart automatically./li liCongratulations! You just updated your 10.6.8 Server to 10.7!/li /ol  For test purpose, open your iCal and check if your test calendar entry is there.  strongServices/strong:  iCal: Migration should work perfectly.br Webservices: Should codehttp://localhost/code not work, you’ll probably have to reset it. Backup first! Use the terminal command: codesudo serveradmin command web:command=restoreFactorySettings/codebr Restart your webservice and it should work.br Wikis: SHOULD work with the migration. If not:  0.) Browse in your Snow Leopardserver to /Library and copy the Collaboration directory. Copy this to the desktop of your Lion server.br 1.)Download this zip file on your new server :http://sourceforge.net/projects/phppgadmin/files/phpPgAdmin%20%5Bstable%5D/phpPg Admin-5.0/phpPgAdmin-5.0.2.zip/downloadbr 2.) Unzip it, rename the folder to "phppgadmin"(this is to make it easier to browse to) and copy it into your /Library/Server/Web/Data/Sites/Default folder.br 3.) In your server app, go to the web service and check the box next to "Enable PHP web applications".br 4.) Open safari and browse to codehttp://localhost/phppgadmin/codebr 5.) Click on PostgreSQL and that will bring up a login screen.br 6.) Use the login name of _postgres. The password is your administrator password.br You should see the following databases: caldav, collab, device_management, postgres, roundcubemailbr 7.) Go to the server app and turn all the services off except for the Web service (be sure that the wiki service is off as well)br 8.) In the phppgadmin screen, click on the PostgresSQL icon on on the left pane. Check all the boxes next to the databases excluding the postgres database. In the 'Action on multiple lines" section select "drop" then Execute.br 9.) This will delete all the databases except for the "posgres" database. (don’t worry, all these databases are in the file you made and transferred to your home directory.br 10.) Browse in your Snow Leopardserver to /Library and copy the Collaboration directory.br 11.) Copy this to the desktop of your Lion server.br 12.) Now start the Wiki in the Server app of the Lion server (or Terminal: sudo serveradmin start wiki )br 13.) Assuming admin is the user name you are logged in under:br Execute the folowing command:br codesudo wikiadmin migrate -r /Users/admin/Desktop/Collaboration/code  brbr  I hope this all worked well for you!  Note: The Wiki migration was orginally posted by the user emalmafromburley/em here 