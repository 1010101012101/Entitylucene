quicklookd and revisiond eating my CPU <body> I'm observing regular and abnormal CPU usage on my macbook pro. codequicklookd/code in par with coderevisiond/code are eating together over of 50%. It drains my battery significantly and makes the whole machine hot.  I'm not sure when exactly it started but I'm suspecting latest 10.10.3 upgrade as I didn't notice this before.  After reading some post on the net I cleared code~Libraries/Cache/code and code/private/var/folders/code then rebooted. It looked like the problem was gone (those processes didn't show up), but only for a while. The next day I resumed from sleep, again - codequicklookd/code and coderevisiond/code started to burn my CPU.  Any clues how to get rid of this? What's causing this problem? It looks like these two processes are somehow connected, because when I cleared the cache and restarted none of them used a lot of cpu. Today, both of them do (quicklookd 24-30% , revisiond ~15%).  strong[Update]/strong  Running codesudo opensnoop -n revisiond/code shows nothing.  Running codesudo opensnoop -n quicklookd/code brings endless list of entries like these:  precode  UID    PID COMM          FD PATH                    501   4783 quicklookd    23 /                       501   4783 quicklookd    23 /                       501   4783 quicklookd    23 /                       501   4783 quicklookd    23 /                       501   4783 quicklookd    23 /                       501   4783 quicklookd    23 /                       501   4783 quicklookd    23 /                       501   4783 quicklookd    23 /                       501   4783 quicklookd    23 /   501   4783 quicklookd    21 /   501   4783 quicklookd    23 /                       501   4783 quicklookd    23 /                       501   4783 quicklookd    23 /                       501   4783 quicklookd    23 /                       501   4783 quicklookd    23 /                       501   4783 quicklookd    23 / /code/pre  It goes on and on and on. It's just endless. codeFD/code column is always code23/code except two or three code21/code.  strong[Update 2]/strong  After few minutes I got some other entries besides code501   4783 quicklookd    23 //code (not pasting theme here as they were irrelevant)  And then again, whole lot of code501   4967 quicklookd    23 //code  strong[Update 3]/strong  I've also noticed that codediskarbitrationd/code and codediskmanagementd/code scores quite high (~ 5%) and stay on top of the process list (sorted by CPU usage) just below codequicklookd/code and coderevisiond/code. Looks like this also might have something to do with this issue.  I've closed (codecmd + q/code all other apps to make sure nothing interferes the measurements).  strong[Update 4]/strong  Found few interesting entries in console:  precodeFailed to obtain sandbox extension for path=/Users/me/Library/Caches/com.apple.quicklook.satellite. Errno:1 CGSConnectionByID: 0 is not a valid connection ID. [QL] Using too much memory (161 MB), hit critical threshold (120 MB), exiting immediately to clean up. [QL] Unable to write memory cache on disk In -[NSApplication(NSQuietSafeQuit) _updateCanQuitQuietlyAndSafely], _LSSetApplicationInformationItem(NSCanQuitQuietlyAndSafely) returned error -50 /code/pre  They repeat few regularly each day. Especially those about memory and invalid connection.  strong[Update 5]/strong  codesudo iosnoop -n quicklookd/code revealed this:  precode  UID   PID D    BLOCK   SIZE       COMM PATHNAME   501  5656 W 56385320  32768 quicklookd ??/Quick Look/cloudthumbnails.db-journal   501  5656 W 56385320   4096 quicklookd ??/Quick Look/cloudthumbnails.db-journal   501  5656 W 48100696  12288 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 48100816   8192 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 48100840   8192 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 56385640  28672 quicklookd ??/T/etilqs_kYNR5XinU71bydh   501  5656 W 56386736  32768 quicklookd ??/Quick Look/cloudthumbnails.db-journal   501  5656 W 56386736   4096 quicklookd ??/Quick Look/cloudthumbnails.db-journal   501  5656 W 48100696  12288 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 48100816   8192 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 48100840   8192 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 56387280  28672 quicklookd ??/T/etilqs_ejadCww3DunYuu3 /code/pre  codecloudthumbnails.db/code and codecloudthumbnails.db-journal/code repeats and repeats.  <answer182634> I would try using codeopensnoop/code to see what files quicklookd is looking at. There might be a particular files that it is either having trouble reading or writing to.  While they are using excessive CPU, open a Terminal window and type the following command. You'll be prompted for your password.  precode sudo opensnoop -n quicklookd /code/pre  This should show you all the files that quicklookd is reading or writing to, and might help you identify if one particular file or folder of files is causing the issue.  Try the same thing for revisiond.  <answer183405> This is how I fixed this problem. It might help you but from what I've seen so far, even thought there are similar issues, the source of problems are different.  I've ran codesudo iosnoop -n quicklookd/code - it shown something like this:  precode  UID   PID D    BLOCK   SIZE       COMM PATHNAME   501  5656 W 56385320  32768 quicklookd ??/Quick Look/cloudthumbnails.db-journal   501  5656 W 56385320   4096 quicklookd ??/Quick Look/cloudthumbnails.db-journal   501  5656 W 48100696  12288 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 48100816   8192 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 48100840   8192 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 56385640  28672 quicklookd ??/T/etilqs_kYNR5XinU71bydh   501  5656 W 56386736  32768 quicklookd ??/Quick Look/cloudthumbnails.db-journal   501  5656 W 56386736   4096 quicklookd ??/Quick Look/cloudthumbnails.db-journal   501  5656 W 48100696  12288 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 48100816   8192 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 48100840   8192 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 56387280  28672 quicklookd ??/T/etilqs_ejadCww3DunYuu3   501  5656 W 56474504  32768 quicklookd ??/Quick Look/cloudthumbnails.db-journal   501  5656 W 56474504   4096 quicklookd ??/Quick Look/cloudthumbnails.db-journal   501  5656 W 48100696  12288 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 48100816   8192 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 48100840   8192 quicklookd ??/Quick Look/cloudthumbnails.db   501  5656 W 56474568  28672 quicklookd ??/T/etilqs_QzHS30kC4YT8ETi /code/pre  I gave it a shot and looked for codecloudthumbnails.db/code file. Bingo! Found it in code/Users/me/Library/Application Support/Quick Look/code and the codequicklookd/code was writing to codecloudthumbnails.db-journal/code like crazy. But it was writing small chunks, then deleting the file and writing those small chunks again. Unfortunately this is a binary file, so it's not easy to read, but I gave it a shot and just did codetail cloudthumbnails.db-journal/code. I got mostly gibberish, but I noticed repeated path code/Users/me/Library/Mobile Documents/com~apple~CloudDocs//code and some files there.  This is iCloud folder and for some reason quicklookd was unable to process those files. I deleted them (moved to trash and emptied) and TADA! It solved the problem.  I have no idea why this happened, why codequicklookd/code was unable to process those files. I've sent those files again to iCloud and everything was fine - no crazy behavior of codequicklookd/code.  <answer190337> I had the exact same thing but none of the suggestions had shed any light on the situation. After an hour of searching I decided to apply an old trick, which resolved the issue completely:  ul lirepaired all disk permissions with Disk Utility /li lirebooted in Safe Mode (holding shift while rebooting)/li lirebooted again in Normal Mode/li /ul  Hope that helps anyone.  <comment217566> Thanks, I've ran the commands. Updated my question as the result does not say anything to me :( <comment218719> Well done on finding the culprits. :) <comment225977> I think that this is what most people tried anyway (including me). In my case, this helped only temporarily. <comment231630> What a great answer! This helped me immensely finding out what made my  MacBook Air's fans spin. I deleted the Files from iCloudDrive but that didn't stop the generation of cloudthumbnails.db-journal. After a reeboot, however everything was fine again. Thanks a lot! <comment307855> Worked on my El Cap MacPro. <comment347985> And Repair Permissions no longer exists in Sierra <comment347986> quicklookd has been thrashing and sucking up CPU for me for two days.  iosnoop and opensnoop for me get errors.  And I most certainly never edited their definitions.