Enable home directory sites in Lion server? <body> I had a Leopard server with a few hundred users (students), and each of them was able to maintain their own web content in their Sites folders in their home directories -- and they could access them (from either inside or outside the network) by going to http://ourdomain.com/~studentname.  Just migrated to a Lion server, and everything is working perfectly, except now visiting any of those home directory sites nets us a 404. I can't find anything in the GUI apps that looks like it could help with this... am I missing something?  I've already tried re-creating the whole OD structure, but that hasn't helped.  <answer25631> Can we assume you've gone over the following with a fine tooth comb - comparing the prior version to the new Lion versions?  Web configuration data is concentrated in the following files and directories:   ul li/etc/apache2/httpd.conf/li li/etc/apache2/httpd_mailman.conf/li li/etc/apache2/httpd_squirrelmail.conf /li li/etc/apache2/magic/li li/Library/WebServer/ Web content/li /ul  Additional web content is usually in:  ul li/Library/WebServer/Documents//li li/Library/WebServer/CGI-Executables//li liAny other location where it resides (like the user home folders you are mentioning)/li /ul  <answer25733> Found it: The UserDir module in Apache2 defaults to public_html. So ~studentname was being directed to /Users/studentname/public_html. Which doesn't exist in any of the users' folders.  What emdoes/em exist is /Users/studentname/Sites, so I just added this line to the httpd.conf:  precodeUserDir Sites /code/pre  ...and it's working perfectly now. Awesome!  Many thanks to @bmike for pointing me in the right direction.  <answer58341> Mountain Lion removes personal web sharing as an option as it exposed user IDs. (~username)  Instead of turning it on for ALL users of a system, it is done on a per user basis.  Try the following as root (and substitute your username in place of username)  precodecd /etc/apache2/users sed -e "s/Guest/username/g" Guest.conf &gt; username.conf /code/pre  <comment28977> [Pages 27-40 of the Migration Guilde](http://images.apple.com/macosx/server/docs/Upgrading_and_Migrating_v10.7.pdf) go over the bulk of the manual migration steps. If you can't try these now, you might want to re-do the upgrade and run these manually to see if an error happened in one of the steps. If you're lucky, it's the apache2 files and not needing to re-migrate the open directory schema... <comment29037> I've already completely re-run the migration, though not via the individual manual steps -- there's no way I'll have the time to do it that way. I also completely rebuilt the OD schema, with no positive effect. If it's an Apache config problem, what I need to know is: How do I blow out the existing config and get a fresh one? <comment29043> Other than reviewing the files listed as apache config - I've got no silver bullets. I'd start going over the apache logs, comparing the old config files with the new config files, it's going to be a bit of a chore nailing it down since it could easily be one of ACL, UID or apache configs. Does a newly created user show 404 for their web page? That might point towards or away from apache as the root cause. <comment29185> Since there's nothing fancy about my webserver setup, I'm wondering: Is it safe to just blow all those files out? ie., will apache auto-create a new httpd.conf if it can't find one? <comment29186> Yeah, newly created users also get the 404. <comment29193> No (I don't think they regenerate without a re-install of the OS) - but here are the contents of my just 5 minutes ago installed clean Lion Server install... http://cl.ly/AMdc - use `tar -tzvf apache2.tgz` to view the contents - I did save things absolute - so use care you don't overwrite your /etc/apache2 when you expand these. <comment29194> So happy you found the surgical option! Do choose this as the accepted answer - I appreciate the thanks. <comment55238> According to [this answer](http://apple.stackexchange.com/questions/18517/cleanup-apache-config-for-lion-server/20355#20355), you can reset the web config with `sudo serveradmin command web:command=restoreFactorySettings` <comment67368> Are you referring specifically to Mountain Lion Server? Or just Mountain Lion? Does migrating from Lion to Mountain Lion actually _disable_ personal web sharing if it was previously enabled? <comment97400> I have just looked at /private/etc/apache2/extra/httpd-userdir.conf which would seem to get included, and contains the UserDir directive as described. going for https://server/~user I get, in the error log, File does not exist: /Library/Server/Web/Data/Sites/Default/~user so there remains an unexpected interaction