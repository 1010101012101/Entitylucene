Time Machine backup to an SMB share Mavericks <body> I'm following the instructions and scripts detailed in this article, but it's failing on mavericks - the mounted windows drive isn't showing up in the time machine disk selection pane.  Any ideas how to get this working?  http://lifehacker.com/5691649/an-easier-way-to-set-up-time-machine-to-back-up-to-a-networked-windows-computer  (Using Window 7 and the SMB server)  <answer110648> Pulled this from MacRumors:  ul liAfter you get the sparse bundle created in your desired location, mount the sparse bundle by double clicking it.  It should mount just as any other drive or image file will./li liOnce that is done open up terminal and run this command (leave the quotes in place):  precodesudo tmutil setdestination "/Volumes/Time Machine Backups/" /code/pre/li liNow open up Time Machine and turn it on.  You don't have to select your disk, the command in terminal did that for you./li /ul  <comment127507> I've been looking for an answer for this as well. Any luck? <comment127508> Has anyone validated that this scheme actually results in a *restorable* backup?  I have my doubts. <comment127509> Yes - it appears to work. It's just a disk image stored on an SMB share. The issue is that previously the SMB share showed up when the defaults setting was set, now it doesn't. <comment129684> What version is the SMB service? Please add details to the question – thanks. <comment130129> I'm not sure the version is really relevant unless the answer depends on it. The solution to the problem before - setting Time Machine to show "unsupported volumes" didn't care if it was 1.0, 2.0, 2.1 or 3.0. <comment130200> I'm just using a Windows 7 box (SP1) to host the SMB shares. I doubt this is particularly relevant, though. <comment130479> I can confirm that this works.  Thanks! <comment132915> somewhat amusingly I can't test this just yet as my MacBook is out of action due to water damage (fortunately I had a non-networked backup!), but marking this answered anyway <comment150781> The Sudo tmutil command returned the following error: Incompatible file system type: smbfs (error 45) The backup destination could not be set. <comment150782> Not a solution -- yet, but this is the best discussion on the topic I have found so far http://forum.synology.com/enu/viewtopic.php?f=229&t=71049 <comment164213> I create a bundle. I create a script that mounts NAS and after that mount bundle. But from time to time, bundle unmounts and Time Machine waits for connecting bundle and don't create backups.  But when I select "Backup now" Time Machine automatically mounts bundle and create backup.  Maybe I can customize this behaviour and force Machine to mount bundle? <comment165890> I'm getting this error with a samba share that is mounted as hfsplus on the server: ```$ sudo tmutil setdestination "/Volumes/TimeMachine/" /Volumes/TimeMachine: Incompatible file system type: smbfs (error 45) The backup destination could not be set.``` Any idea why? <comment206571> If you're using an unencrypted sparse bundle, it's well worth compressing the sparse bundle, as long as the OS allows for native compression in the filesystem (that's typically the case if you're hosting the Samba share on a Windows proper machine). I haven't tried it with encrypted volumes, but unencrypted sparse bundles used with Time Machine backups do compress quite well (almost 50% in my case).  If you decide to compress the sparse bundle on the host, you might as well mark the folder as compressed as soon as you copy it there, so it can get compressed as soon as the data is copied there. <comment283287> @frhd, it looks like the path you're doing `setdestination` with is the SMB volume and not the mounted `.sparsebundle` file. You need to browse to the `.sparsebundle` file and double click it in Finder so it mounts (just like a `.dmg` would). It should then show up if you do `ls /Volumes/` and is by default called `Time Machine Backups` (not `TimeMachine`).