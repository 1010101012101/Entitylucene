MacBook Air 2013 screen issues after sleep <body> I'm having some issues with my MacBook Air (2013). Whenever the system enters hibernation, as it does after a couple of hours of sleep, the screen gets distorted when it comes back from sleep.  When resuming from sleep the screen gets distorted like this:  img src="https://i.imgur.com/1B7jBDjh.jpg" alt="Artefact1"  img src="https://i.imgur.com/PuSn6tqh.jpg" alt="Artefact2"  img src="https://i.imgur.com/vovFU6Dh.jpg" alt="Artefact3"  A reboot fixes that but the menu bar icons as well as some toolbar icons disappear, like in the following screen shots:  strongMenu bar:/strong  img src="https://i.stack.imgur.com/YUwwt.png" alt="Menu Bar"  strongFinder:/strong  img src="https://i.stack.imgur.com/ouPJ0.png" alt="Finder"  strongMail:/strong  img src="https://i.stack.imgur.com/fRd5n.png" alt="Mail"  These issues go away with a reboot into safe mode and then reboot (a tip which I found in a different thread here), however it all comes back after the next hibernation.  It seems to be power related, as it only happens if the power cord is plugged in when the computer first goes into deep sleep and then gets plugged out while in sleep. I've tested this thoroughly using the DeepSleep widget and found how to reproduce it.  I've tried resetting the PRAM but no luck there. Also, the return from codepmset -g | grep hibernatemode/code is code0/code - is that normal on the Air? It used to be 7 on my previous MacBook.  Another thing that might be worth noting is that this started happening after I ran out of battery while the computer was on, however it happens every time it sleeps without power cord since then, even though it doesn't run out of power.  strongUpdate:/strong  I thought that changing the hibernatemode to 7 worked, since my test to reproduce the issue didn't cause it anymore. However after having had the computer sleep over night it wouldn't wake up, it just showed a blank screen. This is the console output I got: http://pastebin.com/EB4SAtfe  The logs at 01:52 is when I put the computer to sleep and went to bed. It then wakes up 3 hours later and is then supposed to sleep again I guess. Not quite sure why it does this, it also says:  precode2013-09-16 04:52:53,008 com.apple.time[13]: Next maintenance wake [Backup Interval]: &lt;date: 0x7fb250608870&gt; Mon Sep 16 02:03:30 2013 CEST (approx) /code/pre  Although that time has already past (It's 04:52 CEST when it schedules that). Also, there is no console output from when I wake the computer, even though I waited a good couple of minutes at the black screen before forcing a reboot as well as closed and reopened the lid.  <answer101839> Are there any relevant messages shown by codepmset -g log/code or in codesystem.log/code?  I think that codepmset -g hibernatemode/code should be code3/code by default on laptops both on battery and AC power. codeman pmset/code says that "standby only works if hibernation is turned on to hibernatemode 3 or 25". What does codepmset -g standby/code return on battery power or AC power? Did you start using the Deep Sleep widget before or after those issues started?   Since starting up in safe mode fixed the issues, have you checked if Disk Utility shows some errors when you verify the OS X volume, or have you tried deleting code/var/db/dyld//code?  I had a similar issue on my MacBook Air where toolbar icons and other icons occasionally disappeared, but it stopped happening after I reinstalled OS X from the recovery partition. The screen was never distorted after waking up from sleep though. In any case, you could try reinstalling OS X: it only takes about an hour if you have a fast Internet connection, it keeps user files and settings in place, and it might also fix other issues. Upgrading to 10.9 might have the same effect though.  <answer102662> So here's what happened:  I took the computer to the AppleStore, seeing it was only about three weeks old, and got them to take a look at it. Since it's a company computer I had some company benefits granting me a temporary replacement while they were fixing mine. I took my TimeMachine copy and restored it on to the borrowed Mac. I was surprised to find that the issue still appeared, which was quite annoying. So I restored the Mac again, messed around with the codepmset/codesettings and tried to reproduce the issue but it was impossible.  I then remembered that the issue started appearing a few days ago when I did a battery calibration (Drained the Mac completely) so I restored to a TimeMachine backup from before that and Boom, the issue was gone. At about the same time they called from the store and said that they couldn't reproduce the issue, so I told them what I had found, came in and got my computer back.  All in all, a really weird story but apparently something related to draining the battery while the computer was still on got corrupted and was then included in the TimeMachine backup.  <comment119965> reinstalling the os, is not addressing the problem. <comment119966> could you post a console record of the activity during sleep mode, including the moment when you unplug the power. <comment119968> Setting hibernatemode to 7 seems to have solved it. Since unplugging the power wakes the computer (Wake reason: EC.ACDetatch) my guess is that the sleepimage gets corrupted. When I wake the computer it loads the corrupt file and that explains the garbling. Does not explain the missing icons though. <comment119974> @Buscarì›ƒ It's easy enough that it can be done as a troubleshooting step though. <comment119975> I did not say it is not easy, just it is bit like doing major surgery, for a common cold. <comment119978> I'll wait a few days and see how it works, not sure if it's stable. <comment120010> Still having issues, updated with console log <comment120013> Thanks for the reply. As mentioned in my updated post now I tried pmset 7. I also tried 3, but with that it wouldn't go into hibernate at all. 3 and 7 should be the same with the difference that 7 is for secure VM. `pmset -g standby` returns nothing but `pmset -g | grep standby` gives me: `standbydelay         10800  standby              1` (Not sure if that's what you meant)  I used the deepsleep widget only to reproduce the issue without waiting 3 hours with the computer in sleep mode :) <comment120015> I tried hibernatemode 3 but that causes the same artefacts and missing icons after reboot. Did a repair permissions in Disk Util and that changed some permissions but it didn't help. <comment120017> As for `pmset-g log` this is what I get after a deep sleep with power cord plugged in, then unplug while sleeping then wake followed by artefacts (All with hibernatemode 3): http://pastebin.com/VqwK9AL9 <comment120018> Thank your for added information, Could you disconnect your thunderbolt and try without it <comment120133> I don't have any thunderbolt devices, really weird log statement, not really sure what it's referring to.   I took it in to the Apple Store yesterday so we'll see what they say. In the mean time I got a replacement and I'll do some testing on it. <comment120136> Did some testing on the new Mac (Also Air). The account I set up on install has `hibernatemode 5`, so that's weird. But the corruption still appears on that account, however this is all after I restored from my TM backup, stupid of me not to test it before. Either way it seems to be related to my software. <comment120137> Now you broke another one !? :( <comment120138> So it would seem... At least it leads me to the conclusion that my configuration is broken and not my machine. Unless the two machines are from they same batch and suffer from the same problem, but that seems kind of unlikely. I just tried deleting `/Library/Preferences/SystemConfiguration/com.apple.PowerManagement.plist` to get the power manager settings back to default, now apparently `hibernatemode` is `3`, not sure where the 5 I was seeing earlier came from... <comment120140> I am more concerned about the thunderbolt activity during the sleep, AppleThunderboltNHIType2::waitForOk2Go2Sx - retries = 2 I have seen screen going like yours when there was a improper thunderbolt switching. Do not know what is making the calls for thunderbolt on your system. <comment120143> Nope, I have no idea :( I've only used the Thunderbolt port once or twice for an external screen, but it's been a couple of weeks since I last used it. Resetting the PowerManagement settings didn't help BTW. <comment120146> As said, sometimes thuderbolt does not switch properly. Someone or something in your system is asking for it during the sleep, thus turning it on, and then you get the problem at wake. <comment120148> A quick google search for the statement showed it in a couple of other logs posted in a thread about sleep issues (https://discussions.apple.com/thread/5118135?start=135&tstart=0). The reason the computer wakes during sleep is not Thunderbolt though, it's the disconnection of the power cord. Either way, I'll try erasing the borrowed computer this afternoon and see if it's reproducible. <comment120149> Also maybe worth noting: The garbling appears on screenshots as well. <comment124972> Try updating to Mavericks. It solved that kind of problems on my Mac Book Air. <comment125257> Yep, it's fixed by Mav. However now I got this instead: http://apple.stackexchange.com/questions/106721/mac-dark-wakes-from-sleep-every-minute <comment274045> I am experiencing the same thing with my Macbook Pro Mid 2012. Did you find the actual cause and solution? I can't quite tell.. thanks. <comment274075> Not really, as I explained in my answer I just did a reset to an earlier point in time using TimeMachine and that magically fixed the issue. Now 2.5 years later the issue hasn't come back so I guess it was indeed a software problem.