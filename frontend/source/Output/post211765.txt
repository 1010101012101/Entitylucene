DNS resolution broken in El Capitan with Thunderbolt Ethernet Adapter on Offline network <body> After upgrading to El Capitan how do I enable DNS resolution on an offline, internal computer network?  Before upgrading to El Capitan I could connect to my internal network, set my DNS and search domain, and I was good to have DNS resolution happen. There was no gateway on the network or DHCP server, just a switch.  Following the upgrade I was no longer able to resolve DNS names internally on a network physically separate from the internet and not connected in any way to the internet. I could ping the hosts on the network by IP address yet not by DNS name.  I tried the usual, flushing the DNS cache, restarting mDNSResponder, and rebooting. None of that helped.  One weird fact is that my strong/etc/resolv.conf/strong is now blank whereas before the upgrade it showed the list of resolvers my Mac would use.  I imagine El Capitan must have included an update to the OSX DNS resolution system. Can I go and configure it manually? I have been reduced to adding entries to my strong/etc/hosts/strong file.  I have tried the suggestions mentioned here.  I should mention that my co-worker's computers that are on Yosemite do not experience any issues at all and the Windows computers on the network still resolve names properly as well.   The DNS server is running BIND9 on Ubuntu 14.04 on the regular port 53.  h2EDIT:/h2  I tried disabling System Integrity Protection (SIP) according to this set of instructions and that did not help at all.  h2EDIT 2:/h2  Okay, so I found a fix and I probably didn't need to do a fresh install of El Capitan to do it. This is the WEIRDEST bug I have ever encountered on the Macintosh platform. All I had to do was add a Router in my network settings. I just put an arbitrary value in of 1.0.0.1 even though there is no device in my internal network that acts as a router. The mere presence of a value in the "Router:" input field triggered a write of the resolv.conf file and a restoration of the DNS service.  <answer215236> We are having the same problem in our network infrastructure. But we noticed that if we ping the dns-name + ".local" it discovers the IP's correctly.  I think it must be a bug in the software of El Capitan because our different tests on Systems running Yosemite and older versions of OS X does not have this kind of problem with DNS resolution.  <answer217892> I had this same problem, noticed I had a search domain in the code/etc/resolv.conf/code config file.  Opened up network configuration and removed search domain, then set two custom DNS servers, the first was the DNS server issued by my router (which was itself, code192.168.1.1/code)   Then added Google's DNS server code8.8.8.8/code ... clicked Apply and somehow it started working again.  I'm sure this will come up again as this isn't the first time i've had this issue.  hr  UPDATE 10/2016 ... had issue AGAIN, here's post in another SE thread:  Unfortunately none of this helped me, and turned out after an hour of trying to figure it out and beating my head against the coffee table .. something, somehow, somewhere ... removed the code/System/Library/LaunchDaemons/com.apple.mDNSResponder.plist/code file, and was the reason I had this problem.  Realized this when I saw this error message: code/System/Library/LaunchDaemons/com.apple.mDNSResponder.plist: No such file or directory/code  Here's a copy of a version from El Capitan: https://gist.github.com/tripflex/e7147690d1768dc74b1dd626614573c0  Here's the code from that gist:  precode&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt; &lt;plist version="1.0"&gt; &lt;dict&gt;     &lt;key&gt;Label&lt;/key&gt;     &lt;string&gt;com.apple.mDNSResponder.reloaded&lt;/string&gt;     &lt;key&gt;OnDemand&lt;/key&gt;     &lt;false/&gt;     &lt;key&gt;InitGroups&lt;/key&gt;     &lt;false/&gt;     &lt;key&gt;UserName&lt;/key&gt;     &lt;string&gt;_mdnsresponder&lt;/string&gt;     &lt;key&gt;GroupName&lt;/key&gt;     &lt;string&gt;_mdnsresponder&lt;/string&gt;     &lt;key&gt;ProgramArguments&lt;/key&gt;     &lt;array&gt;         &lt;string&gt;/usr/sbin/mDNSResponder&lt;/string&gt;     &lt;/array&gt;     &lt;key&gt;MachServices&lt;/key&gt;     &lt;dict&gt;         &lt;key&gt;com.apple.mDNSResponder&lt;/key&gt;         &lt;true/&gt;             &lt;key&gt;com.apple.mDNSResponder.dnsproxy&lt;/key&gt;             &lt;true/&gt;     &lt;/dict&gt;     &lt;key&gt;Sockets&lt;/key&gt;     &lt;dict&gt;         &lt;key&gt;Listeners&lt;/key&gt;         &lt;dict&gt;             &lt;key&gt;SockFamily&lt;/key&gt;             &lt;string&gt;Unix&lt;/string&gt;             &lt;key&gt;SockPathName&lt;/key&gt;             &lt;string&gt;/var/run/mDNSResponder&lt;/string&gt;             &lt;key&gt;SockPathMode&lt;/key&gt;             &lt;integer&gt;438&lt;/integer&gt;         &lt;/dict&gt;     &lt;/dict&gt;     &lt;key&gt;POSIXSpawnType&lt;/key&gt;     &lt;string&gt;Interactive&lt;/string&gt;     &lt;key&gt;EnablePressuredExit&lt;/key&gt;     &lt;false/&gt; &lt;/dict&gt; &lt;/plist&gt; /code/pre  <answer239413> I had the same problem on strongEl Capitan/strong, and was able to resolve it by adding some values to the DNSResponder file, while SIP was DISABLED.  The steps I followed below:  ol liReboot./li liPress Cmd+R to enter Recovery mode./li liOpen Utilities-Terminal./li liRun the command "csrutil disable"./li liReboot. You are back in OS X with SIP disabled./li liMake the required changes by running the below commands from the terminal:/li /ol  codesudo launchctl unload /System/Library/LaunchDaemons/com.apple.mDNSResponder.plist/code  codesudo defaults write /Library/Preferences/com.apple.mDNSResponder.plist AlwaysAppendSearchDomains -bool YES/code (This is a single line)  codesudo launchctl load /System/Library/LaunchDaemons/com.apple.mDNSResponder.plist/code  ol start="7" liReboot./li liPress Cmd+R to enter Recovery mode./li liOpen Utilities-Terminal./li liRun the command csrutil enable./li liReboot./li /ol  After I got back into the OS, I added the search domains back into System Pref - Network - Advanced - DNS Tab.    Search Domains now work once again, where I am able to ping the first two bits of my domain name, and the last 3 are added automatically.  <answer249220> Change "Configure IPv6" from automatic to link-local only.  Works like a champ  <comment256316> I am thinking it probably has something to do with the new System Integrity Protection (SIP) upgrades for El Capitan not playing well with the Thunderbolt ethernet adapters. There is another dns issue [here](http://slaptijack.com/system-administration/el-capitan-leads-to-more-dns-woes/) with El Capitan that was solved by disabling SIP. <comment260194> pinging the local DNS name does not work for me. I have a host with a name like webserver.internal.mycompany.com and when I try webserver.internal.mycompany.com.local then I get a "cannot resolve host" error. Regardless, appending .local and the end of the domain is unacceptable to me since it is not a good fix for my general audience. I want to get to the root of the problem. <comment260195> I will be using Apple's recovery to do system recovery and start with Yosemite and then installing El Capitan fresh. If my problem is not resolved then I will downgrade to Yosemite. <comment260337> Okay, so I found a fix and I probably didn't need to do a fresh install of El Capitan to do it. This is the WEIRDEST bug I have **ever** encountered on the Macintosh platform. All I had to do was add a **Router** in my network settings. I just put an arbitrary value in of 1.0.0.1 even though  there is no device in my internal network that acts as a router. The mere presence of a value in the "Router:" input field triggered a write of the resolv.conf file and a restoration of the DNS service. <comment269724> The router solution didn't work for me.  resolv.conf is still missing.  where there any other steps you took? <comment309095> Welcome to Ask Different.  We like answers to be more than just a single line.  Ideally, you want to explain why your answer is *right."  It also helps to provide links, citations, and/or screen shots.  Please review our help section [How to Answer](http://apple.stackexchange.com/help/how-to-answer) on writing good answers to questions <comment321179> I'm having the same Problem after updating to El Capitan. - resolv.conf stays empty - network system preferences ui is showing the correct dns servers and search domain - dig google.com does not work - dig @my_dns_server google.com *does* work so the server seems reachable <comment321180> The weird part is that with my wireless adapter `resolv.conf` populates and DNS resolution works just fine. There is only a problem with the ethernet adapter. <comment321181> you should try putting a value in for your router in your network interface configuration. That worked for me.