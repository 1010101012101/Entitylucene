iMac disk partion FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF and fusion drive unlinked <body> I was trying to uninstall linux mint and was trying to restore the partitions back to one. Somehow I ended with the one of the partition labeled FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF.  This are the information from diskutil:  precode/dev/disk0 (internal, physical):    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                        *1.0 TB     disk0    1:                        EFI EFI                     209.7 MB   disk0s1    2: FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF Macintosh HD            500.4 GB   disk0s2    3: FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF               650.0 MB   disk0s3    4:                  Apple_HFS extra                   498.9 GB   disk0s4  /dev/disk1 (internal):    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                         24.0 GB    disk1    1:                        EFI EFI                     314.6 MB   disk1s1    2:          Apple_CoreStorage Macintosh HD            23.6 GB    disk1s2    3:                 Apple_Boot Boot OS X               134.2 MB   disk1s3  /dev/disk2 (internal, virtual):    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            MacintoshHD            +523.0 GB   disk2                                  Logical Volume on disk1s2, disk0s2                                  B6A398E1-B484-4A1A-A590-2FB663DC609A                                  Unencrypted Fusion Drive   sudo gpt -r show /dev/disk0        start        size  index  contents            0           1         PMBR            1           1         Pri GPT header            2          32         Pri GPT table           34           6                    40      409600      1  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B       409640   977248144      2  GPT part - FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF    977657784     1269536      3  GPT part - FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF    978927320   974335664      4  GPT part - 48465300-0000-11AA-AA11-00306543ECAC   1953262984      262151            1953525135          32         Sec GPT table   1953525167           1         Sec GPT header /code/pre  I ended up restarting and was unable to log in to MacOS. I attempted recovery but ended up installing MacOS on a separate partition. Now the diskutil reads:  precode/dev/disk0 (internal, physical):    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                        *1.0 TB     disk0    1:                        EFI EFI                     209.7 MB   disk0s1    2: FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF Macintosh HD            500.4 GB   disk0s2    3: FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF               650.0 MB   disk0s3    4:                  Apple_HFS extra                   498.3 GB   disk0s4    4:           Apple_Boot Recovery HD                   498.3 GB   disk0s5  /dev/disk1 (internal):    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                         24.0 GB    disk1    1:                        EFI EFI                     314.6 MB   disk1s1    2:          Apple_CoreStorage Macintosh HD            23.6 GB    disk1s2    3:                 Apple_Boot Boot OS X               134.2 MB   disk1s3  sudo gpt -r show /dev/disk0        start        size  index  contents            0           1         PMBR            1           1         Pri GPT header            2          32         Pri GPT table           34           6                    40      409600      1  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B       409640   977248144      2  GPT part - FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF    977657784     1269536      3  GPT part - FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF    978927320   973328272      4  GPT part - 48465300-0000-11AA-AA11-00306543ECAC                                                                          19552255592   1269536      5  GPT part - 426F6F74-0000-11AA-AA11-00306543ECAC   1953525128     7            1953525135     32              Sec GPT table   1953525167      1              Sec GPT header /code/pre  Now it seems that the fusion drive is unlinked. I think I am messing up hard disk big time. I do not know what is going on and I have important data (which I stupidly failed to backup).  Is there any ways to recover the partition,  relink the fusion drive and not lose the data within? I really appreciate if anyone can guide me along the way. The other posts pertaining to fusion drives alone and FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF issues that I had read confuses me.  Moreover I am worried that I will mess things more.  Please help.   Update: I have followed the detailed instructions by klanomath. Hurray. I have manage to boot in. Now the diskutil reads:  precode/dev/disk0 (internal, physical):    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                        *1.0 TB     disk0    1:                        EFI EFI                     209.7 MB   disk0s1    2:          Apple_CoreStorage Macintosh HD            500.4 GB   disk0s2    3:                 Apple_Boot                         650.0 MB   disk0s3  /dev/disk1 (internal):    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:      GUID_partition_scheme                         24.0 GB    disk1    1:                        EFI EFI                     314.6 MB   disk1s1    2:          Apple_CoreStorage Macintosh HD            23.6 GB    disk1s2    3:                 Apple_Boot Boot OS X               134.2 MB   disk1s3  /dev/disk2 (internal, virtual):    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            MacintoshHD            +523.0 GB   disk2                                  Logical Volume on disk1s2, disk0s2                                  B6A398E1-B484-4A1A-A590-2FB663DC609A                                  Unencrypted Fusion Drive  sudo gpt -r show /dev/disk0        start        size  index  contents            0           1         PMBR            1           1         Pri GPT header            2          32         Pri GPT table           34           6                    40      409600      1  GPT part - C12A7328-F81F-11D2-BA4B-00A0C93EC93B       409640   977248144      2  GPT part - 53746F72-6167-11AA-AA11-00306543ECAC    977657784     1269536      3  GPT part - 426F6F74-0000-11AA-AA11-00306543ECAC    978927320   974597815                  1953525135          32         Sec GPT table   1953525167           1         Sec GPT header /code/pre  Also when I boot in, it goes to GNU GRUB version 2.02. I can log in MacOS by holding option/alt when I boot up. The follow up questions are:  ol liIs there a way to clean up the linux installation and not have GRUB appear?/li lidisk0s3 is not necessary for my OS to boot right? It seems like the remains of my linux installation but I am not sure. Is it possible to remove/format it and add it back to the main partition? /li liPartition 4 (498.9GB) is now missing. /li /ol  I assume I have to use:  precodegpt add -i 4 -b 978927320 -s 974597815 -t ????????-0000-11AA-AA11-00306543ECAC disk0 /code/pre  What number do I use?  <answer266490> The second (and the third) partition of your internal HDD got the wrong partition types, your data probably won't be lost. If one part of a Fusion Drive (i.e. disk0s2) suddenly get a wrong partition type, the "Fusion Drive" is split and dysfunctional.  A bootable OS X partition (except the Recovery HD) either has the GUID 48465300-0000-11AA-AA11-00306543ECAC for a standard OS X partition or the GUID 53746F72-6167-11AA-AA11-00306543ECAC for a CoreStorage partition. The FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF is an unknown partition type (but not strongno partition/strong like the 000000-0000-0000.... one).  Since your iMac contains a Fusion disk and the remnants of CoreStorage items are visible in the diskutil output (disk1s2 and disk2) it's the latter.  The GUID can be modified with codegpt/code. You can only add, delete and modify GUID partition tables with emgpt/em when all related disks are unmounted. If you have a CoreStorage Logical Volume Group (e.g a Fusion drive or a FileVault volume) the logical volumes get their own (virtual) disk identifiers which have to be unmounted first. An example is your first codediskutil list/codeoutput: your logical volume got the disk identifier disk2. To unmount disk1 you have to unmount disk2 first because parts of it reside on disk1 (disk1s2). The other part resides on the defunct disk0 (disk0s2):  precode/dev/disk2 (internal, virtual):    #:                       TYPE NAME                    SIZE       IDENTIFIER    0:                            MacintoshHD            +523.0 GB   disk2                                  Logical Volume on disk1s2, disk0s2                                  B6A398E1-B484-4A1A-A590-2FB663DC609A                                  Unencrypted Fusion Drive /code/pre  To reconfigure your partitions boot to a third party drive (e.g. Internet Recovery or a OS X installer thumb drive).  hr  ul liBoot to Internet Recovery Mode/li liOpen Terminal in the menubar Utilities  Terminal/li liGet an overview with codediskutil list/code/li liGet an overview of your internal disks with the disk identifier found in the previous command. Below I assume the disk identifier of your internal disks are disk0 (HDD) and disk1 (the small SSD) (replace it with the one you have found in your environment)  precodegpt -r show disk0 gpt -r show disk1 /code/pre/li liUnmount disk0 and disk1 with codediskutil umountDisk disk0/code and codediskutil umountDisk disk1/code/li liThen remove the newly installed OS X and its Recovery HD. I assume you don't have any important data on it.  precodegpt remove -i 5 disk0 diskutil umountDisk disk0 gpt remove -i 4 disk0 /code/pre/li liThen remove and re-add the previous working partitions with the same sizes but proper types:  precodediskutil umountDisk disk0 gpt remove -i 3 disk0 gpt remove -i 2 disk0 gpt add -i 3 -b 977657784 -s 1269536 -t 426F6F74-0000-11AA-AA11-00306543ECAC disk0 gpt add -i 2 -b 409640 -s 977248144 -t 53746F72-6167-11AA-AA11-00306543ECAC disk0 /code/pre/li liIn most cases the Logical Volume (MacintoshHD with the UUID B6A398E1-B484-4A1A-A590-2FB663DC609A) will reappear automatically.  precodediskutil verifyDisk disk0 /code/pre  You can explicitly mount the Logical Volume by using its lvUUID:  precodediskutil mount B6A398E1-B484-4A1A-A590-2FB663DC609A /code/pre/li liCheck the Fusion drive with (you have to use either of the disk identifiers of the partitions disk0s2/disk1s2):  precodefsck_cs disk1s2 /code/pre/li liEnter codediskutil cs list/code to check if the Logical Volume got its own disk identifier and is online (the size and the disk identifier may differ in your environment and the output below is just guessing). It should show something like this:  precode    ...     |     +-&gt; Logical Volume B6A398E1-B484-4A1A-A590-2FB663DC609A         ---------------------------------------------------         Disk:                  disk17         Status:                Online         Size (Total):          523101572992 B (523 GB)         Conversion Progress:   -none-         Revertible:            No         LV Name:               Macintosh HD         Volume Name:           MacintoshHD         Content Hint:          Apple_HFS /code/pre/li liCheck the volume with:  precodediskutil verifyVolume disk17 /code/pre/li /ul  hr  If you get an error message emdevice diskX is busy/em while modifying disks with codegpt .../code simply unmount it with codediskutil umountDisk diskX/code (replace diskX by the proper "busy" disk identifier (e.g. disk3)).  hr  If you want to expand your recovered logical volume (MacintoshHD with ~523 GB) to the full size of your Fusion Drive you can simply resize the whole CoreStorage stack booted to your main system with:  precodediskutil cs resizeStack lvUUID size /code/pre  with lvUUID: the UUID of the logical volume which you get by entering codediskutil cs list/code and size: a size in t, g, m, k or b.  In your case that's (depending on your installed system):  precodediskutil cs resizeStack B6A398E1-B484-4A1A-A590-2FB663DC609A 0g diskutil cs resizeStack B6A398E1-B484-4A1A-A590-2FB663DC609A 998g /code/pre  code0g/code is a magic size here which works in 10.7 - 10.10 (sometimes also in 10.11/12). If you get an error "disk too small" use a slightly lower size like 997g or 996g. After removing a BootCamp or a Linux partition the hard way this may fail because internals of the CoreStorage Logical Volume Group got corrupted. Then you have to backup your main volume with e.g. Time Machine, clean-recreate your Fusion Drive from scratch and restore your system with your Time Machine backup.  hr  To remove GRUB you have to remember where you installed it. Usually it's installed to one of the two EFI partitions. You have to mount either of them and check if they contain "uncommon" folders.  <comment334085> Possible duplicate of [OS volume shows as type 'FFFFFFFF-FFFF-FFFF-FFFFFFFF' after attempting to delete some Linux partitions—cannot log in](http://apple.stackexchange.com/questions/238012/os-volume-shows-as-type-ffffffff-ffff-ffff-ffffffff-after-attempting-to-delete) or see http://apple.stackexchange.com/search?q=FFFFFFFF <comment334087> I have seen most of those but still am uncertain on how to proceed. Mainly because I have important data on the partition that I cannot access now (which i stupidly did not back up). <comment334107> The first linked question & David's answer won't work! <comment334111> @klanomath.  I have seen a lot of your detailed replies to both the FFF issue and the as well as one to the fusion drive.  Can you help? <comment334262> Hi Klanomath, you are a life saver. I am now able to log in (my data is saved- Thank you). I still have a few issues though with regards to partition 3 and 4 as well as the linux installation. I updated the question as it is too long to type on the comments. Can you advise? <comment334265> @Shkgma Disk0s3 is your original OS X Recovery HD, disk0s4 and disk0s5 were the additional OS X install and its OS X Recovery HD. As I have written in my answer: "I assume you don't have any important data on it." with the meaning you installed it by accident and didn't use it. If you **have** personal data on it you can recover it by simply adding disk0s4/5 again in Internet Recovery Mode with the values of the now second gpt output of your question. <comment334267> @Shkgma Do you have personal data on the newly installed (after "loosing" your original one) os x partition? <comment334268> I do not have any personal data on disk0s4/5. I do not need the newly(accidentally) installed OS. Am I right to say that by using gpt and adding a UUID (48465300-0000-11AA-AA11-00306543ECAC), I will be able to use the other 'missing' 500GB? Right now my accessible hard disk is only 500GB/1TB . <comment334270> Is the UUID 426F6F74-0000-11AA-AA11-00306543ECAC for a recovery drive? I have the same UUID in the SSD as well. I am slightly confused now. Would a fusion drive have a recovery HD on both the SSD and HD? To get back the missing 500GB, I can use the UUID 48465300-0000-11AA-AA11-00306543ECAC as a standard partition? <comment334271> @Shkgma I have updated my answer. Boot OS X is one partition (134.2 MB) and Recovery HD (~650 MB) is another but both have the same partition type. Don't mess with them. <comment334273> Thank you so much. I have seen the update. I will not mess with them. I have already mess around enough.  Last thing. Can I use                                             diskutil cs resizeStack B6A398E1-B484-4A1A-A590-2FB663DC609A 0g       to get the max disk space available? <comment334274> @Shkgma Depends on your system. In older systems the "magic" 0g option works, in newer systems (like Sierra) it often fails. You can try it safely though. <comment334275> Cool. This is so over my head but I have learned something. For now, I am backing up my data before doing anything else. I can't thank you enough for the detailed instructions. If ever you are down in Perth, Australia, I would buy you a meal and a beer. :) <comment334276> @Shkgma I visited Perth & Fremantle yesterday (via Google Maps): I read a french solo sailor's report mentioning Cap Leeuwin (and I didn't know where it is) and then I searched a bigger city nearby ;-) <comment334279> Is a nice drive down to Cape leeuwin from perth. And visit all the wineries along the way at the Margaret river region. There is a nice lighthouse at Cape leeuwin too. Tour the world on google maps. Anyway if you ever have a chance to visit the kangaroos, let me know.  :)