Macbook Pro function buttons not working following changed battery <body> I have changed by Macbook Pro's (Early 2015 running El Capitan) battery, following which the function buttons (brightness control, mission control, skip, next, volume up, volume down...etc) have stopped working.  I can confirm that the buttons are working as if the codeFN/code button is pressed, i.e. F1, F2...etc.  I can also confirm that the codeFN/code button works using the emKeyboard Viewer/em (it is not visible but the backspace, return and arrow keys change).  I can confirm setting are correct and that Use F1, F2, etc. keys as standard function keys is unchecked.  I have tried:  ul liPRAM reset/li liSMC reset/li liSafe Mode/li liRun Apple Diagnostics (no issues found)/li /ul  <answer294404> I would start with the following:  ol liGo to Apple  System Preferences/li liSelect the Keyboard preferences pane/li liEnsure you have the Keyboard tab selected/li liDouble-check your settings and change if necessary/li /ol  Let me know how you go.  hr  [EDIT 1]  Okay, now that we know your settings are fine, let's see whether booting into Safe Mode makes a difference, either during or afterwards.  strongBoot into Safe Mode/strong  Follow these steps to boot your Mac into Safe Mode:  ol liFully shut down your Mac/li liRestart your Mac/li liImmediately press the kbdShift/kbd key and strongkeep it down/strong /li liLet go of the kbdShift/kbd key when you see the login window (NOTE: If you have FileVault enabled you may need to log in twice)./li liTake a note of what happens (i.e. what happens when you press the function keys, etc)/li liExit Safe Mode by restart your Mac as normal/li liAgain, take a note of what happens (i.e. what happens when you press the function keys, etc)/li /ol  Let me know how you went and we'll go from there.  hr  [EDIT 2]  Let's test your hardware. We can do this by running Apple Diagnostics.  strongRun Apple Diagnostics/strong  Follow the steps below to run Apple Diagnostics:  ol liFully shut down your Mac/li liRestart your Mac/li liImmediately press the kbdD/kbd key and strongkeep it down/strong until you see the Diagnostics screen appear/li liWait for Diagnostics to finish (this typically only takes a few minutes)/li liOnce complete, one of two things will appear on the screen:  ul lia emNo issues found/em message/li lia brief description of any errors found plus further instructions/li /ul/li liIf the diagnostics test does find errors, take a note of what they are/li /ol  strongNote:/strong If pressing and holding the kbdD/kbd key at Step 3 doesn't work, start again at Step 1 and, at Step 3 press and hold both the kbdOption/kbdkbdD/kbd keys instead. This will try and run diagnostics from the internet instead, so you will need to allow more time for it to complete.   Regardless, take a note of what happens and let me know how you went.  [EDIT 3]  Ok, here are a couple more emtests/em you can try to isolate things further:  ol liTry connecting an external keyboard (any cheap USB keyboard will do) and testing the Function key behaviour on that./li liTry booting up from another drive (if you can) and test things./li /ol  Let me know the results of either or both tests.  <comment371592> I can confirm setting are correct and that `Use F1, F2, etc. keys as standard function keys` is unchecked. <comment371593> Ok. I've updated my answer to include steps for testing in Safe Mode. <comment371594> Tested using Safe Mode and everything remained as is, both during safe mode and afterwards. <comment371596> If possible, it'd be good if you can update your question to include your exact model of MacBook Pro and what version of macOS you're running? <comment371597> Added, MBP early 2015 running El Capitan. <comment371598> I have tested running Apple Diagnostics and "No issues found". <comment372943> Did you disconnect the keyboard when you replaced the battery?  The first thing I would look at is "re-seating" the connection.  Disconnect it and reconnect it back.  I've solved many "weird" problems by simply disconnecting/reconnecting. <comment373026> Yes I have, I will give it a go but it is bizarre or misleading that the F1, F2...etc keys work and only the special keys (brightness, volume...etc) do not